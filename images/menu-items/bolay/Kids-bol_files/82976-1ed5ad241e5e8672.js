"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82976],{33041:function(a,b,c){c.r(b),c.d(b,{AccountDetailsSection:function(){return i},Entry:function(){return d}});var d,e,f=c(85893),g=c(67294),h=c(66826);(e=d||(d={})).MODAL="modal",e.NON_MODAL="non_modal";var i=function(a){var b=a.navigateToSignUp,c=a.closeGuidedModal,e=a.entry,i=(0,h.J)(void 0!==b&&b,e===d.MODAL,c),j=i.isGuest,k=i.loading,l=i.handlePostMessage,m=i.iframeRef,n=i.frameUrl,o=i.iframeHeight;return(0,g.useEffect)(function(){return j&&window.addEventListener("message",l),function(){return window.removeEventListener("message",l)}},[j,k]),j&&!k?(0,f.jsx)("iframe",{width:"100%",title:"Login/Signup",src:n,ref:m,height:o,style:{border:"unset",display:"block"}}):null};b.default=i},28023:function(a,b,c){c.d(b,{Z:function(){return C}});var d=c(10253),e=c(85893),f=c(63998),g=c(39838),h=c(10071),i=c(51463),j=c.n(i),k=c(67294),l=c(66763),m=c(70573),n=c(47715),o=c(760),p=c(20306),q=c(61449),r=c(20688),s=c(23685),t=c(3532),u=c(95779),v=c(22459),w=c(62139),x=c(17510),y=c(92757),z=c(674),A=function(a){var b=a.placeholder,c=a.isAddressLabelEnabled,d=a.addressPoiExpVariant;return b||(c?(0,v.YJ)(s.ZP.t("addressPickerStrings_autocompletePlaceholderV2"),d):s.ZP.t("addressPickerStrings_autocompletePlaceholder"))},B=j()(function(){return(0,t.ZP)("action_type_address_bar")}),C=function(a){var b=a.error,c=a.label,i=a.placeholder,j=a.onSelect,t=a.onChange,v=a.shouldFlipResults,C=a.isStaticPositionSuggestions,D=a.initialInputValue,E=a.clearSelected,F=a.isRounded,G=void 0!==F&&F,H=a.renderConnectedAfter,I=void 0===H?void 0:H,J=a.renderSuggestionsInAnchoredLayer,K=void 0!==J&&J,L=a.isLabelHidden,M=a.updateSavedSuggestion,N=a.textFieldSize,O=(0,m.useDVSBoolean)(n.PR.isAddressInputAutoFocused,!1),P=(0,p.Z)().isAddressLabelEnabled,Q=(0,o.Z)(),R=(0,z.se)(),S=R.isShowBanner,T=R.hintText,U=(0,d.Z)(k.useState(D||""),2),V=U[0],W=U[1],X=k.useRef(null);k.useEffect(function(){W(D||"")},[D]),k.useEffect(function(){if(b){var a,c;null==X||null===(a=X.current)||void 0===a||null===(c=a.focus)||void 0===c||c.call(a)}},[b]);var Y=void 0!==L&&L||!c,Z=function(a){W(a)},$=function(a){Z(a),M&&M(void 0),E&&E(),t&&t(),B()},_=function(a){q.X$(a),j(a)};return(0,e.jsx)(l.Z,{value:V,onChange:$,onSelect:_,children:function(a,d,j){M&&d.length>0&&M(d[0]);var k=(d.length||j)&&(0,e.jsx)(y.Z,{id:"addressAutocompleteDropdown",isLabelHidden:Y,isStaticPositionSuggestions:C,shouldFlipResults:v,suggestions:d,errorText:j,onSelect:_,updateSearchField:Z,isNewDesignEnabled:P}),l=(0,e.jsxs)(x.mj,{"data-anchor-id":r.ep.AddressAutocomplete,"data-testid":w.D.AddressAutocomplete,children:[(0,e.jsx)(f.TextField,{interfaceRef:X,"aria-autocomplete":"list","aria-controls":"addressAutocompleteDropdown","aria-expanded":!!V,autoComplete:"off",role:"combobox",error:b,isDisabled:a.disabled,onBlur:a.onBlur,onChange:function(b){q.un(b),a.onChange({target:{value:b}})},onKeyDown:a.onKeyDown,value:a.value,label:c||"",isLabelHidden:Y,placeholder:A({placeholder:i,isAddressLabelEnabled:P,addressPoiExpVariant:Q}),size:N||(P?f.TextField.Sizes.Large:f.TextField.Sizes.Medium),hint:T,renderBeforeContent:function(){return(0,e.jsx)(x.ee,{hasMarginLeft:P,children:(0,e.jsx)(h.Icon,{type:P?h.Icon.Types.SearchLine:h.Icon.Types.LocationPinEnabledLine,size:h.Icon.Sizes.Medium,color:h.Icon.Colors.TextSecondary})})},renderAfterContent:P&&a.value.length?function(){return(0,e.jsx)(u.Zl,{accessibilityLabel:s.ZP.t("addressPickerStrings_clearSearchInput"),onClick:function(){a.onChange({target:{value:""}}),Z("")},type:h.Icon.Types.CloseCircleFill,size:h.Icon.Sizes.Medium,hasMarginRight:!I})}:void 0,isRounded:G,renderConnectedAfter:I,autoFocus:O}),S&&(0,e.jsx)(z.k6,{})]});return K?(0,e.jsx)(g.AnchoredLayer,{position:g.AnchoredLayer.Positions.BottomCenter,boundariesElement:P?g.AnchoredLayer.BoundariesElements.Viewport:void 0,setContentWidthAsAnchorWidth:!0,content:k,offset:P?[0,g.AnchoredLayer.Offset.XxxSmall]:void 0,children:l}):(0,e.jsxs)(e.Fragment,{children:[l,k]})}})}},44928:function(a,b,c){c.d(b,{N2:function(){return j}});var d=c(26042),e=c(69396),f=c(48837),g=function(a,b,c){var d=c.find(function(b){return-1!==b.types.indexOf(a)});return d?d[b?"long_name":"short_name"]:""},h=function(a,b){return[g("street_number",b,a),g("route",b,a),].filter(function(a){return a}).join(" ")},i=function(a){var b=g("locality",!0,a),c=g("administrative_area_level_1",!1,a),d=g("postal_code",!1,a);return{city:b,state:c,zipCode:d,street:h(a,!0),shortname:h(a,!1)}},j=function(a,b){return new Promise(function(c){(0,f.geocodeByPlaceId)(a,function(a){return a}).then(function(h){if(h&&h.length&&h[0].address_components){var j,k=null===(j=h[0].address_components.find(function(a){return"country"===a.types[0]}))||void 0===j?void 0:j.short_name;(0,f.getLatLng)(h[0]).then(function(f){if(f&&f.lat&&f.lng){var j=h[0].address_components;c((0,e.Z)((0,d.Z)({googlePlaceId:a},i(j)),{printableAddress:b||h[0].formatted_address,lat:f.lat,lng:f.lng,countryCode:k,countryShortname:h[0].countryShortname,addressTrackingData:{formattedAddress:h[0].formatted_address,googlePlaceId:h[0].place_id,name:g("name",!0,j),route:g("route",!0,j),subpremise:g("subpremise",!0,j)}}))}})}})})}},92757:function(a,b,c){var d=c(10253),e=c(85893),f=c(31280),g=c(11890),h=c(33078),i=c(10071),j=c(67294),k=c(88311),l=c(61449),m=c(45481),n=c(23685),o=c(3532),p=c(44928),q=c(62139),r=c(17510),s={Mobile:120,Tablet:120,Desktop:120,WideScreen:120},t="".concat(m.EB,"static/img/consumer/share"),u="".concat(t,"/powered_by_google_on_white.png"),v=function(a){var b=a.id,c=a.isLabelHidden,t=a.errorText,v=a.onSelect,w=a.shouldFlipResults,x=a.isStaticPositionSuggestions,y=a.suggestions,z=a.updateSearchField,A=a.isNewDesignEnabled,B=void 0!==A&&A,C=(0,k.ac)().isMobile,D=(0,d.Z)(j.useState(!1),2),E=D[0],F=D[1],G=(0,d.Z)(j.useState(-1),2),H=G[0],I=G[1],J=(0,m.O1)(u),K=(0,d.Z)(j.useState(-1),2),L=K[0],M=K[1];return E?null:(0,e.jsxs)(r.Yi,{id:b,isLabelHidden:c,isNewDesignEnabled:B,shouldFlipResults:w,isStaticPositionSuggestions:x,role:"listbox",children:[y&&!t&&y.map(function(a,b){var c,d="".concat(null!==(c=a.id)&&void 0!==c?c:a.placeId,"-").concat(b),h=L===b||a.active||C,j=a.active?{ListCellContainerBackgroundDefault:i.Colors.ListCellContainerBackgroundHovered}:{},k=function(){I(b),(0,p.N2)(a.placeId,a.description).then(function(b){z&&(F(!0),z(b.printableAddress)),l.I$(a),(0,o.ZP)("home_page_address_input_dropdown",{description:a.description}),v(b)}).finally(function(){return I(-1)})};return B?(0,e.jsx)(r.iS,{onMouseEnter:function(){return M(b)},onMouseLeave:function(){return M(-1)},"data-testid":"".concat(q.D.AddressAutocompleteSuggestion,"-").concat(b),children:(0,e.jsx)(i.Theming,{overrides:{Colors:j},children:(0,e.jsx)(f.ZP,{size:f.ZP.Sizes.Small,insetVerticalSize:f.ZP.InsetSizes.XSmall,accessibilityRole:"radio",iconStart:{isInteractive:!1,type:f.ZP.IconTypes.LocationPinEnabledLine},iconEnd:h?{isInteractive:!1,type:f.ZP.IconTypes.ChevronRight,size:18}:void 0,isToggleable:!0,isToggled:!1,onClick:k,title:a.formattedSuggestion.mainText,subtext:a.formattedSuggestion.secondaryText,separatorType:f.ZP.SeparatorTypes.FullBorder})})},d):(0,e.jsxs)(r.AA,{"data-anchor-id":"".concat(q.D.AddressAutocompleteSuggestion,"-").concat(b),active:a.active,"aria-selected":a.active,role:"option",onMouseDown:function(a){return a.preventDefault(),k(),!1},children:[a.description,H===b&&(0,e.jsx)(i.Inset,{verticalSize:i.Inset.Sizes.XxxSmall,children:(0,e.jsx)(g.default,{})})]},d)}),t&&(0,e.jsx)(e.Fragment,{children:B?(0,e.jsx)(i.Inset,{horizontalSize:i.Inset.Sizes.Small,verticalSize:i.Inset.Sizes.Small,children:(0,e.jsx)(i.Text,{"data-testid":q.D.AddressAutocompleteSuggestion,styles:i.Text.Styles.Body2,children:t})}):(0,e.jsx)(r.q$,{"data-testid":q.D.AddressAutocompleteSuggestion,children:t})}),B&&(0,e.jsx)(r.LU,{size:120,hasBorderTop:!!t,"data-testid":q.D.GoogleAttributionImage,children:(0,e.jsx)(h.Z,{baseURL:"https://img.cdn4dd.com/s/managed/consumer/powered_by_google_on_white_3x.png",quality:100,loading:"lazy",fixedWidths:s,alt:n.ZP.t("addressPickerStrings_googleAttributionAltText")})}),!B&&(0,e.jsx)(r.q$,{children:(0,e.jsx)("img",{"data-testid":q.D.GoogleAttributionImage,src:J,alt:n.ZP.t("addressPickerStrings_googleAttributionAltText")})})]})};b.Z=v},8869:function(a,b,c){var d=c(26042),e=c(69396),f=c(10253),g=c(85893),h=c(24906),i=c(63998),j=c(95899),k=c(10071),l=c(67294),m=c(70573),n=c(68648),o=c(51232),p=c(28766),q=c(93395),r=c(11459),s=c(20688),t=c(3532),u=c(9633),v=c(22459),w=c(9205),x=c(35953),y=c(36878),z=c(53103),A=c(80763),B=c(10560),C=c(12136),D=c(21173),E=c(23685),F=function(a){var b,c=a.dropoffOptions,F=void 0===c?[]:c,G=a.dropoffPreferences,H=a.onCancel,I=a.driverInstructions,J=a.address,K=a.handleSubmitNewAddress,L=a.handleSubmitEditAddress,M=a.customizations,N=function(a,b){var c,d,e;X("dropoffOptionWithInstructions",(c=_,d=a,e=b,c.slice().map(function(a){return a.optionId===d?{optionId:d,instructions:e}:a})))},O=function(a){a.nativeEvent.stopImmediatePropagation();var b,c=$||void 0,f=(0,v.I0)(_,$),g=(0,v.Yt)(aa),h=g.manualLat,i=g.manualLng,j=r.z5.ADDRESS_LINK_TYPE_UNSPECIFIED,k={subpremise:Y||"",driverInstructions:f,dropoffOptionId:c,manualLat:h,manualLng:i,addressLinkType:j,entryCode:Z||"",buildingName:void 0,personalAddressLabel:void 0},l=J.lat,m=J.lng;X("formError",null);var n=(0,v.Uq)(J)?J.id:"";if(Z&&(0,A.eK)(n,Z.length),(0,v.Uq)(J))null===(b=L((0,e.Z)((0,d.Z)({},k),{addressId:J.id})))||void 0===b||b.catch(function(a){var b=(0,D.Au)(a);X("formError",b)});else{var o=K(k);void 0!==o&&o.then(function(){(0,A.KS)({manualLat:h,manualLng:i,lat:l,lng:m,dropoffOptionId:c})}).catch(function(a){var b=(0,D.Au)(a);X("formError",b),(0,A.hJ)({manualLat:h,manualLng:i,lat:l,lng:m,dropoffOptionId:c})})}},P=(0,q.useConsumerQuery)().consumer,Q=l.useContext(m.DVSClientContext),R=Q.state,S=(0,n.p)(),T=(0,v._h)(),U=(0,p.Z)(J.countryCode),V=(0,C.R)({selectedAdddressData:J,isBuzzerInputEncouraged:U,consumerLastName:P.lastName,dropoffOptions:F,dropoffPreferences:void 0===G?[]:G,driverInstructions:I}),W=V.localEditForm,X=V.updateLocalEditForm,Y=W.subpremise,Z=W.entryCode,$=W.selectedDropoffOptionId,_=W.dropoffOptionWithInstructions,aa=W.draftCoordinates,ab=W.formError,ac=(0,D.V0)(ab),ad=(0,f.Z)(l.useState(D.Gt.Edit),2),ae=ad[0],af=ad[1],ag=function(){return X("draftCoordinates",null)},ah=(0,f.Z)(l.useState(null),2),ai=ah[0],aj=ah[1],ak=function(){return aj(null)},al=M||{},am=al.hideAdjustPin,an=al.hideDropOffOptions,ao=function(a){a.nativeEvent.stopImmediatePropagation(),ag(),ak(),af(D.Gt.Edit)},ap=function(a){X("formError",""),ak(),(0,v.ng)(a,J)?(X("draftCoordinates",a),af(D.Gt.Edit)):(ag(),aj(E.ZP.t("addressPickerStrings_addressEditPinLocationError")))};return(l.useEffect(function(){(0,t.ZP)(u.wd.EditAddressPageView)},[]),ae===D.Gt.ChangePin)?(0,g.jsx)(w.Z,{address:J,onSubmit:ap,onCancel:ao,draftCoordinates:aa||(0,v.ey)(J),handleChangePinLocation:function(a){return X("draftCoordinates",a)},errorMessage:ai,hideTitle:!1,shouldStackActionButtons:!1,hideActionButtons:!1}):(0,g.jsxs)(k.StackChildren,{"data-anchor-id":s.ep.AddressEditForm,"data-testid":s.ep.AddressEditForm,children:[(0,g.jsx)(z.Z,{separatorType:j.default.Types.Separator,children:(0,g.jsx)(y.Z,{hideAdjustPin:void 0!==am&&am,isAddressLabelEnabled:!1,shortname:null!==(b=J.shortname)&&void 0!==b?b:"",printableAddress:J.printableAddress,address:J,locationOverride:aa||(0,v.ey)(J),onClickAdjustPin:function(a){a.nativeEvent.stopImmediatePropagation(),af(D.Gt.ChangePin),(0,A.mo)()},subpremise:Y})}),(0,g.jsx)(o.Z,{onClick:function(){},orderCartId:null==S?void 0:S.id}),(0,g.jsx)(i.TextField,{value:Y,size:i.TextField.Sizes.Small,onChange:function(a){return X("subpremise",a)},placeholder:U?E.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_placeholder"):E.ZP.t("addressPickerStrings_apartmentInput_placeholder"),label:U?E.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_label"):E.ZP.t("addressPickerStrings_apartmentInput_label")}),T&&"ready"===R&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(i.TextField,{value:Z,size:i.TextField.Sizes.Small,onChange:function(a){X("entryCode",a)},placeholder:E.ZP.t("addressPickerStrings_entryCode_placeholder"),label:E.ZP.t("addressPickerStrings_entryCode_label"),description:E.ZP.t("addressPickerStrings_OptionalLabel")})}),!(void 0!==an&&an)&&(0,g.jsx)(B.Z,{dropoffOptions:F,selectedDropoffOptionId:$,onDropoffOptionChange:function(a){return X("selectedDropoffOptionId",a)},instructions:(0,v.I0)(_,$),onInstructionsChange:function(a){$&&N($,a)},useNewDesign:!1}),Boolean(ac)&&(0,g.jsx)(x.Z,{children:null!=ac?ac:""}),(0,g.jsxs)(k.InlineChildren,{children:[(0,g.jsx)(h.default,{onClick:H,type:h.default.Types.Tertiary,children:E.ZP.t("addressPickerStrings_addressEditCancel")}),(0,g.jsx)(h.default,{"data-anchor-id":s.ep.AddressEditSave,onClick:O,children:E.ZP.t("addressPickerStrings_addressEditSave")})]})]})};b.Z=F},36878:function(a,b,c){var d=c(85893),e=c(24906),f=c(10071);c(67294);var g=c(4831),h=c(94251),i=c(23685),j=c(62139),k=c(91848),l={styles:c(21173).r},m=function(a){var b=a.hideAdjustPin,c=a.isAddressLabelEnabled,m=a.shortname,n=a.subpremise,o=a.printableAddress,p=a.address,q=a.locationOverride,r=a.onClickAdjustPin,s=n?"".concat(m," ").concat((0,g.Ay)(n)).trim():m;return(0,d.jsxs)(f.StackChildren,{size:c?f.StackChildren.Sizes.XSmall:f.StackChildren.Sizes.None,children:[!c&&(0,d.jsx)(f.Text,{styles:f.Text.Styles.PageTitle,"data-testid":"AddressEditHeaderTitle",children:m}),(0,d.jsx)(h.Z,{defaultAddress:p,locationOverride:q,mapOptions:c?l:void 0}),(0,d.jsxs)(f.InlineChildren,{alignItems:f.InlineChildren.Alignment.Center,justifyContent:f.InlineChildren.Justification.SpaceBetween,children:[(0,d.jsxs)(f.StackChildren,{size:c?f.StackChildren.Sizes.None:f.StackChildren.Sizes.XxxSmall,children:[(0,d.jsx)(f.Text,{styles:c?f.Text.Styles.Medium16:f.Text.Styles.ListRowTitleLarge,color:f.Text.Colors.TextPrimary,children:c?s:m}),(0,d.jsx)(f.Text,{styles:f.Text.Styles.SectionSubtext,children:(0,g.gj)(m||"",o||"")})]}),!b&&(0,d.jsx)(k.iP,{children:(0,d.jsx)(e.default,{onClick:r,type:e.default.Types.Tertiary,size:c?e.default.Sizes.Small:void 0,"data-testid":j.D.AddressEditAdjustPinButton,children:i.ZP.t("addressPickerStrings_addressEditAdjustPin")})})]})]})};b.Z=m},53103:function(a,b,c){var d=c(85893),e=c(95899);c(67294);var f=c(62139),g=function(a){var b=a.separatorType,c=void 0===b?e.default.Types.FullBorder:b,g=a.hideSeparator,h=a.children;return(0,d.jsxs)(d.Fragment,{children:[h,!(void 0!==g&&g)&&(0,d.jsx)(e.default,{"data-testid":f.D.AddressEditSectionSeparator,type:c})]})};b.Z=g},91848:function(a,b,c){c.d(b,{Bv:function(){return p},Ko:function(){return o},RY:function(){return r},Si:function(){return q},iP:function(){return n},pW:function(){return s}});var d=c(7297),e=c(10071),f=c(87379);function g(){var a=(0,d.Z)(["\n  flex: 0;\n"]);return g=function(){return a},a}function h(){var a=(0,d.Z)(["\n  width: ","px;\n  top: 80%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  position: absolute;\n"]);return h=function(){return a},a}function i(){var a=(0,d.Z)(["\n  width: auto;\n  button {\n    div {\n      padding: ",";\n    }\n  }\n"]);return i=function(){return a},a}function j(){var a=(0,d.Z)(["\n  padding-top: ","px;\n  margin-left: -","px;\n  margin-right: -","px;\n"]);return j=function(){return a},a}function k(){var a=(0,d.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  border: none;\n  background-color: inherit;\n  padding: 0;\n"]);return k=function(){return a},a}function l(){var a=(0,d.Z)([""]);return l=function(){return a},a}function m(){var a=(0,d.Z)(["\n  padding-top: ","px;\n"]);return m=function(){return a},a}var n=f.default.div.withConfig({componentId:"sc-c49e0dcc-0"})(g()),o=f.default.div.withConfig({componentId:"sc-c49e0dcc-1"})(h(),2*e.Spacing.XxxLarge),p=f.default.div.withConfig({componentId:"sc-c49e0dcc-2"})(i(),e.Spacing.None);f.default.div.withConfig({componentId:"sc-c49e0dcc-3"})(j(),e.Spacing.XxLarge,e.Spacing.Small,e.Spacing.Small);var q=f.default.button.withConfig({componentId:"sc-c49e0dcc-4"})(k()),r=(0,f.default)(e.Icon).attrs(function(){return{type:e.Icon.Types.CloseCircleFill,size:24}}).withConfig({componentId:"sc-c49e0dcc-5"})(l()),s=f.default.div.withConfig({componentId:"sc-c49e0dcc-6"})(m(),e.Spacing.XxSmall)},80763:function(a,b,c){c.d(b,{eK:function(){return q},mo:function(){return p},hJ:function(){return l},KS:function(){return k},UR:function(){return o},ZU:function(){return n}});var d=c(38237),e=c.n(d),f=function(a,b){return e()(a,b,{unit:"meter"})},g=f,h=c(3532),i=c(9633),j=function(a){return function(b){var c,d=b.manualLat,e=b.manualLng,f=b.lat,i=b.lng,j=b.dropoffOptionId;c=d&&e?g({latitude:d,longitude:e},{latitude:f,longitude:i}):0,(0,h.ZP)(a,{withCustomCoordinates:!!(d&&e),dropoff_option_id:j,pin_lat:d,pin_lng:e,original_addr_lat:f,original_addr_lng:i,distance:c})}},k=j(i.wd.SubmittedNewAddress),l=j(i.wd.SubmittedNewAddressError),m=function(a){return function(b){var c=b.addressId,d=b.manualLat,e=b.manualLng;(0,h.ZP)(a,{address_id:c,pin_lat:d,pin_lng:e})}},n=m(i.wd.SubmittedPinAdjustment),o=m(i.wd.SubmittedPinAdjustmentError),p=function(){(0,h.ZP)(i.wd.ClickedAdjustPin)},q=function(a,b){(0,h.ZP)(i.wd.ChangedEntryCode,{address_id:a,entryCodeLength:b})}},25760:function(a,b,c){c.d(b,{Z:function(){return P}});var d=c(85893),e=c(24906),f=c(63998),g=c(10071),h=c(67294),i=c(68648),j=c(51232),k=c(28766),l=c(93395),m=c(88311),n=c(20688),o=c(23685),p=c(3532),q=c(9633),r=c(22459),s=c(9205),t=c(84865),u=c(62139),v=c(24249),w=c(36878),x=c(53103),y=c(91848),z=c(80763),A=c(10253),B=c(33016),C=c(23279),D=c.n(C),E=c(80576),F=c(125),G=c(21173),H=D()(function(a){return a()},200),I=function(a){var b=a.labelName,c=a.onChange,e=a.error,i=(0,A.Z)(h.useState(),2),j=i[0],k=i[1],l=(0,A.Z)(h.useState(b),2),m=l[0],n=l[1],p=h.useRef(null),q=(0,G.Rc)(e),r=function(a){n(a),H(function(){var b=a.trim();c(b),k((0,G.Kf)(b))})};return h.useEffect(function(){(0,G.Yg)(e)&&p.current&&(0,E.Wk)(p.current,80)},[e]),(0,d.jsxs)(g.StackChildren,{size:g.StackChildren.Sizes.XSmall,children:[(0,d.jsx)("div",{ref:p,children:(0,d.jsx)(f.TextField,{value:m,size:f.TextField.Sizes.Large,label:o.ZP.t("addressPickerStrings_addressLabel_label"),onChange:r,onClick:function(){return(0,F.Jn)(m)},placeholder:o.ZP.t("addressPickerStrings_addressLabel_placeholder"),renderAfterContent:m?function(){return(0,d.jsx)(y.Si,{type:"button","aria-label":o.ZP.t("addressPickerStrings_addressLabel_clearButtonText"),onClick:function(){c(""),n(""),k(void 0)},children:(0,d.jsx)(y.RY,{type:g.Icon.Types.CloseCircleFill,size:24})})}:void 0,error:q&&e?e:j})}),(0,d.jsx)(B.ZP,{"data-testid":u.D.AddressLabelBanner,variant:B.ZP.Variants.Highlight,body:(0,d.jsx)(g.Text,{styles:g.Text.Styles.Body2,children:o.ZP.t("addressPickerStrings_addressLabel_bannerText")}),iconType:B.ZP.IconTypes.None})]})},J=c(10560),K=c(12136),L=c(26042),M=c(69396),N=c(20306),O=c(11459),P=function(a){var b,c,A,B,C,D,E,F,G,H=a.dropoffOptions,P=void 0===H?[]:H,Q=a.dropoffPreferences,R=a.driverInstructions,S=a.address,T=a.preSelectedAddressLabelName,U=a.handleRemoveAddress,V=a.defaultAddressId,W=a.hideAdjustPin,X=a.hideDropOffOptions,Y=function(a,b){var c,d,e;al("dropoffOptionWithInstructions",(c=ar,d=a,e=b,c.slice().map(function(a){return a.optionId===d?{optionId:d,instructions:e}:a})))},Z=(0,l.useConsumerQuery)().consumer,$=(0,i.p)(),_=(0,m.ac)().isMobile,aa=(0,k.Z)(S.countryCode),ab=null!==(b=(0,t.R)())&&void 0!==b?b:{},ac=ab.mode,ad=ab.setMode,ae=ab.useDraftAddressFromModal,af=ab.draftAddress,ag=ab.setDraftAddress,ah=ab.editFormError,ai=ab.setEditFormError,aj=(0,K.R)({selectedAdddressData:S,isBuzzerInputEncouraged:aa,consumerLastName:Z.lastName,dropoffOptions:P,dropoffPreferences:void 0===Q?[]:Q,driverInstructions:R,preSelectedAddressLabelName:T}),ak=aj.localEditForm,al=aj.updateLocalEditForm,am=ak.subpremise,an=ak.buildingName,ao=ak.entryCode,ap=ak.personalAddressLabelName,aq=ak.selectedDropoffOptionId,ar=ak.dropoffOptionWithInstructions,as=ak.draftCoordinates,at=!!(0,r.Uq)(S)&&V===S.id;B=(A={skip:!ae,localEditForm:ak,setDraftAddress:ag,address:S,isGiftingAddressToggled:!1}).skip,C=A.localEditForm,D=A.setDraftAddress,E=A.address,F=A.isGiftingAddressToggled,G=(0,N.Z)().isAddressLabelEnabled,(0,h.useEffect)(function(){!B&&(null==D||D(function(a){var b,c,d,e,f,g,h=G?{labelName:C.personalAddressLabelName,labelIcon:null}:null,i={subpremise:C.subpremise,buildingName:C.buildingName,entryCode:C.entryCode,dropoffOptionId:C.selectedDropoffOptionId||void 0,driverInstructions:(0,r.I0)(C.dropoffOptionWithInstructions,C.selectedDropoffOptionId),addressLinkType:F?O.z5.ADDRESS_LINK_TYPE_GIFT:O.z5.ADDRESS_LINK_TYPE_UNSPECIFIED,personalAddressLabel:h,isGiftingAddressToggled:F,draftCoordinates:C.draftCoordinates,googlePlaceId:(0,r.aN)(E)?E.googlePlaceId:"",id:(0,r.aN)(E)?"":E.id,addressId:""};return a?(0,L.Z)({},E,a,i):(0,M.Z)((0,L.Z)({},E,i),{city:null!==(b=E.city)&&void 0!==b?b:"",state:null!==(c=E.state)&&void 0!==c?c:"",lat:E.lat,lng:E.lng,street:null!==(d=E.street)&&void 0!==d?d:"",shortname:null!==(e=E.shortname)&&void 0!==e?e:"",printableAddress:null!==(f=E.printableAddress)&&void 0!==f?f:"",zipCode:null!==(g=E.zipCode)&&void 0!==g?g:""})}))},[C,B,F,D,G,E,]);var au=h.useCallback(function(a){return al("personalAddressLabelName",a)},[al]);return(h.useEffect(function(){(0,p.ZP)(q.wd.EditAddressPageView)},[]),ac===v.A.Default)?null:ac===v.A.ChangePin?(0,d.jsx)(s.Z,{address:S,draftCoordinates:as||(0,r.ey)(S),handleChangePinLocation:function(a){return al("draftCoordinates",a)},errorMessage:null,hideTitle:!0,shouldStackActionButtons:_,hideActionButtons:!0}):(0,d.jsxs)(g.StackChildren,{"data-anchor-id":n.ep.AddressEditForm,"data-testid":u.D.AddressEditForm,children:[(0,d.jsx)(g.StackChildren,{size:g.StackChildren.Sizes.XSmall,children:(0,d.jsx)(x.Z,{children:(0,d.jsx)(w.Z,{hideAdjustPin:void 0!==W&&W,isAddressLabelEnabled:!0,shortname:null!==(c=S.shortname)&&void 0!==c?c:"",printableAddress:S.printableAddress,address:S,locationOverride:(null==af?void 0:af.draftCoordinates)||(0,r.ey)(S),onClickAdjustPin:function(a){a.nativeEvent.stopImmediatePropagation(),null==ai||ai(null),null==ad||ad(v.A.ChangePin),(0,z.mo)()},subpremise:am})})}),(0,d.jsxs)(x.Z,{children:[(0,d.jsx)(j.Z,{onClick:function(){},orderCartId:null==$?void 0:$.id}),(0,d.jsxs)(g.InlineChildren,{children:[(0,d.jsx)(f.TextField,{value:am,size:f.TextField.Sizes.Small,onChange:function(a){return al("subpremise",a)},label:aa?o.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_label"):o.ZP.t("addressPickerStrings_apartmentInput_labelV2")}),(0,d.jsx)(f.TextField,{value:ao,size:f.TextField.Sizes.Small,onChange:function(a){al("entryCode",a)},label:o.ZP.t("addressPickerStrings_entryCode_label")})]}),(0,d.jsx)(f.TextField,{value:an,size:f.TextField.Sizes.Small,onChange:function(a){al("buildingName",a)},label:o.ZP.t("addressPickerStrings_buildingName_label")}),!(void 0!==X&&X)&&(0,d.jsx)(J.Z,{dropoffOptions:P,selectedDropoffOptionId:aq,onDropoffOptionChange:function(a){return al("selectedDropoffOptionId",a)},instructions:(0,r.I0)(ar,aq),onInstructionsChange:function(a){aq&&Y(aq,a)},useNewDesign:!0})]}),!Z.isGuest&&(0,d.jsx)(x.Z,{hideSeparator:at,children:(0,d.jsx)(I,{labelName:ap,onChange:au,error:null!=ah?ah:null})}),!at&&(0,r.Uq)(S)&&(0,d.jsx)(x.Z,{hideSeparator:!0,children:(0,d.jsx)(y.pW,{"data-testid":u.D.AddressEditRemoveButton,children:(0,d.jsx)(e.default,{type:e.default.Types.Destructive,size:e.default.Sizes.Small,isInline:!0,leadingIcon:g.Icon.Types.TrashLine,onClick:function(){return U((0,r.Uq)(S)?S.id:"")},children:o.ZP.t("address_remove_address")})})}),(0,d.jsx)(g.Stack,{size:_?g.Stack.Sizes.XxxLarge:g.Stack.Sizes.XxLarge})]})}},10560:function(a,b,c){var d=c(85893),e=c(24906),f=c(63998),g=c(97073),h=c(10071);c(67294);var i=c(20688),j=c(78259),k=c(23685),l=function(a){var b=a.dropoffOptions,c=a.selectedDropoffOptionId,l=a.onDropoffOptionChange,m=a.instructions,n=a.onInstructionsChange,o=a.useNewDesign,p=function(a){return null!==c?(0,d.jsx)(f.TextField,{value:m,size:f.TextField.Sizes.Medium,onChange:n,isMultiline:a,isResizeable:!0,placeholder:(0,j.sQ)(b,c||""),label:(0,j.sQ)(b,c||""),isLabelHidden:!0,"data-testid":i.ep.AddressEditDropoffInstructions}):null};return o?(0,d.jsxs)(h.StackChildren,{size:h.StackChildren.Sizes.XSmall,children:[(0,d.jsx)(h.Text,{styles:h.Text.Styles.FieldSmallLabel,children:k.ZP.t("addressPickerStrings_dropOffOptionsSentenceCase")}),(0,d.jsx)(h.InlineChildren,{size:h.InlineChildren.Sizes.XxSmall,children:b.map(function(a){return(0,d.jsx)(e.default,{type:e.default.Types.SecondaryPill,size:e.default.Sizes.Small,isDisabled:!a.isEnabled,isToggled:a.id===c,isToggleable:!0,isInline:!0,onClick:function(){return l(a.id)},"data-testid":i.ep.AddressEditDropoffOption,children:a.displayString},a.id)})}),p(3)]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(h.StackChildren,{"data-testid":i.ep.AddressEditDropoffSelection,children:[(0,d.jsx)(h.Text,{styles:h.Text.Styles.Bold14,children:k.ZP.t("addressPickerStrings_dropOffOptions")}),b.map(function(a){return(0,d.jsxs)(h.StackChildren,{size:h.Stack.Sizes.XSmall,children:[(0,d.jsx)(g.ZP,{label:a.displayString,name:"dropoff-type",isDisabled:!a.isEnabled,isSelected:a.id===c,type:g.ZP.Types.Radio,onChange:function(){l(a.id)},"data-testid":i.ep.AddressEditDropoffOption}),!a.isEnabled&&a.disabledMessage&&(0,d.jsx)(h.Text,{styles:h.Text.Styles.SectionSubtext,color:h.Text.Colors.TextPrimary,children:a.disabledMessage})]},a.id)})]}),p(2)]})};b.Z=l},12136:function(a,b,c){c.d(b,{R:function(){return i}});var d=c(14924),e=c(26042),f=c(69396),g=c(67294),h=c(78259);function i(a){var b,c,i,j,k,l,m,n,o,p,q=a.selectedAdddressData,r=a.isBuzzerInputEncouraged,s=a.consumerLastName,t=a.dropoffOptions,u=a.dropoffPreferences,v=a.driverInstructions,w=a.preSelectedAddressLabelName,x=(0,g.useState)((j=(b={selectedAdddressData:q,isBuzzerInputEncouraged:r,consumerLastName:s,dropoffOptions:t,dropoffPreferences:u,driverInstructions:v,preSelectedAddressLabelName:w}).selectedAdddressData,k=b.isBuzzerInputEncouraged,l=b.consumerLastName,m=b.dropoffOptions,n=b.dropoffPreferences,o=b.driverInstructions,p=b.preSelectedAddressLabelName,{subpremise:(k?l:null==j?void 0:j.subpremise)||"",buildingName:(null==j?void 0:j.buildingName)||"",entryCode:(null==j?void 0:j.entryCode)||"",personalAddressLabelName:null!==(i=null!=p?p:null==j?void 0:null===(c=j.personalAddressLabel)||void 0===c?void 0:c.labelName)&&void 0!==i?i:"",selectedDropoffOptionId:(0,h.xy)(n,m),dropoffOptionWithInstructions:(0,h.MG)(n,m,o),draftCoordinates:null,formError:null})),y=x[0],z=x[1],A=(0,g.useCallback)(function(a,b){z(function(c){return(0,f.Z)((0,e.Z)({},c),(0,d.Z)({},a,b))})},[]);return(0,g.useMemo)(function(){return{localEditForm:y,updateLocalEditForm:A}},[y,A])}},21173:function(a,b,c){c.d(b,{Au:function(){return m},Gt:function(){return d},Kf:function(){return n},Rc:function(){return j},V0:function(){return l},Yg:function(){return k},r:function(){return h}});var d,e,f=c(51112),g=c(23685);(e=d||(d={})).ChangePin="ChangePin",e.Edit="Edit";var h=[{featureType:"poi",elementType:"all",stylers:[{visibility:"off"},]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"},]},],i=["This label is already in use"],j=function(a){return Boolean(a&&i.includes(a))},k=function(a){return null==a?void 0:a.includes("value too long for type character varying(28)")},l=function(a){return j(a)?null:a},m=function(a){var b=(0,f.ie)(a);return(null==b?void 0:b.message)||g.ZP.t("addressPickerStrings_addressEditSaveNewError")},n=function(a){return 0===a.length?g.ZP.t("addressPickerStrings_addressLabel_minCharacterError"):a.length>28?g.ZP.t("addressPickerStrings_addressLabel_maxCharacterError"):void 0}},66763:function(a,b,c){c.d(b,{Z:function(){return p}});var d=c(51438),e=c(28668),f=c(26042),g=c(69396),h=c(71418),i=c(85893),j=c(67294),k=c(48837),l=c(61449),m=c(3532),n=c(44928),o=c(23685),p=function(a){(0,e.Z)(c,a);var b=(0,h.Z)(c);function c(){var a;return(0,d.Z)(this,c),a=b.apply(this,arguments),a.state={pendingAddressText:a.props.value||"",errorText:"",loadedGoogleMaps:!1},a.handleChange=function(b){""!==a.state.errorText&&a.setState({errorText:""}),a.props.onChange(b)},a.handleSelect=function(b,c){c&&(0,n.N2)(c,b).then(a.props.onSelect)},a.handleError=function(){a.setState({errorText:o.ZP.t("addressPickerStrings_defaultNoMatchErrorMessage")})},a.handleEnterKey=function(b){return function(c){if("Enter"===c.key&&b.length>0){var d=b.find(function(a){return a.active}),e=d||b[0];d||a.handleSelect(b[0].description,b[0].placeId),(0,m.ZP)("home_page_address_input_enter",{description:e.description}),l.I$(e)}}},a.getInputPropsOptions=function(b){return{onKeyDown:a.handleEnterKey(b)}},a}var j=c.prototype;return j.componentDidMount=function(){var a=this;this.loadedGoogleMapsInterval=setInterval(function(){return a.checkLoadedGoogleMaps()},100),this.checkLoadedGoogleMaps()},j.componentWillUnmount=function(){clearInterval(this.loadedGoogleMapsInterval)},j.componentDidUpdate=function(a,b){if(!b.loadedGoogleMaps&&this.state.loadedGoogleMaps){var c,d;null===(d=(c=this.props).onGoogleMapsLoaded)||void 0===d||d.call(c)}},j.checkLoadedGoogleMaps=function(){var a,b,c=!!(null==window?void 0:null===(a=window.google)||void 0===a?void 0:null===(b=a.maps)||void 0===b?void 0:b.places);c&&(this.setState({loadedGoogleMaps:c}),clearInterval(this.loadedGoogleMapsInterval),this.handleChange(this.state.pendingAddressText))},j.render=function(){var a=this,b=this.props,c=b.value,d=b.children,e=this.state,h=e.errorText,j=e.loadedGoogleMaps,l=e.pendingAddressText,n=c.length>=3,o=n&&h.length>0;if(o&&(0,m.ZP)("enter_address_empty_search_results",{query:c}),!j){var p={value:l,onBlur:function(){},onChange:function(b){return a.setState({pendingAddressText:b.target.value})},onKeyDown:function(){}};return d(p,[],"")}return(0,i.jsx)(k.default,{value:c,onChange:this.handleChange,onSelect:this.handleSelect,onError:this.handleError,children:function(b){var c=b.suggestions.map(function(a){return(0,g.Z)((0,f.Z)({},a),{props:b.getSuggestionItemProps(a)})}),e=b.getInputProps((0,f.Z)({},a.getInputPropsOptions(c)));return d(e,c,h)}})},c}(j.Component)},5119:function(a,b,c){c.d(b,{Z:function(){return aO}});var d,e=c(85893),f=c(54425),g=c(67294),h=c(26042),i=c(69396),j=c(10253),k=c(1968),l=c(91152),m=c(95899),n=c(10071),o=c(70573),p=c(10045),q=c(6466),r=c(86718),s=c(39693),t=c.n(s),u=c(47715),v=c(94533),w=c(3406),x=c(20306),y=c(64995),z=c(61449),A=c(23685),B=c(3532),C=c(28023),D=c(8869),E=c(25760),F=c(24906),G=c(31280),H=c(20688),I=c(4831),J=c(9633),K=c(22459),L=c(62139),M=c(7297),N=c(87379),O=c(95779);function P(){var a=(0,M.Z)(["\n  > div {\n    background-color: transparent;\n\n    :hover {\n      background-color: ",";\n    }\n  }\n"]);return P=function(){return a},a}var Q=N.default.div.withConfig({componentId:"sc-77829cde-0"})(P(),function(a){return a.isSelected?n.Colors.SystemRed20:n.Colors.BackgroundTertiary}),R=function(a){var b=a.addressId,c=a.addressShortName,d=a.centered,f=a.size,g=a.useCustomTheme,h=a.isSelected,i=a.handleClick,j=function(){return(0,e.jsx)(F.IconButton,{"data-anchor-id":H.ep.AddressEditIcon,"data-testid":H.ep.AddressEditIcon,accessibilityLabel:A.ZP.t("addressPickerStrings_editAddressAriaLabel",{streetAddress:c}),onClick:function(a){a.stopPropagation(),a.nativeEvent.stopImmediatePropagation(),i(b)},iconType:F.IconButton.IconTypes.EditLine,tag:"div",size:null!=f?f:void 0})},k=function(){return g?(0,e.jsx)(Q,{isSelected:h,children:j()}):j()};return d?(0,e.jsx)(O.A7,{children:k()}):k()},S=function(a){var b=a.addressId,c=a.addressShortName,d=a.handleClick;return(0,e.jsx)(F.IconButton,{"data-anchor-id":H.ep.AddressDeleteIcon,"data-testid":H.ep.AddressDeleteIcon,accessibilityLabel:A.ZP.t("addressPickerStrings_removeAddressAriaLabel",{streetAddress:c}),onClick:function(a){a.stopPropagation(),d(b)},iconType:F.IconButton.IconTypes.Close,tag:"div"})},T=function(a){var b=a.isSelected,c=a.isAddressLabelEnabled,d=a.personalAddressLabel;return c?(0,K.at)(null==d?void 0:d.labelIcon,b):b?G.ZP.IconTypes.RadioOnCircleFill:G.ZP.IconTypes.RadioOffCircleLine},U=function(a){var b,c=a.availableAddresses,d=a.defaultAddressId,f=a.onEdit,h=a.onSelect,i=a.onRemove,j=a.isLiteGuest,k=a.isAddressLabelEnabled,l=a.isCurrentLocationSelected;g.useEffect(function(){(0,B.ZP)(J.wd.EnterAddressPageView)},[]);var m=null!==(b=null==c?void 0:c.filter(v.K))&&void 0!==b?b:[];return(0,e.jsx)("div",{role:"radiogroup","data-anchor-id":H.ep.AddressList,children:m.map(function(a,b){var c,g=a.shortname||"",o="".concat(a.shortname," ").concat((0,I.Ay)(a.subpremise)).trim(),p=!l&&a.id===d,q=null!==(c=a.personalAddressLabel)&&void 0!==c?c:null,r=k&&(null==q?void 0:q.labelName),s=function(){var b=r?a.printableAddress:(0,I.gj)(g,a.printableAddress||"");return k?(0,e.jsx)(n.Text,{styles:n.Text.Styles.Caption1,color:p?n.Text.Colors.CurrentColor:n.Text.Colors.TextSecondary,children:b}):b},t=function(){if(j)return null;var b=k?F.IconButton.Sizes.Small:null;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R,{addressId:a.id,addressShortName:g,handleClick:f,centered:k,size:b,useCustomTheme:k,isSelected:p}),!k&&!p&&(0,e.jsx)(S,{addressId:a.id,addressShortName:g,handleClick:i})]})},u=function(){return(0,e.jsx)("div",{children:(0,e.jsx)(G.ZP,{"data-anchor-id":H.ep.AddressListItem,"data-testid":L.D.AddressListItem,size:G.ZP.Sizes.Small,insetVerticalSize:k?G.ZP.InsetSizes.XSmall:G.ZP.InsetSizes.Small,accessibilityRole:"radio",iconStart:{isInteractive:!1,type:T({isSelected:p,isAddressLabelEnabled:k,personalAddressLabel:q})},isToggleable:!0,isToggled:p,onClick:function(){h(a.id),z.AR(d),(0,B.ZP)("m_update_user_default_address_job_success",{address_id:a.id})},title:r?q.labelName:o,subtext:s(),renderAfterContent:t,isSeparatorVisible:!k||b!==m.length-1})},a.id)};return k&&p?(0,e.jsx)(n.Theming,{overrides:{Colors:{ListCellContainerBackgroundDefault:n.Colors.SystemRed0,ListCellContainerBackgroundHovered:n.Colors.SystemRed5,ListCellContainerBackgroundPressed:n.Colors.SystemRed20}},children:u()}):u()})})},V=c(88311),W=function(a){var b=a.availableAddressesWithoutLabel,c=a.onClick,d=(0,j.Z)(g.useState(-1),2),f=d[0],h=d[1],i=(0,V.ac)().isMobile;return(0,e.jsx)(e.Fragment,{children:b.map(function(a,d){var g,j="".concat(a.shortname," ").concat((0,I.Ay)(a.subpremise)).trim();return(0,e.jsx)("div",{onMouseEnter:function(){return h(d)},onMouseLeave:function(){return h(-1)},children:(0,e.jsx)(G.ZP,{"data-anchor-id":H.ep.AddressListSetLabelItem,"data-testid":H.ep.AddressListSetLabelItem,size:G.ZP.Sizes.Small,insetVerticalSize:G.ZP.InsetSizes.XSmall,accessibilityRole:"radio",iconStart:{isInteractive:!1,type:G.ZP.IconTypes.LocationPinEnabledLine},isToggleable:!0,onClick:function(){null==c||c(a.id)},title:j,subtext:(0,I.gj)(a.shortname||"",a.printableAddress||""),iconEnd:f===d||i?{isInteractive:!1,type:G.ZP.IconTypes.ChevronRight,size:18}:void 0,isSeparatorVisible:d!==b.length-1})},null!==(g=a.id)&&void 0!==g?g:a.shortname)})})},X=function(a){var b=a.isSelected,c=a.onClick,d=a.isAddressLabelEnabled,f=(0,e.jsx)(G.ZP,{size:G.ZP.Sizes.Small,accessibilityRole:"radio",iconStart:{isInteractive:!1,type:d?b?G.ZP.IconTypes.LocationPointerFill:G.ZP.IconTypes.LocationPointerLine:b?G.ZP.IconTypes.RadioOnCircleFill:G.ZP.IconTypes.RadioOffCircleLine},isToggleable:!0,isToggled:b,onClick:c,title:A.ZP.t("layoutStrings_header_currentLocation"),"data-testid":"CurrentLocationListCell"});return d&&b?(0,e.jsx)(n.Theming,{overrides:{Colors:{ListCellContainerBackgroundDefault:n.Colors.SystemBlue5,ListCellContainerBackgroundHovered:n.Colors.SystemBlue10,ListCellContainerBackgroundPressed:n.Colors.SystemBlue30,ListCellIconToggledOn:n.Colors.SystemBlue70,TextSelected:n.Colors.TextPrimary}},children:f}):f},Y=c(95505),Z=c(11459),$=[{type:Z.jE.LABEL,labelIcon:Z.dQ.LABEL_ICON_TYPE_HOME,labelName:"Home",address:null,__typename:"LabeledAddress"},{type:Z.jE.LABEL,labelIcon:Z.dQ.LABEL_ICON_TYPE_WORK,labelName:"Work",address:null,__typename:"LabeledAddress"},{type:Z.jE.PLUS,labelIcon:Z.dQ.LABEL_ICON_TYPE_UNSPECIFIED,labelName:"",address:null,__typename:"LabeledAddress"},],_=[{type:Z.jE.LABEL,labelIcon:Z.dQ.LABEL_ICON_TYPE_HOME,labelName:"Home",address:null,__typename:"LabeledAddress"},{type:Z.jE.LABEL,labelIcon:Z.dQ.LABEL_ICON_TYPE_WORK,labelName:"Work",address:{id:"0",street:"123 Doordash Street",city:"Century City",subpremise:"301",state:"CA",zipCode:"90067",lat:34.0626910316,lng:-118.4142864312,manualLat:null,manualLng:null,shortname:"123 Doordash Street",printableAddress:"123 Doordash Street, Century City, CA 90067, USA",driverInstructions:"",dropoffPreferences:{allPreferences:[{optionId:"1",isDefault:!1,instructions:"",__typename:"DropoffPreference"},{optionId:"2",isDefault:!0,instructions:"",__typename:"DropoffPreference"},],__typename:"DropoffPreferences"},__typename:"DefaultAddress"},__typename:"LabeledAddress"},{type:Z.jE.PLUS,labelIcon:Z.dQ.LABEL_ICON_TYPE_UNSPECIFIED,labelName:"",address:null,__typename:"LabeledAddress"},],aa=c(12691),ab="mockLabeledAddresses",ac=function(a){var b,c=a.labeledAddresses,d=a.onClick,f=(0,aa.tv)().query,g=f[ab]?"unset"===(b=String(f[ab]).toLowerCase())?$:"partial"===b?_:null:null,h=(g||c).filter(function(a){return a.type!==Z.jE.PLUS&&null==a.address});return 0===h.length?null:(0,e.jsx)(O.Kk,{children:h.map(function(a,b){var c,f,g,h;return(0,e.jsx)(G.ZP,{insetVerticalSize:G.ZP.InsetSizes.XSmall,size:G.ZP.Sizes.Small,iconStart:{isInteractive:!1,type:(0,K.at)(a.labelIcon,!1)},isToggleable:!0,title:a.labelName,subtext:(0,e.jsx)(n.Text,{styles:n.Text.Styles.Caption1,color:n.Text.Colors.TextSecondary,children:A.ZP.t("addressPickerStrings_setAddress")}),iconAlignment:G.ZP.Alignment.Center,onClick:function(){var b,e;return d({addressId:null!==(c=null===(b=a.address)||void 0===b?void 0:b.id)&&void 0!==c?c:"",shortname:null!==(f=null===(e=a.address)||void 0===e?void 0:e.shortname)&&void 0!==f?f:void 0,labelName:null!==(g=a.labelName)&&void 0!==g?g:void 0,labelIcon:null!==(h=a.labelIcon)&&void 0!==h?h:void 0})},renderAfterContent:function(){return(0,e.jsx)(O.Wk,{children:(0,e.jsx)(F.IconButton,{iconType:F.IconButton.IconTypes.Add,type:F.IconButton.Types.Tertiary,accessibilityLabel:A.ZP.t("addressPickerStrings_addresses"),size:F.IconButton.Sizes.Small})})}},"".concat(a.labelName,"-").concat(b))})})},ad=c(84865),ae=c(53982),af=c(125),ag=c(24249),ah=function(a){var b=a.addressEntryPoint,c=a.onAddAddress,d=a.availableAddresses,f=a.labeledAddresses,r=a.onUpdateAddress,s=a.onSelectAddress,F=a.dropoffOptions,G=a.loading,H=a.addressAutocompleteLabel,I=a.isStaticPositionSuggestions,L=a.hideAddressList,M=a.defaultAddressId,N=a.onRemoveAddress,P=a.isLiteGuest,Q=a.isGuest,R=a.renderBeforeAddressList,S=a.customizations,T=a.renderFooterActions,V=void 0===T?function(){return null}:T,Z=a.defaultAddress,$=a.handleIdentityLinkClick,_=a.placeholder,aa=a.showIdentityLink,ab=void 0===aa||aa,ah=a.setIsEditTitle,ai=a.setSelectedAddress,aj=a.selectedAddressLabelName,ak=a.isCurrentLocationEnabled,al=a.isCurrentLocationSelected,am=a.onClickCurrentLocation,an=a.refetchQueries,ao=a.onSetLabelForAddressComplete,ap=(0,x.Z)().isAddressLabelEnabled,aq=(0,o.useDVSBoolean)(u.PR.cxWebSignInBtn,!1),ar="".concat(b,"/AddressPicker"),as=(0,j.Z)(g.useState(),2),at=as[0],au=as[1],av=(0,j.Z)(g.useState(ag.A.Default),2),aw=av[0],ax=av[1],ay=null!==(aW=(0,ad.R)())&&void 0!==aW?aW:{},az=ay.mode,aA=ay.setMode,aB=az||aw,aC=aA||ax,aD=S||{},aE=aD.renderAddressEditFormInModal,aF=void 0!==aE&&aE,aG=aD.editFormModalTitle,aH=void 0===aG?A.ZP.t("addressPickerStrings_changeAddress"):aG,aI=aD.renderAutocompleteSuggestionsInAnchoredLayer,aJ=aD.hideAutoCompleteLabel,aK=aD.renderOnDarkBackground,aL=aD.disableAddressValidation,aM=void 0!==aL&&aL,aN=((null==d?void 0:d.length)||0)>0,aO=(null!=d?d:[]).filter(v.K).filter(function(a){var b;return!(null===(b=a.personalAddressLabel)||void 0===b?void 0:b.labelName)}),aP=function(a,b){au(a),aC(b),null==ah||ah(b===ag.A.Edit),(0,Y.zj)(),z.Qh(ar)},aQ=function(a){null==a||a.nativeEvent.stopImmediatePropagation(),au(void 0),aC(ag.A.Default),null==ah||ah(!1)},aR=function(a){var b=a.subpremise,d=a.driverInstructions,e=a.dropoffOptionId,f=a.manualLat,g=a.manualLng,j=a.addressLinkType,k=a.buildingName,l=a.entryCode,m=a.personalAddressLabel;if(at&&!(0,K.Uq)(at))return c((0,i.Z)((0,h.Z)({},at),{subpremise:b,driverInstructions:d,dropoffOptionId:e,manualLat:f,manualLng:g,addressLinkType:j,buildingName:k,entryCode:l,personalAddressLabel:m}))},aS=function(a,b){var c,e,f,g=t()(d).find(function(b){return a===b.id});au(g),aC(ag.A.Edit),(0,Y.gC)(),null==ah||ah(!0),null==ai||ai({addressId:a,shortname:null!==(e=null==g?void 0:g.shortname)&&void 0!==e?e:void 0,labelName:null!==(f=null!=b?b:null==g?void 0:null===(c=g.personalAddressLabel)||void 0===c?void 0:c.labelName)&&void 0!==f?f:void 0})},aT=function(a){var b=a.subpremise,c=a.driverInstructions,d=a.dropoffOptionId,e=a.addressId,f=a.manualLat,g=a.manualLng,h=a.addressLinkType,i=a.buildingName,j=a.entryCode,k=a.personalAddressLabel;return r({subpremise:b,driverInstructions:c,dropoffOptionId:d,addressId:e,manualLat:f,manualLng:g,addressLinkType:h,buildingName:i,entryCode:j,personalAddressLabel:k}).then(function(a){var b;aC(ag.A.Default),null==ah||ah(!1),(0,Y.Hz)({addressId:e,dropoffOptionId:d,manualLat:f,manualLng:g,addressEntryPoint:ar,addressToUpdate:Z,editResponse:null==a?void 0:null===(b=a.data)||void 0===b?void 0:b.editConsumerAddress})}).catch(function(a){throw(0,Y.a5)({addressId:e,dropoffOptionId:d,manualLat:f,manualLng:g,addressEntryPoint:ar,addressToUpdate:Z,editResponse:null}),a})},aU=function(a){var b,c,e=null==d?void 0:d.find(function(b){return(null==b?void 0:b.id)===a});if(e){var f=e.subpremise,g=e.dropoffPreferences,h=e.id,i=e.manualLat,j=e.manualLng,k=e.addressLinkType,l=e.buildingName,m=e.entryCode,n=g.allPreferences.find(function(a){return a.isDefault});null===(b=aT({addressId:h,subpremise:f,driverInstructions:null!==(c=null==n?void 0:n.instructions)&&void 0!==c?c:null,dropoffOptionId:null==n?void 0:n.optionId,manualLat:null!=i?i:void 0,manualLng:null!=j?j:void 0,addressLinkType:k,entryCode:null!=m?m:void 0,buildingName:null!=l?l:void 0,personalAddressLabel:{labelName:aj}}))||void 0===b||b.then(function(){null==ao||ao()})}},aV=function(a){a?N(a):p.eN({level:q.z.Warning,message:"Trying to remove an address without id"})};if((aB===ag.A.Edit||aB===ag.A.ChangePin)&&at){if(ap&&at){var aW,aX,aY=(0,K.Uq)(at)?at.dropoffPreferences.allPreferences:[];return aF?(0,e.jsx)(ae.Z,{addressEntryPoint:ar,title:aH,address:at,defaultAddressId:(0,K.aN)(at)?"":at.id,dropoffOptions:F,driverInstructions:null!==(aX=at.driverInstructions)&&void 0!==aX?aX:void 0,dropoffPreferences:aY,onClose:aQ,customizations:S,refetchQueries:an}):(0,e.jsx)(l.default,{isVisible:G,type:l.default.Types.Loading,children:(0,e.jsx)(n.Inset,{children:(0,e.jsx)(y.n,{address:(0,K.Uq)(at)?at:void 0,googlePlaceId:(0,K.Uq)(at)?void 0:at.googlePlaceId,children:(0,e.jsx)(E.Z,{dropoffOptions:F,handleRemoveAddress:aV,preSelectedAddressLabelName:null!=aj?aj:void 0,dropoffPreferences:aY,address:at,defaultAddressId:M,hideAdjustPin:null==S?void 0:S.hideAdjustPin,hideDropOffOptions:null==S?void 0:S.hideDropOffOptions})})})})}var aZ=(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(l.default,{isVisible:G,type:l.default.Types.Loading,children:(0,e.jsx)(n.Inset,{children:(0,e.jsx)(y.n,{address:(0,K.Uq)(at)?at:void 0,googlePlaceId:(0,K.Uq)(at)?void 0:at.googlePlaceId,children:(0,e.jsx)(D.Z,{onCancel:aQ,dropoffOptions:F,handleSubmitNewAddress:aR,handleSubmitEditAddress:aT,dropoffPreferences:(0,K.Uq)(at)?at.dropoffPreferences.allPreferences:[],address:at,customizations:S})})})})});return aF?(0,e.jsx)(k.Modal,{onClose:aQ,title:aH,children:(0,e.jsx)(O.oh,{children:aZ})}):aZ}return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(l.default,{isVisible:G,type:l.default.Types.Loading,children:[ap&&(0,e.jsx)(n.Stack,{size:n.Stack.Sizes.XxSmall}),(0,e.jsx)(n.Inset,{isSquished:ap,children:(0,e.jsxs)(n.StackChildren,{children:[(0,e.jsx)(C.Z,{label:null!=H?H:ap?"":A.ZP.t("addressPickerStrings_defaultAutocompleteLabel"),isLabelHidden:aJ,initialInputValue:"",isStaticPositionSuggestions:I,onSelect:function(a){var b;return aM?(aP(b=a,ag.A.Default),c((0,h.Z)({},b)).then(function(){(0,B.ZP)(J.wd.AddressSelectionWithoutValidation,(0,h.Z)({},b))}).catch(function(){(0,B.ZP)(J.wd.SubmittedNewAddressError,(0,h.Z)({},b))})):aP(a,ag.A.Edit)},renderSuggestionsInAnchoredLayer:void 0!==aI&&aI,placeholder:_,isRounded:ap}),ab&&(0,e.jsx)(w.Jk,{isSignInBtnEnabled:aq,isGuest:Q,handleIdentityLinkClick:$,entry:w.KP.APP,isDarkBackground:void 0!==aK&&aK,isAddressLabelEnabled:ap})]})}),ap&&!Q&&aB===ag.A.Default&&(0,e.jsx)(ac,{labeledAddresses:f,onClick:function(a){var c=a.addressId,d=a.labelName,e=a.labelIcon,f=a.shortname;(0,af.Ur)(b.toLowerCase().includes("checkout")?J.kS.Checkout:J.kS.AddressPicker,d,e),aC(ag.A.SetLabel),null==ai||ai({addressId:c,labelName:d,shortname:f,isFromLabeledAddress:!0})}}),!L&&(0,e.jsxs)(e.Fragment,{children:[aN&&!ap&&(0,e.jsx)(m.default,{}),null==R?void 0:R(),(0,K.T8)({mode:aB,availableAddresses:d,isAddressLabelEnabled:ap})&&(0,e.jsx)(O.UI,{hasMarginTop:ab,children:A.ZP.t("addressPickerStrings_recent")}),ak&&aB===ag.A.Default&&(0,e.jsx)(X,{isAddressLabelEnabled:ap,isSelected:al,onClick:am}),aB===ag.A.SetLabel&&ap?(0,e.jsx)(W,{availableAddressesWithoutLabel:aO,onClick:aU}):(0,e.jsx)(U,{availableAddresses:d,defaultAddressId:M,onEdit:aS,onSelect:s,onRemove:N,isLiteGuest:P,isAddressLabelEnabled:ap,isCurrentLocationSelected:al})]}),!V()&&(0,e.jsx)(n.Stack,{size:ap?n.Stack.Sizes.Small:n.Stack.Sizes.None}),V()]})})},ai=r.zH(ah,{name:"AddressPicker"}),aj=c(79585),ak=c(63998),al=c(20343),am=c(78230);function an(){var a=(0,M.Z)(["\n  background-color: ",";\n"]);return an=function(){return a},a}function ao(){var a=(0,M.Z)(["\n  background-color: ",";\n"]);return ao=function(){return a},a}var ap,aq=(0,n.withTheming)((0,N.default)(n.Inset).attrs(function(){return{size:n.Inset.Sizes.Small}}).withConfig({componentId:"sc-8fdd017a-0"})(an(),function(a){return a.theme.Colors.FieldsBackgroundError})),ar=(0,n.withTheming)((0,N.default)(n.Inset).attrs(function(){return{size:n.Inset.Sizes.Small}}).withConfig({componentId:"sc-8fdd017a-1"})(ao(),function(a){return a.theme.Colors.BannerWarningBackground})),as=c(33398),at=function(a){return(0,e.jsx)(as.Z,{overrides:{Colors:{ButtonPrimaryBackground:"SystemWhite",ButtonPrimaryBackgroundHovered:n.Colors.BackgroundSecondary,ButtonPrimaryBackgroundPressed:"SystemWhite",ButtonPrimaryForeground:"SystemBlack"}},children:(0,e.jsx)(F.default,(0,i.Z)((0,h.Z)({},a),{children:a.children}))})},au=function(a){var b=a.isExistingAddress,c=a.isSubpremisePresent;return(0,B.ZP)("new_fulfillment_flow_next_click",{is_existing_address:b,is_subpremise_present:c})},av=function(a){(0,B.ZP)("new_fulfillment_flow_add_new_address",{is_redirecting_to_closer_store:a})},aw=function(){g.useEffect(function(){(0,B.ZP)("new_fulfillment_flow_out_of_range")},[]);var a=(0,j.Z)(g.useState(!1),2),b=a[0],c=a[1];return b?((0,B.ZP)("new_fulfillment_flow_redirect_to_pickup_from_out_of_range"),(0,e.jsx)(am.K,{landOnPickup:b})):(0,e.jsx)(aq,{children:(0,e.jsxs)(n.InlineChildren,{size:n.InlineChildren.Sizes.Small,justifyContent:n.InlineChildren.Justification.SpaceBetween,children:[(0,e.jsx)(n.Icon,{type:n.Icon.Types.ErrorFill,color:n.Icon.Colors.BannerNegativeIcon,accessibilityLabel:A.ZP.t("addressPickerStrings_accessibilityErrorIconLabel")}),(0,e.jsxs)(n.StackChildren,{size:n.StackChildren.Sizes.XxSmall,children:[(0,e.jsx)(n.Text,{styles:n.Text.Styles.Medium18,children:A.ZP.t("addressPickerStrings_addressOutOfRangeHeading")}),(0,e.jsx)(n.Text,{styles:n.Text.Styles.Medium14,children:A.ZP.t("addressPickerStrings_addressOutOfRangeBannerText")}),(0,e.jsx)(at,{isInline:!0,isRaised:!0,onClick:function(){return c(!0)},children:(0,e.jsx)(n.Text,{styles:n.Text.Styles.Bold14,color:n.Colors.TextPrimary,children:A.ZP.t("addressPickerStrings_addressOutOfRangeButton")})})]})]})})},ax=c(93146),ay=function(){return g.useEffect(function(){(0,B.ZP)("new_fulfillment_flow_switch_and_save_banner_load")},[]),(0,e.jsx)(ar,{children:(0,e.jsxs)(n.InlineChildren,{size:n.InlineChildren.Sizes.Small,justifyContent:n.InlineChildren.Justification.SpaceBetween,children:[(0,e.jsx)(n.Icon,{type:n.Icon.Types.WarningFill,color:n.Icon.Colors.BannerWarningIcon,accessibilityLabel:A.ZP.t("addressPickerStrings_accessibilitywarningIconLabel")}),(0,e.jsxs)(n.StackChildren,{size:n.StackChildren.Sizes.XxSmall,children:[(0,e.jsx)(n.Text,{styles:n.Text.Styles.Medium18,children:A.ZP.t("addressPickerStrings_addressSwitchAndSaveBannerTitle")}),(0,e.jsx)(n.Text,{styles:n.Text.Styles.Medium14,children:A.ZP.t("addressPickerStrings_addressSwitchAndSaveBannerText")})]})]})})},az=c(17563),aA=function(a,b){var c={hideModal:!0,delivery:!0};return a.includes("order.online")?a.includes("?")?"".concat(a,"&").concat(az.stringify(c)):"".concat(a,"?").concat(az.stringify(c)):"".concat(a+b,"?").concat(az.stringify(c))},aB=c(80216);(ap=d||(d={})).Default="Default",ap.Edit="Edit";var aC=function(a){var b,c,k,o=a.addressEntryPoint,p=a.onCompleted,q=a.onAddAddress,r=a.availableAddresses,s=a.onUpdateAddress,u=a.onSelectAddress,v=a.dropoffOptions,x=a.loading,D=a.isStaticPositionSuggestions,E=a.hideAddressList,G=a.selectedAddressId,I=a.onRemoveAddress,J=a.isLiteGuest,L=a.isGuest,M=a.renderBeforeAddressList,N=a.customizations,P=a.defaultAddress,Q=a.handleIdentityLinkClick,R=a.showIdentityLink,S=a.setIsEditTitle,T="".concat(o,"/StorefrontAddressPicker"),W=(0,f.useExperience)().isStorefront,X=g.useContext(ax.ZP).storeInformation,Z=(0,aB.bU)(),$=(0,j.Z)(g.useState(),2),_=$[0],ab=$[1],ac=(0,j.Z)(g.useState(G),2),ad=ac[0],ae=ac[1],af=(0,j.Z)(g.useState(),2),ag=af[0],ah=af[1],ai=(0,j.Z)(g.useState((null==_?void 0:_.subpremise)||""),2),am=ai[0],an=ai[1],ao=(0,j.Z)(g.useState(""),2),ap=ao[0],aq=ao[1],ar=(0,j.Z)((0,al.hF)(),2),as=ar[0],at=ar[1],az=null==at?void 0:null===(b=at.data)||void 0===b?void 0:b.deliverability,aC=null==at?void 0:at.loading,aD=(0,j.Z)(g.useState(d.Default),2),aE=aD[0],aF=aD[1],aG=(0,V.ac)().isMobileTablet,aH=g.useCallback(function(a){var b={lat:null==a?void 0:a.lat,lng:null==a?void 0:a.lng};as({variables:(0,i.Z)((0,h.Z)({},b),{businessId:null==X?void 0:X.businessId})})},[as,null==X?void 0:X.businessId]),aI=N||{},aJ=aI.renderAutocompleteSuggestionsInAnchoredLayer,aK=aI.hideAutoCompleteLabel,aL=function(){if(!ad&&!_){aq(A.ZP.t("addressPickerStrings_addressRequiredLabel"));return}if(_&&aO()&&aq(A.ZP.t("addressPickerStrings_addressOutsideDeliveryZoneLabel")),!aO()){au({isExistingAddress:!!ad,isSubpremisePresent:!!(null==_?void 0:_.subpremise)||!!am}),aF(d.Edit),null==S||S(!0),aq("");return}},aM=function(a){an(a),G&&ae(""),_&&ab((0,i.Z)((0,h.Z)({},_),{subpremise:a}))},aN=g.useCallback(function(a){return t()(r).find(function(b){return a===b.id})},[r]);g.useEffect(function(){if(ad&&W){var a=aN(ad);a&&aH(a)}},[ad,aN,W,null==X?void 0:X.storeId,aH,]);var aO=function(){return W&&!!az&&!(null==az?void 0:az.deliverToAddress)},aP=function(){return(null==az?void 0:az.deliverToAddress)&&(null==az?void 0:az.bestStoreId)!==(null==X?void 0:X.storeId)},aQ="/store/".concat(null==az?void 0:az.bestStoreId,"/"),aR=function(a){aq(""),ab(a),(0,Y.zj)(),z.Qh(T),W&&(ae(""),aH(a))},aS=function(a){a.nativeEvent.stopImmediatePropagation(),ab(void 0),aF(d.Default),null==S||S(!1)},aT=function(a){var b=a.subpremise,c=a.driverInstructions,d=a.dropoffOptionId,e=a.manualLat,f=a.manualLng;if(_&&!(0,K.Uq)(_))return aU({subpremise:b,driverInstructions:c,dropoffOptionId:d,manualLat:e,manualLng:f})},aU=function(a){var b=a.subpremise,c=a.driverInstructions,e=a.dropoffOptionId,f=a.manualLat,g=a.manualLng;if(_&&!(0,K.Uq)(_)){var j=W&&aP();return av(j),q((0,i.Z)((0,h.Z)({},_),{subpremise:b,driverInstructions:c,dropoffOptionId:e,manualLat:f,manualLng:g}),j).then(function(){if(j){(0,B.ZP)("new_fulfillment_flow_redirecting_to_closer_store");var a=aA(aQ,Z);ah(a),aF(d.Default),null==S||S(!1)}})}},aV=function(a){var b=aN(a);ab(b),aF(d.Edit),(0,Y.gC)(),null==S||S(!0)},aW=function(a){var b=a.subpremise,c=a.driverInstructions,d=a.dropoffOptionId,e=a.addressId,f=a.manualLat,g=a.manualLng;return aX({subpremise:b,driverInstructions:c,dropoffOptionId:d,addressId:e,manualLat:f,manualLng:g})},aX=function(a){var b=a.subpremise,c=a.driverInstructions,e=a.dropoffOptionId,f=a.addressId,g=a.manualLat,h=a.manualLng,i=a.buildingName,j=a.entryCode;return s({subpremise:b,driverInstructions:c,dropoffOptionId:e,addressId:f,manualLat:g,manualLng:h,buildingName:i,entryCode:j}).then(function(a){var b;ab(void 0),aF(d.Default),null==S||S(!1),(0,Y.Hz)({addressId:f,dropoffOptionId:e,manualLat:g,manualLng:h,addressEntryPoint:T,addressToUpdate:P,editResponse:null==a?void 0:null===(b=a.data)||void 0===b?void 0:b.editConsumerAddress})}).catch(function(){(0,Y.a5)({addressId:f,dropoffOptionId:e,manualLat:g,manualLng:h,addressEntryPoint:T,addressToUpdate:P,editResponse:null})})},aY=function(a,b,c){return s({subpremise:null,driverInstructions:null,dropoffOptionId:void 0,addressId:a,manualLat:b,manualLng:c})},aZ=function(a){(0,B.ZP)("new_fulfillment_flow_existing_address_select"),ab(void 0),aq(""),ae(a)},a$=function(a){var b,c=aN(a);b=W&&c&&aP(),u(a,b).then(function(){if(b){var a=aA(aQ,Z);ah(a)}}),ad===G&&!b&&p&&p((0,i.Z)((0,h.Z)({},c),{submarket:null}))};if(aE===d.Edit&&_)return c=(0,K.Uq)(_)?{dropoffPreferences:_.dropoffPreferences.allPreferences,address:aN(null==_?void 0:_.id)||_}:{dropoffPreferences:[],address:_},(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(l.default,{isVisible:x,type:l.default.Types.Loading,children:(0,e.jsx)(n.Inset,{children:(0,e.jsx)(y.n,{address:(0,K.Uq)(_)?_:void 0,children:(0,e.jsx)(aj.Z,(0,i.Z)((0,h.Z)({saveButtonText:ad&&aP()?A.ZP.t("addressPickerStrings_saveAndSwitchButton"):"",subpremise:(null==_?void 0:_.subpremise)||am,printableAddress:null==_?void 0:_.printableAddress,onCancel:aS,onAddressEdit:function(){(0,B.ZP)("new_fulfillment_flow_add_address_edit_click"),aF(d.Default),null==S||S(!1)},dropoffOptions:v,handleSubmitNewAddress:aT,handleSubmitEditAddress:aW,handleSubmitPinUpdate:aY,shortname:(null==_?void 0:_.shortname)||""},c),{customizations:N}))})})})});if(ag)return(0,e.jsx)(aa.l_,{to:ag});var a_=W?A.ZP.t("addressPickerStrings_apartmentInput_label"):A.ZP.t("addressPickerStrings_apartmentInputTextPlaceholder");return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(l.default,{"data-anchor-id":H.ep.AddressContainer,isVisible:aC||x,type:l.default.Types.Loading,children:[aO()&&(0,e.jsx)(aw,{}),aP()&&(0,e.jsx)(ay,{}),(0,e.jsxs)(O.Zd,{children:[(0,e.jsx)(n.Inset,{children:(0,e.jsx)(C.Z,{label:A.ZP.t("addressPickerStrings_addressStreetAddress"),isLabelHidden:aK,placeholder:A.ZP.t("addressPickerStrings_addressEnterAddress"),initialInputValue:(null==_?void 0:_.printableAddress)||"",isStaticPositionSuggestions:D,onSelect:aR,error:ap,renderSuggestionsInAnchoredLayer:void 0!==aJ&&aJ})}),(void 0===R||R)&&(0,e.jsx)(w.ZP,{handleIdentityLinkClick:Q,isGuest:L,entry:w.KP.APP}),(0,e.jsx)(n.Inset,{children:(0,e.jsx)(ak.TextField,{value:null!==(k=null==_?void 0:_.subpremise)&&void 0!==k?k:am,size:ak.TextField.Sizes.Medium,onChange:function(a){return aM(a)},placeholder:A.ZP.t("addressPickerStrings_apartmentInput_placeholder"),label:a_,description:A.ZP.t("addressPickerStrings_OptionalLabel"),isLabelHidden:!1})})]}),E?null:(0,e.jsxs)(g.Fragment,{children:[(0,e.jsx)(m.default,{type:m.default.Types.FullBorder}),!!(null==r?void 0:r.length)&&(null==M?void 0:M()),(0,e.jsx)(U,{availableAddresses:r,defaultAddressId:ad,onEdit:aV,onSelect:aZ,onRemove:I,isLiteGuest:J,isAddressLabelEnabled:!1,isCurrentLocationSelected:!1})]}),(0,e.jsxs)(g.Fragment,{children:[(0,e.jsx)(m.default,{type:m.default.Types.FullBorder}),(0,e.jsx)(O.qO,{children:(0,e.jsx)(F.default,{"data-anchor-id":H.ep.AddressNextButton,isInline:!aG,onClick:ad?function(){return a$(ad)}:aL,children:ad?aP()?A.ZP.t("addressPickerStrings_saveAndSwitchButton"):A.ZP.t("addressPickerStrings_addressAddSaveButtonText"):A.ZP.t("addressPickerStrings_addressAddNextButtonText")})})]})]})})},aD=r.zH(aC,{name:"StorefrontAddressPicker "}),aE=c(1100),aF=c(80133),aG=c(85464),aH=c(81271),aI=c(66173);function aJ(){var a=(0,M.Z)(["\n  mutation updateConsumerDefaultAddress($defaultAddressId: ID!) {\n    updateConsumerDefaultAddress(defaultAddressId: $defaultAddressId) {\n      ...ConsumerFragment\n    }\n  }\n  ","\n"]);return aJ=function(){return a},a}var aK=(0,aF.Ps)(aJ(),aG.sy),aL=function(a){var b,c=a.refetchQueries,d=a.awaitRefetchQueries,e=void 0!==d&&d,f=a.addressEntryPoint,g=a.onCompleted,h=(0,j.Z)((0,aH.Z)({ethosAction:{name:aI.r.UpdateConsumerAddress,type:aI.Yh.TypedInput}},aK,{onCompleted:function(a){var b,c,d,e,f;null==g||g(null!==(e=null===(b=a.updateConsumerDefaultAddress)||void 0===b?void 0:b.defaultAddress)&&void 0!==e?e:void 0,null!==(f=null===(c=a.updateConsumerDefaultAddress)||void 0===c?void 0:null===(d=c.orderCart)||void 0===d?void 0:d.id)&&void 0!==f?f:"")}}),2),i=h[0];return{updateConsumerDefaultAddress:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i({awaitRefetchQueries:e,refetchQueries:b?[]:c,variables:{defaultAddressId:a}}).then(function(b){var c,d;z.hy((d=f,"".concat(d,"/DefaultAddressMutation")),a,null===(c=b.data)||void 0===c?void 0:c.updateConsumerDefaultAddress)})},res:h[1]}},aM=c(90516),aN=c(18577),aO=function(a){var b,c=a.addressEntryPoint,d=a.consumer,g=a.addressAutocompleteLabel,h=a.hideAddressList,i=a.isStaticPositionSuggestions,j=a.refetchQueries,k=a.awaitRefetchQueries,l=a.awaitDefaultAddressRefetchQueries,m=a.onChange,n=a.renderBeforeAddressList,o=a.customizations,p=a.renderFooterActions,q=a.handleIdentityLinkClick,r=a.placeholder,s=a.showIdentityLink,t=void 0===s||s,u=a.setIsEditTitle,v=a.setSelectedAddress,w=a.loading,x=a.selectedAddressLabelName,y=a.isCurrentLocationEnabled,z=a.isCurrentLocationSelected,A=a.onClickCurrentLocation,B=a.onCompleteRemoveAddress,C=a.onSetLabelForAddressComplete,D="".concat(c,"/AddressPickerConnected"),E=(0,f.useExperience)().isStorefront,F=aL({refetchQueries:j,awaitRefetchQueries:l,addressEntryPoint:D,onCompleted:m}),G=F.updateConsumerDefaultAddress,H=F.res,I=(0,aE.s)({addressEntryPoint:D,refetchQueries:j,awaitRefetchQueries:k,onCompleted:m}),J=I.addConsumerAddress,K=I.res,L=(0,aM.i)(),M=L.editAddress,N=L.res,O=N.loading,P=(0,aN.p)(B),Q=P.removeAddress,R=P.res,S=(null==d?void 0:d.availableAddresses)||[],T=(null==d?void 0:null===(b=d.defaultAddress)||void 0===b?void 0:b.id)||"",U=(null==d?void 0:d.labeledAddresses)||[],V=Boolean(d)&&null===d.email,W=Boolean(d)&&d.isGuest,X=Boolean(d)&&d.isGuest&&V,Y=w||H.loading||R.loading||K.loading||O;return E?(0,e.jsx)(aD,{handleIdentityLinkClick:q,addressEntryPoint:D,onCompleted:m,availableAddresses:S,selectedAddressId:T,dropoffOptions:d.dropoffOptions,loading:Y,onSelectAddress:G,onRemoveAddress:Q,onAddAddress:J,onUpdateAddress:M,addressAutocompleteLabel:g,hideAddressList:h,isStaticPositionSuggestions:i,isLiteGuest:X,isGuest:W,renderBeforeAddressList:n,customizations:o,defaultAddress:d.defaultAddress,showIdentityLink:t,setIsEditTitle:u}):(0,e.jsx)(ai,{addressEntryPoint:D,renderFooterActions:p,availableAddresses:S,labeledAddresses:U,defaultAddressId:T,dropoffOptions:d.dropoffOptions,loading:Y,onSelectAddress:G,onRemoveAddress:Q,onAddAddress:J,onUpdateAddress:M,addressAutocompleteLabel:g,hideAddressList:h,isStaticPositionSuggestions:i,isLiteGuest:X,isGuest:W,renderBeforeAddressList:n,customizations:o,handleIdentityLinkClick:q,defaultAddress:d.defaultAddress,placeholder:r,showIdentityLink:t,setIsEditTitle:u,setSelectedAddress:v,selectedAddressLabelName:x,isCurrentLocationEnabled:void 0!==y&&y,isCurrentLocationSelected:void 0!==z&&z,onClickCurrentLocation:A,refetchQueries:j,onSetLabelForAddressComplete:C})}},95779:function(a,b,c){c.d(b,{A7:function(){return s},Kk:function(){return u},UI:function(){return r},Wk:function(){return v},Zd:function(){return p},Zl:function(){return t},oh:function(){return q},qO:function(){return o}});var d=c(7297),e=c(10071),f=c(87379);function g(){var a=(0,d.Z)(["\n  display: flex;\n  padding: ","px;\n  justify-content: flex-end;\n"]);return g=function(){return a},a}function h(){var a=(0,d.Z)(["\n  label {\n    margin-bottom: ","px;\n  }\n"]);return h=function(){return a},a}function i(){var a=(0,d.Z)(["\n  margin: -","px;\n"]);return i=function(){return a},a}function j(){var a=(0,d.Z)(["\n  padding-left: ","px;\n  margin-bottom: ","px;\n  ","\n"]);return j=function(){return a},a}function k(){var a=(0,d.Z)(["\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return k=function(){return a},a}function l(){var a=(0,d.Z)(["\n  cursor: pointer;\n  display: block;\n  margin-right: ","px;\n"]);return l=function(){return a},a}function m(){var a=(0,d.Z)(["\n  margin-bottom: ","px;\n"]);return m=function(){return a},a}function n(){var a=(0,d.Z)(["\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return n=function(){return a},a}var o=f.default.div.withConfig({componentId:"sc-db4bcb1f-0"})(g(),e.Spacing.Small),p=f.default.div.withConfig({componentId:"sc-db4bcb1f-1"})(h(),e.Spacing.XxSmall),q=f.default.div.withConfig({componentId:"sc-db4bcb1f-2"})(i(),e.Spacing.Small),r=(0,f.default)(e.Text).attrs(function(){return{styles:e.Text.Styles.Bold18}}).withConfig({componentId:"sc-db4bcb1f-3"})(j(),e.Spacing.Small,e.Spacing.XxSmall,function(a){return a.hasMarginTop&&"margin-top: ".concat(e.Spacing.XSmall,"px;")}),s=f.default.div.withConfig({componentId:"sc-db4bcb1f-4"})(k()),t=(0,f.default)(e.Icon).attrs(function(){return{}}).withConfig({componentId:"sc-db4bcb1f-5"})(l(),function(a){return a.hasMarginRight?e.Spacing.XxSmall:e.Spacing.None}),u=f.default.div.withConfig({componentId:"sc-db4bcb1f-6"})(m(),e.Spacing.Small),v=f.default.div.withConfig({componentId:"sc-db4bcb1f-7"})(n())},95505:function(a,b,c){c.d(b,{Hz:function(){return j},a5:function(){return k},gC:function(){return h},zj:function(){return g}});var d=c(26042),e=c(3532),f=c(9633),g=function(){(0,e.ZP)(f.wd.SelectedAddress)},h=function(){(0,e.ZP)(f.wd.ClickedEditAddress,{entry:f.kS.AddressPicker})},i=function(a){return function(b){var c=b.addressId,g=b.addressEntryPoint,h=b.addressToUpdate,i=b.editResponse,j=b.dropoffOptionId,k=b.manualLat,n=b.manualLng;(0,e.ZP)(a,{entry:f.kS.AddressPicker,dropoff_option_id:j,address_id:c,pin_lat:k,pin_lng:n}),(0,e.ZP)("debug_address_modify",(0,d.Z)({address_entry_point:g},m(h),l(i)))}},j=i(f.wd.SubmittedAddressEdits),k=i(f.wd.AddressEditSubmitError),l=function(a){if(!a)return{};var b,c=a.defaultAddress,d=a.availableAddresses,e=null==c?void 0:c.dropoffPreferences.allPreferences.find(function(a){return a.isDefault});return{edited_address_id:null==c?void 0:c.id,edited_address_dropoffPreference:null==e?void 0:e.optionId,edited_address_instructions:null==c?void 0:c.driverInstructions,edited_address_latitude:null==c?void 0:c.lat,edited_address_longitude:null==c?void 0:c.lng,edited_address_manual_latitude:null==c?void 0:c.manualLat,edited_address_manual_longitude:null==c?void 0:c.manualLng,edited_address_subpremise:null==c?void 0:c.subpremise,edited_available_addresses:JSON.stringify(null==d?void 0:d.map(function(a){return null==a?void 0:a.id})),edited_address_label_name:null==c?void 0:null===(b=c.personalAddressLabel)||void 0===b?void 0:b.labelName}},m=function(a){if(!a)return{};var b=null==a?void 0:a.dropoffPreferences.allPreferences.find(function(a){return a.isDefault}),c=a.id,d=a.driverInstructions,e=a.lat,f=a.lng,g=a.manualLat,h=a.manualLng,i=a.street,j=a.subpremise,k=a.city,l=a.state,m=a.zipCode,n=a.country,o=a.personalAddressLabel;return{previous_address_id:c,previous_address_dropoffPreference:null==b?void 0:b.optionId,previous_address_instructions:d,previous_address_latitude:e,previous_address_locality_line:"".concat(k,", ").concat(l," ").concat(m,", ").concat(n),previous_address_longitude:f,previous_address_manual_latitude:g,previous_address_manual_longitude:h,previous_address_street_line:"".concat(i,", ").concat(j),previous_address_subpremise:j,previous_address_label_name:null==o?void 0:o.labelName,previous_address_label_icon:null==o?void 0:o.labelIcon}}},9205:function(a,b,c){var d=c(10253),e=c(85893),f=c(24906),g=c(10071),h=c(67294),i=c(44221),j=c(94251),k=c(35953),l=c(23685),m=function(a){var b=a.address,c=a.handleChangePinLocation,m=a.draftCoordinates,n=a.errorMessage,o=a.onCancel,p=a.onSubmit,q=a.hideTitle,r=a.shouldStackActionButtons,s=a.hideActionButtons,t=(0,d.Z)(h.useState({lat:m.lat,lng:m.lng}),1),u=t[0],v=(0,i.Z)(),w=v.grantedGeolocationPermission,x=v.updateCurrentPosition;h.useEffect(function(){w&&x()},[w,x]);var y=function(a){var b,c;(a.nativeEvent.stopImmediatePropagation(),b=u,(c=m).lat!==b.lat||c.lng!==b.lng)?null==p||p(m):null==o||o(a)};return(0,e.jsxs)(g.StackChildren,{children:[!(void 0!==q&&q)&&(0,e.jsx)(g.Text,{styles:g.Text.Styles.PageTitle,children:l.ZP.t("addressPickerStrings_addressEditAdjustPin")}),(0,e.jsx)(j.Z,{defaultAddress:b,isEditing:!0,isCompact:!1,onChange:c,locationOverride:m}),n&&(0,e.jsx)(k.Z,{children:n}),!(void 0!==s&&s)&&(r?(0,e.jsxs)(g.StackChildren,{size:g.StackChildren.Sizes.XxSmall,children:[(0,e.jsx)(f.default,{onClick:y,children:l.ZP.t("addressPickerStrings_addressEditSave")}),(0,e.jsx)(f.default,{onClick:o,type:f.default.Types.Tertiary,children:l.ZP.t("addressPickerStrings_addressEditCancel")})]}):(0,e.jsxs)(g.InlineChildren,{children:[(0,e.jsx)(f.default,{onClick:o,type:f.default.Types.Tertiary,children:l.ZP.t("addressPickerStrings_addressEditCancel")}),(0,e.jsx)(f.default,{onClick:y,children:l.ZP.t("addressPickerStrings_addressEditSave")})]}))]})};b.Z=m},35953:function(a,b,c){c.d(b,{Z:function(){return k}});var d=c(85893);c(67294);var e=c(10071),f=c(7297),g=c(87379);function h(){var a=(0,f.Z)(["\n  background-color: ",";\n"]);return h=function(){return a},a}var i=g.default.div.withConfig({componentId:"sc-111ec8f0-0"})(h(),e.Colors.BannerNegativeBackground),j=c(87708),k=function(a){return(0,d.jsx)(i,{"data-testid":"AddressPickerErrorBanner",children:(0,d.jsx)(e.Inset,{children:(0,d.jsxs)(e.InlineChildren,{alignItems:e.InlineChildren.Alignment.Center,size:e.InlineChildren.Sizes.XSmall,children:[(0,d.jsx)(e.Icon,{type:e.Icon.Types.ErrorFill,color:e.Icon.Colors.BannerNegativeIcon,accessibilityLabel:"Error Icon"}),(0,d.jsx)(j.I,{error:a.children,children:(0,d.jsx)(e.Text,{styles:e.Text.Styles.Medium14,children:a.children})})]})})})}},82976:function(a,b,c){c.d(b,{Z:function(){return y}});var d=c(26042),e=c(69396),f=c(99534),g=c(10253),h=c(85893),i=c(1968),j=c(67294),k=c(98571),l=c(70179),m=c(20306),n={addressPickerModal:"addressPickerModal"},o=c(34788),p=c(87728),q=c(21173),r=c(5119),s=c(125),t=c(24249),u=c(84865),v=c(14334),w=c(1498),x=c(23685),y=function(a){var b,c,y,z,A,B,C,D,E=a.title,F=a.subtitle,G=a.hasCloseButton,H=a.onClose,I=void 0===H?function(){}:H,J=a.addressEntryPoint,K=a.onChange,L=void 0===K?function(){}:K,M=a.refetchQueries,N=void 0===M?[]:M,O=a.isStaticPositionSuggestions,P=a.addressAutocompleteLabel,Q=a.renderFooterActions,R=a.renderBeforeAddressList,S=a.awaitDefaultAddressRefetchQueries,T=a.customizations,U=a.storeId,V=a.size,W=a.renderContentHeader,X=a.isCurrentLocationEnabled,Y=a.isCurrentLocationSelected,Z=a.onClickCurrentLocation,$=a.renderFooterContent,_=(0,f.Z)(a,["title","subtitle","hasCloseButton","onClose","addressEntryPoint","onChange","refetchQueries","isStaticPositionSuggestions","addressAutocompleteLabel","renderFooterActions","renderBeforeAddressList","awaitDefaultAddressRefetchQueries","customizations","storeId","size","renderContentHeader","isCurrentLocationEnabled","isCurrentLocationSelected","onClickCurrentLocation","renderFooterContent"]),aa="".concat(J,"/AddressModal"),ab=j.useContext(o.Z).consumer,ac=(y=(c={onClose:function(){I()}}).onClose,A=(z=(0,l.Z)()).showSignInSignUpModal,B=z.setShowSignInSignUpModal,C=z.onIdentityLinkClick,D=function(){return(0,h.jsx)(k.Z,{setShowSignInSignUpModal:B,onClose:function(){B(!1),y()}})},{showSignInSignUpModal:A,onIdentityLinkClick:C,renderSignInSignUpModal:D}),ad=ac.showSignInSignUpModal,ae=ac.onIdentityLinkClick,af=ac.renderSignInSignUpModal,ag=(0,m.Z)().isAddressLabelEnabled,ah=(0,g.Z)(j.useState(!1),2),ai=ah[0],aj=ah[1],ak=(0,g.Z)(j.useState(null),2),al=ak[0],am=ak[1],an=(0,v.p)({addressEntryPoint:aa,addAddressMutationProps:{addressEntryPoint:aa,refetchQueries:N,awaitRefetchQueries:void 0,onCompleted:function(){L()}},onEditAddressCompleted:function(){null==aj||aj(!1),am(null)}}),ao=an.mode,ap=an.setMode,aq=an.draftAddress,ar=an.setDraftAddress,as=an.editFormError,at=an.setEditFormError,au=an.saveAddress,av=an.saveChangePin,aw=an.loading,ax=function(){var a=(0,w.g7)(ao,al);ap(a),at(null),aj(!1),a===t.A.Edit&&aq?ar((0,e.Z)((0,d.Z)({},aq),{draftCoordinates:null})):a===t.A.Default&&am(null)},ay=j.useContext(p.d).isLoggedOutStorePage,az=ay?"store_page_logged_out":null;(0,j.useEffect)(function(){(0,s.K4)(az,U)},[U,az]);var aA=function(){(0,s.U$)(az,U),I()},aB=function(a,b){(0,s.b9)(az,U),(0,s.BP)(az,U),L(a,b)};return ad?af():(0,h.jsx)(i.Modal,(0,e.Z)((0,d.Z)({"data-testid":n.addressPickerModal,title:(0,w.OH)({titleProp:E,isEditTitle:ai,isAddressLabelEnabled:ag,mode:ao,isGuest:ab.isGuest,selectedAddressLabelName:null==al?void 0:al.labelName}),subtitle:F,hasCloseButton:void 0===G||G,onClose:ao===t.A.Default?aA:ax,size:V||(ag?i.Modal.Sizes.Small:void 0),renderContentHeader:W,hasContentPadding:!1,hasHeaderPadding:!0,renderFooterContent:(0,w.uW)({renderFooterContentProp:$,isAddressLabelEnabled:ag,loading:aw,mode:ao,error:(0,q.Yg)(as)?null:as,onCancel:ao===t.A.Default?aA:ax,onSave:function(){ao===t.A.ChangePin?av():ao===t.A.Edit&&au()}})},_),{children:(0,h.jsx)(u.m,{mode:ao,setMode:ap,useDraftAddressFromModal:ag,draftAddress:aq,setDraftAddress:ar,editFormError:as,setEditFormError:at,children:(0,h.jsx)(r.Z,{customizations:T,awaitDefaultAddressRefetchQueries:S,addressEntryPoint:J,consumer:ab,onChange:aB,refetchQueries:N,isStaticPositionSuggestions:O,hideAddressList:!ab.defaultAddress,addressAutocompleteLabel:void 0===P?"":P,renderFooterActions:Q,renderBeforeAddressList:R,handleIdentityLinkClick:ae,setIsEditTitle:function(a){return aj(a)},setSelectedAddress:am,placeholder:ag&&al?x.ZP.t("addressPickerStrings_searchForLabelAddress",{label:null!==(b=al.labelName)&&void 0!==b?b:""}):void 0,selectedAddressLabelName:null==al?void 0:al.labelName,isCurrentLocationEnabled:void 0!==X&&X,isCurrentLocationSelected:void 0!==Y&&Y,onClickCurrentLocation:function(){null==Z||Z(),aA()},onCompleteRemoveAddress:ax,onSetLabelForAddressComplete:function(){am(null),ar(void 0),at(null),ap(t.A.Default)}})})}))}},84865:function(a,b,c){c.d(b,{R:function(){return h},m:function(){return g}});var d=c(85893),e=c(67294),f=e.createContext(void 0),g=function(a){var b=a.mode,c=a.setMode,e=a.useDraftAddressFromModal,g=a.draftAddress,h=a.editFormError,i=a.setDraftAddress,j=a.setEditFormError,k=a.children;return(0,d.jsx)(f.Provider,{value:{mode:b,setMode:c,useDraftAddressFromModal:e,draftAddress:g,setDraftAddress:i,editFormError:h,setEditFormError:j},children:k})},h=function(){return e.useContext(f)}},53982:function(a,b,c){var d=c(26042),e=c(69396),f=c(85893),g=c(54425),h=c(1968),i=c(43947),j=c(13819);c(67294);var k=c(64995),l=c(25760),m=c(21173),n=c(22459),o=c(18577),p=c(24249),q=c(84865),r=c(14334),s=c(1498),t=[p.A.Edit,p.A.ChangePin],u=function(a){var b=a.addressEntryPoint,c=a.title,u=a.address,v=a.dropoffOptions,w=a.onClose,x=a.dropoffPreferences,y=a.defaultAddressId,z=a.driverInstructions,A=a.customizations,B=a.refetchQueries,C=a.testId,D="".concat(b,"/EditAddressModal"),E=(0,g.useExperience)().isStorefront,F=(0,r.p)({defaultMode:p.A.Edit,addressEntryPoint:D,addAddressMutationProps:{addressEntryPoint:D,refetchQueries:B},onEditAddressCompleted:function(){J(void 0),null==w||w()}}),G=F.mode,H=F.setMode,I=F.draftAddress,J=F.setDraftAddress,K=F.editFormError,L=F.setEditFormError,M=F.saveAddress,N=F.saveChangePin,O=F.loading,P=(0,o.p)(),Q=P.removeAddress,R=function(a){a?Q(a):(0,i.eN)({level:j.z.Warning,message:"Trying to remove an address without id"})},S=function(){G===p.A.ChangePin&&I&&J((0,e.Z)((0,d.Z)({},I),{draftCoordinates:null})),H(p.A.Edit),L(null)},T=function(){return G===p.A.ChangePin?S():null==w?void 0:w()};return!E&&t.includes(G)&&u?(0,f.jsx)(h.Modal,{"data-testid":C,title:c,hasCloseButton:!0,onClose:T,size:h.Modal.Sizes.Small,renderFooterContent:(0,s.uW)({isAddressLabelEnabled:!0,loading:O,mode:G,error:(0,m.Yg)(K)?null:K,onCancel:T,onSave:function(){G===p.A.ChangePin?N():G===p.A.Edit&&M()}}),children:(0,f.jsx)(q.m,{mode:G,setMode:H,useDraftAddressFromModal:!0,draftAddress:I,setDraftAddress:J,editFormError:K,setEditFormError:L,children:(0,f.jsx)(k.n,{address:(0,n.aN)(u)?void 0:u,googlePlaceId:(0,n.aN)(u)?u.googlePlaceId:void 0,children:(0,f.jsx)(l.Z,{dropoffPreferences:x,dropoffOptions:v,driverInstructions:z,address:u,hideAdjustPin:null==A?void 0:A.hideAdjustPin,hideDropOffOptions:null==A?void 0:A.hideDropOffOptions,handleRemoveAddress:R,defaultAddressId:y})})})}):null};b.Z=u},14334:function(a,b,c){c.d(b,{p:function(){return p}});var d=c(26042),e=c(69396),f=c(67294),g=c(34788),h=c(23685),i=c(80763),j=c(21173),k=c(95505),l=c(22459),m=c(1100),n=c(90516),o=c(24249);function p(a){var b,c,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=a.defaultMode,H=a.addressEntryPoint,I=a.addAddressMutationProps,J=a.onEditAddressCompleted,K=null!=G?G:o.A.Default,L=(0,f.useState)(K),M=L[0],N=L[1],O=(0,f.useState)(),P=O[0],Q=O[1],R=(0,f.useState)(null),S=R[0],T=R[1],U=(0,f.useCallback)(function(){Q(void 0),T(null),N(K)},[K]),V=(c=(b={addressEntryPoint:H,addAddressMutationProps:I,setEditFormError:T,onEditAddressCompleted:J,draftAddress:P,clearStates:U}).addressEntryPoint,p=b.addAddressMutationProps,q=b.draftAddress,r=b.clearStates,s=b.setEditFormError,t=b.onEditAddressCompleted,u=(0,m.s)(p),v=u.addConsumerAddress,w=u.res,x=w.loading,y=(0,n.i)(),z=y.editAddress,A=y.res,B=A.loading,C=(0,f.useContext)(g.Z).consumer,D=function(a){var b,c=(0,l.Yt)(a.draftCoordinates),d=c.manualLat,e=c.manualLng,f={manualLat:d,manualLng:e,lat:a.lat,lng:a.lng,dropoffOptionId:a.dropoffOptionId};return v({lat:a.lat,lng:a.lng,city:a.city,state:a.state,zipCode:a.zipCode,printableAddress:a.printableAddress,shortname:a.shortname,googlePlaceId:a.googlePlaceId,subpremise:a.subpremise,driverInstructions:a.driverInstructions,dropoffOptionId:a.dropoffOptionId,addressLinkType:a.addressLinkType,buildingName:a.buildingName,entryCode:a.entryCode,manualLat:d,manualLng:e,personalAddressLabel:{labelName:null===(b=a.personalAddressLabel)||void 0===b?void 0:b.labelName}}).then(function(){(0,i.KS)(f),s(null),r()}).catch(function(a){var b=(0,j.Au)(a);s(b),(0,i.hJ)(f)})},E=function(a){var b,f=(0,l.Yt)(a.draftCoordinates),g=f.manualLat,h=f.manualLng,i={addressId:a.id,dropoffOptionId:a.dropoffOptionId,manualLat:g,manualLng:h,addressEntryPoint:c,addressToUpdate:C.defaultAddress};return s(null),z({subpremise:a.subpremise,driverInstructions:a.driverInstructions,dropoffOptionId:a.dropoffOptionId,addressLinkType:a.addressLinkType,entryCode:a.entryCode,buildingName:a.buildingName,manualLat:g,manualLng:h,personalAddressLabel:{labelName:null===(b=a.personalAddressLabel)||void 0===b?void 0:b.labelName},addressId:a.id}).then(function(a){var b;t(),(0,k.Hz)((0,e.Z)((0,d.Z)({},i),{editResponse:null==a?void 0:null===(b=a.data)||void 0===b?void 0:b.editConsumerAddress})),r()}).catch(function(a){(0,k.a5)((0,e.Z)((0,d.Z)({},i),{editResponse:null}));var b=(0,j.Au)(a);s(b)})},F=function(){q&&((0,l.aN)(q)?D(q):E(q))},{loading:x||B,saveAddress:F}),W=V.saveAddress,X=V.loading,Y=function(){var a=(null!=P?P:{}).draftCoordinates;P&&(a?(0,l.ng)(a,P)?(Q(function(b){return b?(0,e.Z)((0,d.Z)({},b),{manualLat:a.lat,manualLng:a.lng}):void 0}),N(o.A.Edit),T(null)):(Q(function(a){return a?(0,e.Z)((0,d.Z)({},a),{manualLat:null,manualLng:null}):void 0}),T(h.ZP.t("addressPickerStrings_addressEditPinLocationError"))):T(h.ZP.t("addressPickerStrings_addressEditPinLocationNoChange")))};return{mode:M,setMode:N,draftAddress:P,setDraftAddress:Q,editFormError:S,setEditFormError:T,saveAddress:W,saveChangePin:Y,loading:X}}},1498:function(a,b,c){c.d(b,{g7:function(){return t},OH:function(){return q},uW:function(){return s}});var d=c(85893);c(67294);var e=c(23685),f=c(24249),g=c(7297),h=c(24906),i=c(10071),j=c(87379),k=c(88311),l=c(35953),m=c(62139);function n(){var a=(0,g.Z)(["\n  flex: 1;\n"]);return n=function(){return a},a}var o=(0,j.default)(i.StackChildren).attrs(function(){return{size:i.StackChildren.Sizes.XxSmall}}).withConfig({componentId:"sc-443c5be2-0"})(n()),p=function(a){var b=a.formError,c=a.loading,g=a.mode,j=a.onCancel,n=a.onSave,p=(0,k.ac)().isMobile,q=g===f.A.ChangePin,r=(0,d.jsx)(h.default,{isInline:!q&&!p,type:q?h.default.Types.Tertiary:h.default.Types.Plain,onClick:j,isDisabled:c,"data-testid":m.D.AddressModalFooterCancelButton,size:p?h.default.Sizes.Large:h.default.Sizes.Medium,children:e.ZP.t("addressPickerStrings_addressEditCancel")}),s=(0,d.jsx)(h.default,{isInline:!q&&!p,onClick:n,state:c?h.default.States.Loading:h.default.States.Default,"data-testid":m.D.AddressModalFooterSubmitButton,size:p?h.default.Sizes.Large:h.default.Sizes.Medium,children:q?e.ZP.t("addressPickerStrings_addressEditSave"):e.ZP.t("address_save_address")});return(0,d.jsxs)(o,{children:[b&&(0,d.jsx)(l.Z,{children:b}),p?(0,d.jsxs)(i.StackChildren,{size:i.StackChildren.Sizes.XxSmall,children:[s,r]}):(0,d.jsxs)(i.InlineChildren,{justifyContent:i.InlineChildren.Justification.FlexEnd,size:i.InlineChildren.Sizes.XxSmall,children:[r,s]})]})},q=function(a){var b=a.titleProp,c=a.isEditTitle,d=a.isAddressLabelEnabled,g=a.mode,h=a.isGuest,i=a.selectedAddressLabelName;if(d&&g===f.A.SetLabel&&i)return e.ZP.t("addressPickerStrings_setLabelAddress",{label:null!=i?i:""});if(d&&g===f.A.ChangePin)return e.ZP.t("addressPickerStrings_addressEditAdjustPin");if(c||g===f.A.Edit)return d?e.ZP.t("address_save_address"):e.ZP.t("address_edit_title");var j=h?e.ZP.t("layoutStrings_header_addAddress"):e.ZP.t("addressPickerStrings_addresses"),k=d?j:e.ZP.t("menu_addressDetails_enterYourDeliveryAddressText");return b||k},r=[f.A.Edit,f.A.ChangePin],s=function(a){var b=a.renderFooterContentProp,c=a.isAddressLabelEnabled,e=a.loading,f=a.mode,g=a.error,h=a.onCancel,i=a.onSave;return b?b:c&&r.includes(f)?function(){return(0,d.jsx)(p,{mode:f,formError:g,loading:e,onCancel:h,onSave:i})}:void 0},t=function(a,b){return(null==b?void 0:b.isFromLabeledAddress)&&a!==f.A.SetLabel?f.A.SetLabel:a===f.A.ChangePin?f.A.Edit:f.A.Default}},90516:function(a,b,c){c.d(b,{i:function(){return n}});var d=c(26042),e=c(69396),f=c(10253),g=c(7297),h=c(80133),i=c(46367),j=c(20306),k=c(85464);function l(){var a=(0,g.Z)(["\n  mutation editConsumerAddress(\n    $subpremise: String\n    $driverInstructions: String\n    $dropoffOptionId: String\n    $addressId: String\n    $manualLat: Float\n    $manualLng: Float\n    $addressLinkType: AddressLinkType\n    $buildingName: String\n    $entryCode: String\n    $personalAddressLabel: PersonalAddressLabelInput\n    $returnConsumerFragment: Boolean!\n  ) {\n    editConsumerAddress(\n      subpremise: $subpremise\n      driverInstructions: $driverInstructions\n      dropoffOptionId: $dropoffOptionId\n      addressId: $addressId\n      manualLat: $manualLat\n      manualLng: $manualLng\n      addressLinkType: $addressLinkType\n      buildingName: $buildingName\n      entryCode: $entryCode\n      personalAddressLabel: $personalAddressLabel\n    ) {\n      defaultAddress {\n        ...DefaultAddressFragment\n      }\n      availableAddresses {\n        ...DefaultAddressFragment\n      }\n      ... @include(if: $returnConsumerFragment) {\n        ...ConsumerFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return l=function(){return a},a}var m=(0,h.Ps)(l(),k.qN,k.sy),n=function(){var a=(0,f.Z)((0,i.Db)(m),2),b=a[0],c=a[1],g=(0,j.Z)().isAddressLabelEnabled;return{editAddress:function(a){return b({variables:(0,e.Z)((0,d.Z)({},a),{returnConsumerFragment:g})})},res:c}}},18577:function(a,b,c){c.d(b,{p:function(){return m}});var d=c(10253),e=c(7297),f=c(80133),g=c(46367),h=c(85464),i=c(3532),j=c(9633);function k(){var a=(0,e.Z)(["\n  mutation removeConsumerAddress($defaultAddressId: ID!) {\n    removeConsumerAddress(defaultAddressId: $defaultAddressId) {\n      ...ConsumerFragment\n    }\n  }\n  ","\n"]);return k=function(){return a},a}var l=(0,f.Ps)(k(),h.sy),m=function(a){var b,c=(0,d.Z)((0,g.Db)(l,{onCompleted:function(b){(0,i.ZP)(j.wd.AddressDeleteSubmit,b),null==a||a(b)}}),2),e=c[0];return{removeAddress:function(a){return e({variables:{defaultAddressId:a}})},res:c[1]}}},62139:function(a,b,c){var d,e;c.d(b,{D:function(){return d}}),(e=d||(d={})).AddressAutocomplete="AddressAutocomplete",e.AddressAutocompleteSuggestion="AddressAutocompleteSuggestion",e.AddressAutocompleteSuggestionError="AddressAutocompleteSuggestion",e.AddressEditAdjustPinButton="AddressEditAdjustPinButton",e.AddressEditForm="AddressEditForm",e.AddressEditRemoveButton="AddressEditRemoveButton",e.AddressEditSectionSeparator="AddressEditSectionSeparator",e.AddressLabelBanner="AddressLabelBanner",e.AddressListItem="AddressListItem",e.AddressModalFooterCancelButton="AddressModalFooterCancelButton",e.AddressModalFooterSubmitButton="AddressModalFooterSubmitButton",e.GoogleAttributionImage="GoogleAttributionImage"},125:function(a,b,c){c.d(b,{BP:function(){return i},Jn:function(){return k},K4:function(){return f},"U$":function(){return g},Ur:function(){return j},b9:function(){return h}});var d=c(3532),e=c(9633),f=function(a,b){return(0,d.ZP)(e.wd.ShowAddressModal,{store_id:b,use_case:null!=a?a:null})},g=function(a,b){return(0,d.ZP)(e.wd.HideAddressModal,{store_id:b,use_case:null!=a?a:null})},h=function(a,b){return(0,d.ZP)(e.wd.SubmittedNewAddress,{store_id:b,use_case:null!=a?a:null})},i=function(a,b){return(0,d.ZP)(e.wd.AddressModalClosedAfterAddressAdded,{store_id:b,use_case:null!=a?a:null})},j=function(a,b,c){return(0,d.ZP)(e.wd.ClickLabeledAddress,{is_setting_new:!0,label_icon:c,label_name:b,address_id:null,previous_address_id:null,address_entry_point:a})},k=function(a){return(0,d.ZP)(e.wd.ClickAddressLabelField,{current_address_label_name:a})}},51232:function(a,b,c){var d=c(26042),e=c(69396),f=c(85893),g=c(33016),h=c(10071),i=c(67294),j=c(87620),k=c(34788),l=c(19641),m=c(11459),n=c(3532),o=c(23685),p=function(a){switch(a){case m.wy.WARNING:return{variant:g.ZP.Variants.Warning};case m.wy.ERROR:return{variant:g.ZP.Variants.Negative};case m.wy.INFO:case m.wy.UNSPECIFIED:return{variant:g.ZP.Variants.Informational}}},q=function(a){var b=a.onClick,c=a.showPrimaryActionButton,m=a.orderCartId,q=i.useContext(k.Z).consumer,r=i.useContext(l.Z),s=r.result;return((0,j.F_)(function(){s&&(0,n.ZP)("checkout_address_validation_banner_shown",{validation_result_code:s.code,cart_id:m,consumer_id:q.id,banner_type:s.type})},[s,m,q.id]),s)?(0,f.jsx)(h.Stack,{children:(0,f.jsx)(g.ZP,(0,e.Z)((0,d.Z)({},p(s.type)),{body:s.message,primaryAction:void 0!==c&&c?{content:o.ZP.t("addressPickerStrings_validationAddressEdit"),onClick:b}:void 0}))}):null};b.Z=q},3406:function(a,b,c){c.d(b,{KP:function(){return e},Jk:function(){return A},rW:function(){return B},ZP:function(){return C}});var d,e,f=c(7297),g=c(85893),h=c(67294),i=c(10071),j=c(43848),k=c(3532),l=c(87379);function m(){var a=(0,f.Z)(["\n  text-decoration: underline;\n  color: inherit;\n  margin: ","px;\n"]);return m=function(){return a},a}var n=(0,l.default)(i.Text).withConfig({componentId:"sc-d77ca926-0"})(m(),i.Spacing.Small),o=c(66264),p=c(20688),q=c(70179),r=c(98571),s=c(54425),t=c(20306),u=c(24906),v=c(22434),w=c(23685);function x(){var a=(0,f.Z)(["\n  span {\n    margin-top: ","px;\n    color: ",";\n  }\n"]);return x=function(){return a},a}function y(){var a=(0,f.Z)(["\n  span {\n    text-align: center;\n    color: ",";\n    ",";\n  }\n"]);return y=function(){return a},a}(d=e||(e={})).HOME="home",d.APP="app";var z=function(a){var b=a.className,c=a.isGuest,d=a.entry,e=a.handleIdentityLinkClick,f=a.isDarkBackground,l=a.linkText,m=a.isSignInBtnEnabled,x=void 0!==m&&m,y=(0,h.useState)(""),z=y[0],A=y[1],B=(0,s.useExperience)(),C=B.isDoorDash,D=B.isCaviar,E=(0,t.Z)().isAddressLabelEnabled,F=(0,q.Z)(),G=F.showLoginInModalExpEnabled,H=F.showSignInSignUpModal,I=F.setShowSignInSignUpModal,J=F.onIdentityLinkClick,K=(0,v.Yq)().getLoginUrl;(0,o.L)(function(){return A(K({nextPath:window.location.pathname+window.location.search}))});var L=function(a){var b;G&&((0,k.ZP)("signin_for_saved_address_login_modal_click"),null==e||e(),J(),a.preventDefault()),b=d,(0,k.ZP)("action_address_signin_signup_".concat(b))},M=E?w.ZP.t("addressPickerStrings_signinForSavedAddressV2"):w.ZP.t("addressPickerStrings_signinForSavedAddress");if(!c||!(C||D))return null;var N=H?(0,g.jsx)(r.Z,{setShowSignInSignUpModal:I,onClose:function(){return I(!1)}}):null;return x?(0,g.jsxs)(g.Fragment,{children:[N,(0,g.jsx)(u.default,{isInline:!0,size:u.default.Sizes.Small,leadingIcon:i.Icon.Types.PersonUserLine,type:x&&f?u.default.Types.Plain:u.default.Types.TertiaryPill,href:z,onClick:L,children:null!=l?l:M})]}):(0,g.jsxs)(j.Z,{to:z,onClick:L,"data-testid":p.Am.identityLinkButton,className:b,children:[N,(0,g.jsx)(n,{color:i.Colors.TextPrimary,styles:E?i.Text.Styles.Bold16:void 0,children:null!=l?l:M})]})},A=(0,l.default)(z).withConfig({componentId:"sc-e32ff114-0"})(x(),function(a){return a.isAddressLabelEnabled?i.Spacing.XxSmall:i.Spacing.None},function(a){return a.isDarkBackground?i.Colors.SystemWhite:i.Colors.SystemGrey100}),B=(0,l.default)(z).withConfig({componentId:"sc-e32ff114-1"})(y(),function(a){return a.isDoorDash?i.Colors.SystemWhite:i.Colors.SystemGrey100},function(a){return a.textStyles&&a.textStyles}),C=z},98571:function(a,b,c){var d=c(85893),e=c(1968),f=c(67294),g=c(33041),h=c(94526),i=c(23685),j=c(3532),k=c(20688),l=function(a){var b=a.setShowSignInSignUpModal,c=a.onClose,l=a.showSignUpView,m=void 0!==l&&l,n=(0,h.m)().useGuidedLayout,o=(0,f.useState)(!0),p=o[0],q=o[1],r=(0,f.useCallback)(function(){q(!1)},[q]),s=(0,f.useCallback)(function(){(0,j.ZP)("signin_modal_closed"),b(!1),c()},[b,c]);return((0,f.useEffect)(function(){!p&&n&&s()},[p,n,s]),n)?p?(0,d.jsx)(e.Modal,{"data-testid":k.GO.loginModalGuided,shouldCloseOnEscapePress:!0,shouldCloseOnOverlayClick:!0,hasContentPadding:!1,hasHeaderPadding:!1,hasCloseButton:!1,shouldRenderStickyHeader:!1,onClose:r,children:(0,d.jsx)(g.default,{navigateToSignUp:m,closeGuidedModal:r,entry:g.Entry.MODAL})}):null:(0,d.jsx)(e.Modal,{"data-testid":k.GO.loginModal,hasContentPadding:!1,hasHeaderPadding:!0,hasCloseButton:!0,onClose:s,title:i.ZP.t("layoutStrings_header_signin_signup"),children:(0,d.jsx)(g.default,{navigateToSignUp:m,entry:g.Entry.MODAL})})};b.Z=l},66826:function(a,b,c){c.d(b,{J:function(){return p}});var d,e,f,g,h=c(67294),i=c(70179),j=c(93395),k=c(3532),l=c(94526),m=c(1864),n=c(4082),o=c(22434);(f=d||(d={})).SOCIAL="social",f.EXIT="exit",f.SUCCESS="success",f.HEIGHT="height",f.FAILED="failed",f.SEND_HEIGHT="sendHeight",f.SUCCESS_POST_LOGIN="successPostLogin",f.SUCCESS_POST_SIGNUP="successPostSignup",f.FAILED_POST_LOGIN="failedPostLogin",f.CLOSE_MODAL="closeModal",(g=e||(e={})).LOGIN="login",g.SIGNUP="signup";var p=function(a,b,c,f){var g=(0,n.bp)().clientCookies,p=(0,l.m)(),q=p.useGuidedLayout,r=p.queryParms,s=void 0===r?{}:r;b&&(s.is_iframe_modal=!0);var t=(0,j.useConsumerQuery)(),u=t.consumer,v=t.loading,w=(0,h.useRef)(),x=(0,h.useRef)(null),y=(0,h.useState)("500px"),z=y[0],A=y[1],B=u.isGuest,C=(0,i.Z)().setShowSignInSignUpModal,D=(0,o.Yq)().getLoginUrl,E=(0,h.useCallback)(function(a){var b=window.screen.width/2-225,c=window.screen.height/2-365;w.current&&!w.current.closed?w.current.location.replace(a):w.current=window.open(a,"window","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=".concat(450,",height=").concat(730,",top=").concat(c,", left=").concat(b))},[]),F=(0,h.useCallback)(function(a){if(!/^react-devtools/gi.test(a.data.source)){var b=function(a){if(window.removeEventListener("message",F),w&&w.current){var b;(0,k.ZP)("checkout_social_post_".concat(a,"_success")),null===(b=w.current)||void 0===b||b.close()}else(0,k.ZP)("checkout_post_".concat(a,"_success"));f?window.location.href=f:window.location.reload()};if(a.origin.includes("https://identity.doordash.com")||a.origin.includes("https://www.doordash.com")||a.origin.includes("https://www.trycaviar.com")||a.origin.includes("https://qa.trycaviar.com")||a.origin.includes("https://www.qa.trycaviar.com")||a.origin.includes("https://www.doordashtest.com")||a.origin.includes("https://www.identity-service.doorcrawl.com")||a.origin.includes("https://www.page-service.doordash.com")||a.origin.includes("https://www.page-service-qa.doordash.com")||a.origin.includes("https://page-service-qa.doordash.com")||a.origin.includes("https://identity-service.doorcrawl.com")){var h=null==a?void 0:a.data;if(null==h?void 0:h.action)switch(null==h?void 0:h.action){case d.SOCIAL:E(h.socialLink);break;case d.EXIT:null===(i=w.current)||void 0===i||i.close();break;case d.SUCCESS_POST_LOGIN:b(e.LOGIN);break;case d.SUCCESS_POST_SIGNUP:var i,j,l,n,o,p,q,r=new Date;r.setFullYear(r.getFullYear()+1),g.set(m.E.new_user_signup,!0,{expires:r}),b(e.SIGNUP);break;case d.SUCCESS:w&&w.current?((0,k.ZP)("checkout_social_iframe_login_success"),null===(j=w.current)||void 0===j||j.close()):(0,k.ZP)("checkout_iframe_login_success"),C(!1);break;case d.HEIGHT:(0,k.ZP)("checkout_iframe_height"),x.current&&A(h.height+"px");break;case d.SEND_HEIGHT:null===(l=x.current)||void 0===l||null===(n=l.contentWindow)||void 0===n||null===(o=n.postMessage)||void 0===o||o.call(n,{action:"VIEWPORT_HEIGHT",height:window.innerHeight},"*");break;case d.FAILED:(0,k.ZP)("checkout_account_login_failed"),null==w||null===(p=w.current)||void 0===p||p.close();break;case d.CLOSE_MODAL:null==c||c();break;case d.FAILED_POST_LOGIN:(0,k.ZP)("checkout_account_post_login_failed"),(0,k.ZP)("signin_modal_closed"),C(!1),null==w||null===(q=w.current)||void 0===q||q.close(),fetch("https://identity.doordash.com/logout").finally(function(){(0,k.ZP)("checkout_identity_iframe_logout"),window.location.reload()})}}}},[E,C,c,f,g,]),G=D({applyDefaultSettings:!0,settings:{layout:q?"guided_consumer_web_iframe":"identity_web_iframe",scope:"*",prompt:"none",responseType:"code"},additionalParams:s,navigateToSignUp:a,redirectBackAfterLogIn:!0});return{isGuest:B,loading:v,handlePostMessage:F,handleSocialLoginPopup:E,iframeRef:x,frameUrl:G,iframeHeight:z}}},70179:function(a,b,c){var d=c(67294),e=c(3532),f=c(4082),g=c(54425),h=["www.doordashtest.com"],i=function(){var a=(0,g.useExperience)().isDoorDash,b="true"===(0,f.bp)().clientCookies.get("dx_login_in_modal_enabled_override"),c=(0,d.useState)(!1),i=c[0],j=c[1],k=(0,d.useState)(!1),l=k[0],m=k[1],n=(0,d.useCallback)(function(){return j(!1)},[]),o=(0,d.useCallback)(function(){(0,e.ZP)("signin_modal_opened"),j(!0)},[]);return!b&&h.includes(window.location.host)?{showLoginInModalExpEnabled:!1,showSignInSignUpModal:!1,setShowSignInSignUpModal:j,showSignUpView:l,setShowSignUpView:m,hideSignInSignUpModal:n,onIdentityLinkClick:o}:{showLoginInModalExpEnabled:a||b,showSignInSignUpModal:i,setShowSignInSignUpModal:j,showSignUpView:l,setShowSignUpView:m,hideSignInSignUpModal:n,onIdentityLinkClick:o}};b.Z=i},674:function(a,b,c){c.d(b,{k6:function(){return r},se:function(){return q}});var d,e=c(85893);c(67294);var f=c(33016),g=c(10071),h=c(70573),i=c(93395),j=c(23685),k=c(47715),l=c(7297),m=c(87379);function n(){var a=(0,l.Z)(["\n  margin-top: ",";\n"]);return n=function(){return a},a}var o,p=m.default.div.withConfig({componentId:"sc-23643c8c-0"})(n(),g.Spacing.Small);(o=d||(d={})).CONTROL="CONTROL",o.TREATMENT_A="TREATMENT_A",o.TREATMENT_B="TREATMENT_B";var q=function(){var a=(0,h.useDVSString)(k.PR.addressBenefitReminder,d.CONTROL),b=[d.TREATMENT_A,d.TREATMENT_B,].includes(a),c=b?a===d.TREATMENT_A?j.ZP.t("addressPickerStrings_benefitReminder"):j.ZP.t("addressPickerStrings_benefitReminderWithExample"):"",e=(0,i.useConsumerQuery)().consumer.isGuest;return{benefitReminderText:c,hintText:e?c:"",isShowHint:e,isShowBanner:b&&!e}},r=function(){var a=q().benefitReminderText;return(0,e.jsx)(p,{children:(0,e.jsx)(f.ZP,{variant:f.ZP.Variants.Highlight,body:a||"",iconType:g.Icon.Types.InsightLine})})}},94526:function(a,b,c){c.d(b,{m:function(){return f}});var d=c(70573),e=c(47715),f=function(){return{useGuidedLayout:"treatment"===(0,d.useDVSString)(e.PR.guidedWebLookupLogin,"control")}}},20306:function(a,b,c){var d=c(54425),e=c(70573),f=c(47715),g=c(40097),h=c(4082);b.Z=function(){var a=(0,d.useExperience)().isStorefront,b=(0,e.useDVSBoolean)(f.PR.cxWebAddressLabelBE,!1),c=(0,g.F)(),i="true"===(0,h.bp)().clientCookies.get("ddweb-address-label");return{isAddressLabelEnabled:!a&&b||i,isEvaluating:!c}}},28766:function(a,b,c){var d=c(67294),e=["DE"],f=function(a){return(0,d.useMemo)(function(){return"string"==typeof a&&e.map(function(a){return"string"==typeof a?a.toLowerCase():""}).includes(a.toLowerCase())},[a])};b.Z=f},94251:function(a,b,c){c.d(b,{Z:function(){return r}});var d=c(10253),e=c(85893),f=c(56341),g=c(32834),h=c(60339),i=c(50308),j=c.n(i),k=c(67294),l=c(20306),m=c(34573),n=function(){return(0,e.jsxs)(m.default,{width:51,height:52,viewBox:"0 0 ".concat(51," ").concat(52),fill:"none",children:[(0,e.jsxs)("g",{opacity:"0.2",filter:"url(#filter0_f_2196_34378)",children:[(0,e.jsx)("path",{d:"M29.0954 40.5507C36.4485 39.8398 41.9436 37.0028 41.9436 33.6111C41.9436 29.6838 34.5755 26.5 25.4864 26.5C16.3974 26.5 9.0293 29.6838 9.0293 33.6111C9.0293 36.9998 14.5148 39.8349 21.8582 40.5488L23.5861 41.5123L25.4864 42.5L29.0954 40.5507Z",fill:"#191919"}),(0,e.jsx)("path",{d:"M23.3426 41.949L23.349 41.9526L23.3555 41.956L25.2558 42.9437L25.4909 43.0658L25.724 42.9399L29.2444 41.0385C32.9238 40.6723 36.1664 39.7776 38.5121 38.5274C40.8479 37.2825 42.4436 35.5964 42.4436 33.6111C42.4436 32.4616 41.9023 31.4074 41.0076 30.4934C40.1151 29.5816 38.8481 28.7834 37.3217 28.1238C34.2673 26.804 30.0825 26 25.4864 26C20.8904 26 16.7056 26.804 13.6512 28.1238C12.1248 28.7834 10.8578 29.5816 9.96527 30.4934C9.07054 31.4074 8.5293 32.4616 8.5293 33.6111C8.5293 35.5947 10.1223 37.2796 12.4546 38.5241C14.7959 39.7735 18.0324 40.6683 21.7056 41.0362L23.3426 41.949Z",stroke:"white"})]}),(0,e.jsxs)("g",{filter:"url(#filter1_d_2196_34378)",children:[(0,e.jsx)("path",{d:"M28.5087 34.1141C35.6575 32.5146 41 26.1312 41 18.5C41 9.66344 33.8366 2.5 25 2.5C16.1634 2.5 9 9.66344 9 18.5C9 26.1246 14.3332 32.5035 21.4726 34.1099L23.1525 36.2778L25 38.5L28.5087 34.1141Z",fill:"#191919"}),(0,e.jsx)("path",{d:"M22.7573 36.584L22.7626 36.5908L22.768 36.5974L24.6155 38.8196L25.0075 39.2911L25.3904 38.8123L28.7903 34.5625C36.076 32.8496 41.5 26.3088 41.5 18.5C41.5 9.3873 34.1127 2 25 2C15.8873 2 8.5 9.3873 8.5 18.5C8.5 26.3006 13.9126 32.8358 21.1865 34.557L22.7573 36.584Z",stroke:"#E7E7E7",strokeOpacity:"0.15"})]}),(0,e.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 28.5C25.5606 28.5 26.0955 28.2647 26.4743 27.8514L26.4773 27.8482L26.4823 27.8427L26.4982 27.8252L26.5526 27.7647C26.5986 27.7133 26.6637 27.6398 26.7452 27.5461C26.9081 27.3589 27.137 27.0903 27.41 26.7553C27.9541 26.0873 28.6824 25.1441 29.4143 24.0456C30.1429 22.9522 30.8985 21.6704 31.4773 20.3275C32.0483 19.0026 32.5 17.4984 32.5 15.9924C32.5 11.8519 29.1395 8.5 25 8.5C20.8605 8.5 17.5 11.8519 17.5 15.9924C17.5 17.4984 17.9517 19.0026 18.5227 20.3275C19.1015 21.6704 19.8571 22.9522 20.5857 24.0456C21.3176 25.1441 22.0459 26.0873 22.59 26.7553C22.863 27.0903 23.0919 27.3589 23.2548 27.5461C23.3363 27.6398 23.4014 27.7133 23.4474 27.7647L23.5018 27.8252L23.5177 27.8427L23.5227 27.8482L23.5257 27.8514C23.9045 28.2647 24.4394 28.5 25 28.5ZM25 18.5C26.3807 18.5 27.5 17.3807 27.5 16C27.5 14.6193 26.3807 13.5 25 13.5C23.6193 13.5 22.5 14.6193 22.5 16C22.5 17.3807 23.6193 18.5 25 18.5Z",fill:"white"}),(0,e.jsxs)("defs",{children:[(0,e.jsxs)("filter",{id:"filter0_f_2196_34378",x:"0.0292969",y:"17.5",width:"50.9141",height:"34.1309",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,e.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,e.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,e.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_2196_34378"})]}),(0,e.jsxs)("filter",{id:"filter1_d_2196_34378",x:"4",y:"0.5",width:"42",height:"46.582",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,e.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,e.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,e.jsx)("feOffset",{dy:"3"}),(0,e.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,e.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,e.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_2196_34378"}),(0,e.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_2196_34378",result:"shape"})]})]})]})},o=c(88544),p=c(86883),q=function(a){var b=a.customIcon,c=a.isPickup,d=a.isAddressLabelEnabled;return b?f.S.CUSTOM:c?f.S.STORE:d?f.S.CUSTOM:f.S.HOME},r=function(a){var b,c=a.defaultAddress,i=a.storeAddress,m=a.isPickup,r=void 0!==m&&m,s=a.isEditing,t=void 0!==s&&s,u=a.onChange,v=void 0===u?j():u,w=a.locationOverride,x=a.isCompact,y=a.customIcon,z=a.overlayComponent,A=a.mapOptions,B=(0,l.Z)().isAddressLabelEnabled,C=q({customIcon:y,isPickup:r,isAddressLabelEnabled:B}),D=(0,p.lr)({defaultAddress:c,isPickup:r,locationOverride:void 0===w?{lat:null,lng:null}:w,storeAddress:void 0===i?{lat:null,lng:null}:i}),E=[{type:C,position:D}];if(C===f.S.CUSTOM){var F={defaultIcon:{icon:(0,e.jsx)(n,{}),width:51,height:52,anchor:{width:25.5,height:26}}};b=y||B?F:void 0}var G=E.filter(function(a){return!(0,p.iz)(a)}).map(function(a){return a.position}),H=(0,d.Z)(k.useState(G),1)[0];return(0,e.jsxs)(o.h,{isCompact:void 0===x||x,children:[!!z&&(0,e.jsx)(o.X,{children:z}),(0,e.jsx)(g.D,{bounds:H,onDragEnd:v,mapOptions:A,children:function(a,c){return(0,e.jsx)("div",{children:E.map(function(d){return(0,e.jsx)(h.Z,{map:c,google:a,customIcon:b,position:d.position,markerType:d.type,lockToCenter:t&&d.type===f.S.HOME},d.type)})})}})]})}},88544:function(a,b,c){c.d(b,{X:function(){return j},h:function(){return i}});var d=c(7297),e=c(10071),f=c(87379);function g(){var a=(0,d.Z)(["\n  ","\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  ","\n  overflow: hidden;\n  & > div {\n    width: 100%;\n  }\n  position: relative;\n\n  ","\n"]);return g=function(){return a},a}function h(){var a=(0,d.Z)(["\n  height: 100%;\n  position: absolute;\n  z-index: 1;\n"]);return h=function(){return a},a}var i=f.default.div.withConfig({componentId:"sc-a55f4bf0-0"})(g(),function(a){return"height: ".concat(a.isCompact&&a.isLarge?5*e.Spacing.XxLarge:e.Spacing.XxLarge*(a.isCompact?3:10),"px;")},function(a){return a.isCompact?"border-radius: ".concat(e.BorderRadius.ButtonDefault,"px;"):""},function(a){return a.fillsContainer&&"height: 100%;"}),j=f.default.div.withConfig({componentId:"sc-a55f4bf0-1"})(h())},86883:function(a,b,c){c.d(b,{EC:function(){return m},IH:function(){return n},iz:function(){return h},lr:function(){return g}});var d=c(26042),e=c(56341),f=c(10071),g=function(a){var b,c,d,e=a.isPickup,f=a.storeAddress,g=a.locationOverride,h=a.defaultAddress;return e&&f&&f.lat&&f.lng?{lat:f.lat,lng:f.lng}:(null==g?void 0:g.lat)&&g.lng?{lat:g.lat,lng:g.lng}:h.manualLat&&h.manualLng?{lat:h.manualLat,lng:h.manualLng}:{lat:null!==(c=h.lat)&&void 0!==c?c:0,lng:null!==(d=h.lng)&&void 0!==d?d:0}},h=function(a){return a.type===e.S.CURRENT_POSITION},i=27+f.Spacing.XxxSmall,j=34+f.Spacing.XSmall,k={width:54,height:54,anchor:{width:27,height:i}},l={width:68,height:68,anchor:{width:34,height:j}},m=function(a){return{defaultIcon:(0,d.Z)({icon:a.value},k),hoverIcon:(0,d.Z)({icon:a.value},l),selectedIcon:(0,d.Z)({icon:a.value},l)}},n=function(a){var b=a.icon,c=a.marker;return{icon:b,labelText:c.text,labelTextStyle:{fontSize:"".concat(f.Text.Sizes.S14,"px")},position:c.coordinates}}},19641:function(a,b,c){var d=c(67294).createContext({messageLocation:null,result:null,recommendedActions:null,isCheckoutBlocked:!1});b.Z=d},64995:function(a,b,c){c.d(b,{n:function(){return u}});var d,e,f=c(10253),g=c(7297),h=c(85893),i=c(74180),j=c(80133),k=c(67294),l=c(11459),m=c(34788),n=c(19641);function o(){var a=(0,g.Z)(["\n  query validateConsumerAddressWithAddressLinkId($addressLinkId: ID!) {\n    validateConsumerAddress(addressLinkId: $addressLinkId) {\n      cartMessage {\n        code\n        type\n        message\n      }\n      validationResults {\n        code\n        type\n      }\n      userActions {\n        userActionType\n        isCheckoutBlocked\n      }\n    }\n  }\n"]);return o=function(){return a},a}function p(){var a=(0,g.Z)(["\n  query validateConsumerAddressWithGooglePlaceId($googlePlaceId: ID!) {\n    validateConsumerAddress(googlePlaceId: $googlePlaceId) {\n      cartMessage {\n        code\n        type\n        message\n      }\n      validationResults {\n        code\n        type\n      }\n      userActions {\n        userActionType\n        isCheckoutBlocked\n      }\n    }\n  }\n"]);return p=function(){return a},a}(d=e||(e={})).ADDRESS="ADDRESS",d.SUBPREMISE="SUBPREMISE";var q=(0,j.Ps)(o()),r=(0,j.Ps)(p()),s=function(a){if(!a)return null;switch(a){case l.R4.MESSAGE_ADDRESS_NOT_DELIVERABLE:case l.R4.MESSAGE_ADDRESS_NOT_DELIVERABLE_ALL_DELIVERIES_BLOCKED:case l.R4.MESSAGE_UNSPECIFIED:return e.ADDRESS;default:return e.SUBPREMISE}},t=function(a,b,c){var d,e,g,h=(0,f.Z)((0,i.t)(q,{fetchPolicy:"cache-and-network"}),2),j=h[0],l=h[1],m=l.data,n=l.error,o=(0,f.Z)((0,i.t)(r,{fetchPolicy:"cache-and-network"}),2),p=o[0],t=o[1],u=t.data,v=t.error;if((0,k.useEffect)(function(){(a||c)&&!b&&(c?p({variables:{googlePlaceId:c}}):a&&j({variables:{addressLinkId:a.id}}))},[a,c,b,j,p,]),b||n||v)return{messageLocation:null,result:null,recommendedActions:null,isCheckoutBlocked:!1};var w,x=m?m.validateConsumerAddress:null==u?void 0:u.validateConsumerAddress,y=null!==(g=null==x?void 0:x.cartMessage)&&void 0!==g?g:null;return{result:y,messageLocation:s(null==y?void 0:y.code),recommendedActions:(null==x?void 0:null===(d=x.userActions)||void 0===d?void 0:null===(e=d[0])||void 0===e?void 0:e.userActionType)||null,isCheckoutBlocked:!!(null==(w=(null==x?void 0:x.userActions)||null)?void 0:w.some(function(a){return a.isCheckoutBlocked}))}},u=function(a){var b=a.children,c=a.skip,d=a.address,e=a.googlePlaceId,f=(0,k.useContext)(m.Z).consumer,g=t(d||f.defaultAddress,c,e);return(0,h.jsx)(n.Z.Provider,{value:g,children:b})}},78259:function(a,b,c){c.d(b,{Am:function(){return p},Fv:function(){return q},MG:function(){return k},aw:function(){return o},s:function(){return n},sQ:function(){return j},xy:function(){return l}});var d=c(26042),e=c(69396),f=function(a,b){return a.find(function(a){return a.id===b})},g=function(a){return a.find(function(a){return a.isDefault})},h=function(a){var b=a.find(function(a){return a.isDefault});return b?b.optionId:null},i=function(a){var b=g(a);return b?b.id:null};function j(a,b){var c=f(a,b);return(null==c?void 0:c.placeholderText)||""}var k=function(a,b,c){return b.map(function(b){var d,e,f,g=(e=a,f=b.id,e.find(function(a){return a.optionId===f}));return g?{optionId:b.id,instructions:g.instructions||""}:{optionId:b.id,instructions:!(d=a).some(function(a){return"string"==typeof a.instructions})&&b.isDefault&&c||""}})};function l(a,b){var c=h(a);if(!a||!a.length||!c)return i(b);var d=f(b,c);return(null==d?void 0:d.isEnabled)?d.id:i(b)}var m=function(a,b){var c=l(a,b);return c?f(b,c):g(b)},n=function(a,b){var c=m(a,b);if(!c){var d=g(b);return null==d?void 0:d.displayString}return c.displayString||""};function o(a,b,c){var f=l(a,b);return k(a,b,c).map(function(a){return(0,e.Z)((0,d.Z)({},a),{isDefault:a.optionId===f})})}function p(a,b,c){var d=o(a,b,c).find(function(a){return a.isDefault});return d?d.instructions:""}function q(a,b,c){var d=o(a,b,c).find(function(a){return a.isDefault});return d?d.optionId:""}},79585:function(a,b,c){var d,e,f=c(26042),g=c(69396),h=c(10253),i=c(85893),j=c(67294),k=c(24906),l=c(63998),m=c(97073),n=c(10071),o=c(78259),p=c(94251),q=c(91848),r=c(4831),s=c(9205),t=c(22459),u=c(35953),v=c(80763),w=c(20688),x=c(95899),y=c(93395),z=c(28766),A=c(70573),B=c(51232),C=c(23685);(e=d||(d={})).ChangePin="ChangePin",e.Edit="Edit";var D=function(a){var b,c=a.saveButtonText,e=a.dropoffOptions,D=a.dropoffPreferences,E=a.onCancel,F=a.onAddressEdit,G=a.printableAddress,H=a.driverInstructions,I=a.subpremise,J=a.address,K=a.shortname,L=a.handleSubmitNewAddress,M=a.handleSubmitEditAddress,N=a.handleSubmitPinUpdate,O=a.showControlsOnlyForEditAddress,P=a.showEditAddressButton,Q=a.customizations,R=function(a,b){var c,d,e;ah((c=ag,d=a,e=b,c.slice().map(function(a){return a.optionId===d?{optionId:d,instructions:e}:a})))},S=function(a){a.nativeEvent.stopImmediatePropagation();var b=ad||void 0,c=(0,t.I0)(ag,ad),d=(0,t.Yt)(am),e=d.manualLat,h=d.manualLng,i={subpremise:Z||"",driverInstructions:c,dropoffOptionId:b,manualLat:e,manualLng:h,entryCode:aa||""};av(null);var j=(0,t.Uq)(J)?J.id:"";if(aa&&(0,v.eK)(j,aa.length),(0,t.Uq)(J)&&(null==T?void 0:T.id))M((0,g.Z)((0,f.Z)({},i),{addressId:J.id}));else{var k=L(i);if(void 0!==k){var l=J.lat,m=J.lng;k.then(function(){return(0,v.KS)({manualLat:e,manualLng:h,lat:l,lng:m,dropoffOptionId:b})}).catch(function(a){var c;av((null===(c=null==a?void 0:a.graphQLErrors[0])||void 0===c?void 0:c.message)||C.ZP.t("addressPickerStrings_addressEditSaveNewError")),(0,v.hJ)({manualLat:e,manualLng:h,lat:l,lng:m,dropoffOptionId:b})})}}},T=(0,y.useConsumerQuery)().consumer,U=j.useContext(A.DVSClientContext),V=U.state,W=(0,t._h)(),X=(0,z.Z)(J.countryCode),Y=(0,h.Z)(j.useState((X?T.lastName:I)||""),2),Z=Y[0],$=Y[1],_=(0,h.Z)(j.useState((null==J?void 0:J.entryCode)||""),2),aa=_[0],ab=_[1],ac=(0,h.Z)(j.useState((0,o.xy)(D,e)),2),ad=ac[0],ae=ac[1],af=(0,h.Z)(j.useState((0,o.MG)(D,e,H)),2),ag=af[0],ah=af[1],ai=(0,h.Z)(j.useState(d.Edit),2),aj=ai[0],ak=ai[1],al=(0,h.Z)(j.useState(null),2),am=al[0],an=al[1],ao=function(){return an(null)},ap=(0,h.Z)(j.useState(null),2),aq=ap[0],ar=ap[1],as=function(){return ar(null)},at=(0,h.Z)(j.useState(null),2),au=at[0],av=at[1],aw=Q||{},ax=aw.hideAdjustPin,ay=aw.hideDropOffOptions,az=function(a){a.nativeEvent.stopImmediatePropagation(),ao(),as(),ak(d.Edit)},aA=function(a){as(),(0,t.ng)(a,J)?(an(a),ak(d.Edit)):(ao(),ar(C.ZP.t("addressPickerStrings_addressEditPinLocationError")))},aB=function(a){as();var b=(0,t.Yt)(a),c=b.manualLat,e=b.manualLng;(0,t.Uq)(J)&&N(J.id,c,e).then(function(){ak(d.Edit),(0,v.ZU)({addressId:J.id,manualLat:c,manualLng:e})}).catch(function(){ar(C.ZP.t("addressPickerStrings_addressEditPinSaveError")),ao(),(0,v.UR)({addressId:J.id,manualLat:c,manualLng:e})})},aC=(0,i.jsx)(q.iP,{children:(0,i.jsx)(k.default,{onClick:function(a){a.nativeEvent.stopImmediatePropagation(),ak(d.ChangePin),(0,v.mo)()},type:k.default.Types.Primary,children:C.ZP.t("addressPickerStrings_addressEditAdjustPin")})});return aj===d.Edit?(0,i.jsxs)(n.StackChildren,{"data-anchor-id":w.ep.AddressEditForm,"data-testid":w.ep.AddressEditForm,children:[(0,i.jsx)(p.Z,{defaultAddress:J,locationOverride:am||(0,t.ey)(J),overlayComponent:void 0!==ax&&ax?null:(0,i.jsx)(q.Ko,{children:aC})}),(0,i.jsxs)(n.InlineChildren,{alignItems:n.InlineChildren.Alignment.Center,justifyContent:n.InlineChildren.Justification.SpaceBetween,children:[(0,i.jsx)(n.StackChildren,{size:n.StackChildren.Sizes.XxxSmall,children:(0,i.jsxs)(j.Fragment,{children:[(0,i.jsx)(B.Z,{onClick:function(){},orderCartId:null===(b=T.orderCart)||void 0===b?void 0:b.id}),(0,i.jsx)(n.Text,{styles:n.Text.Styles.Body1,children:"".concat(K).concat(I?" ".concat((0,r.Ay)(I)):"",", ").concat((0,r.gj)(K||"",G||""))})]})}),(O||(0,t.Uq)(J))&&!P?null:(0,i.jsx)(q.Bv,{children:(0,i.jsx)(k.default,{size:k.default.Sizes.Small,type:k.default.Types.FlatPrimary,onClick:F,children:C.ZP.t("addressPickerStrings_addressEdit")})})]}),(0,t.Uq)(J)&&(0,i.jsx)(j.Fragment,{children:(0,i.jsx)(l.TextField,{value:Z,size:l.TextField.Sizes.Small,onChange:function(a){return $(a)},placeholder:X?C.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_placeholder"):C.ZP.t("addressPickerStrings_apartmentInput_placeholder"),label:X?C.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_label"):C.ZP.t("addressPickerStrings_apartmentInput_label"),isLabelHidden:!1})}),W&&"ready"===V&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.TextField,{value:aa,size:l.TextField.Sizes.Small,onChange:function(a){ab(a)},placeholder:C.ZP.t("addressPickerStrings_entryCode_placeholder"),label:C.ZP.t("addressPickerStrings_entryCode_label"),description:C.ZP.t("addressPickerStrings_OptionalLabel")})}),!(void 0!==ay&&ay)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.StackChildren,{"data-testid":w.ep.AddressEditDropoffSelection,children:[(0,i.jsx)(x.default,{type:x.default.Types.FullBorder}),e.map(function(a){return(0,i.jsxs)(n.StackChildren,{size:n.Stack.Sizes.XSmall,children:[(0,i.jsx)(m.ZP,{label:a.displayString,name:"dropoff-type",isDisabled:!a.isEnabled,isSelected:a.id===ad,type:m.ZP.Types.Radio,onChange:function(){ae(a.id)}}),!a.isEnabled&&a.disabledMessage&&(0,i.jsx)(n.Text,{styles:n.Text.Styles.SectionSubtext,color:n.Text.Colors.TextPrimary,children:a.disabledMessage}),(0,i.jsx)(x.default,{type:x.default.Types.FullBorder})]},a.id)})]}),null!==ad?(0,i.jsx)(l.TextField,{value:(0,t.I0)(ag,ad),size:l.TextField.Sizes.Small,onChange:function(a){return R(ad,a)},isMultiline:2,isResizeable:!0,placeholder:(0,o.sQ)(e,ad||""),label:C.ZP.t("addressPickerStrings_addressDeliveryInstructions"),description:C.ZP.t("addressPickerStrings_OptionalLabel"),isLabelHidden:!1,"data-testid":w.ep.AddressEditDropoffInstructions}):null]}),au&&(0,i.jsx)(u.Z,{children:au}),(0,i.jsxs)(n.InlineChildren,{children:[(0,i.jsx)(k.default,{onClick:O||(0,t.Uq)(J)?E:F,type:k.default.Types.Tertiary,children:O?C.ZP.t("addressPickerStrings_addressEditCancel"):C.ZP.t("addressPickerStrings_addressEditBackButtonText")}),(0,i.jsx)(k.default,{"data-anchor-id":w.ep.AddressEditSave,onClick:S,children:c||C.ZP.t("addressPickerStrings_addressEditSave")})]})]}):(0,i.jsx)(s.Z,{address:J,onSubmit:(0,t.Uq)(J)?aB:aA,onCancel:az,draftCoordinates:am||(0,t.ey)(J),handleChangePinLocation:an,errorMessage:aq,shouldStackActionButtons:!1})};b.Z=D},78230:function(a,b,c){c.d(b,{K:function(){return k}});var d=c(85893),e=c(67294),f=c(12691),g=c(93146),h=c(67300),i=c(4082),j=c(3532),k=function(a){var b=a.landOnPickup,c=e.useContext(g.ZP).storeInformation,k=(0,i.bp)().isSSR,l=(0,f.tv)(),m=c.businessId,n=c.storeId,o={};b&&(o.pickup=!0,o.delivery=!1);var p=(0,h.mA)(o,m);return e.useEffect(function(){(0,j.ZP)("storefront_redirect_to_landing_page",{storeId:n,businessId:m}),k&&l.replace(p)},[p,k,l,m,n]),k?null:(0,d.jsx)(f.l_,{to:p})}},87708:function(a,b,c){c.d(b,{B:function(){return m},I:function(){return l}});var d=c(85893),e=c(67294),f=c(63998),g=c(11977),h=c(3532),i=c(74269),j=c(66897),k=function(){var a=(0,h.Sl)().track;return{trackErrorAppear:(0,j.W)(a)}},l=function(a){var b=(0,g.lO)().pageType,c=k().trackErrorAppear;return e.useEffect(function(){a.error&&c({internal_error_message:i.D.UncategorizedErrorFragment,client_error_id:i.N.Uncategorized,error_message:a.error,error_type:i.N.Uncategorized,origin:"ErrorFragment"},{message:a.error,page_type:b||"unknown_page_type_error_fragment"})},[a.error,b,c]),(0,d.jsx)(d.Fragment,{children:a.children})},m=function(a){var b=(0,g.lO)().pageType,c=k().trackErrorAppear;return e.useEffect(function(){a.error&&c({internal_error_message:i.D.UncategorizedErrorAppearPrism,client_error_id:i.N.Uncategorized,error_type:i.N.Uncategorized,origin:b||"unknown_origin",error_message:a.error},{message:a.error,page_type:b||"unknown_page_type_error_message"})},[a.error,b,c]),(0,d.jsx)(f.ErrorMessage,{error:a.error})}},68648:function(a,b,c){c.d(b,{p:function(){return h}});var d=c(67294),e=c(99171),f=c(93395),g=c(45166),h=function(){var a=(0,f.useConsumerQuery)().consumer,b=(0,g.S)().isStorePage,c=d.useContext(e.O),h=c.orderCart,i=c.isPersistentCartEnabled;return i&&b?h:a.orderCart}}}])