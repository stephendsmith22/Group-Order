"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43948],{43948:function(a,b,c){c.d(b,{FD:function(){return aC},RD:function(){return aK},RE:function(){return aJ},Vf:function(){return ah},WM:function(){return aH},YM:function(){return av},"_9":function(){return ai},aq:function(){return aB},dT:function(){return ag}});var d=c(47568),e=c(14924),f=c(26042),g=c(69396),h=c(7297),i=c(34051),j=c.n(i),k=c(93241),l=c(80133),m=c(41609),n=c.n(m),o=c(51112),p=c(59942),q=c(3532),r=c(4082),s=c(74269),t=c(50625),u=c(37333),v=c(44640),w=c(49188),x=c(23397),y=c(97405);function z(){var a=(0,h.Z)(["\n  fragment FacetV2ComponentFragment on FacetV2Component {\n    id\n    category\n  }\n"]);return z=function(){return a},a}function A(){var a=(0,h.Z)(["\n  fragment FacetV2TextFragment on FacetV2Text {\n    title\n    titleTextAttributes {\n      textStyle\n      textColor\n    }\n    subtitle\n    subtitleTextAttributes {\n      textStyle\n      textColor\n    }\n    accessory\n    accessoryTextAttributes {\n      textStyle\n      textColor\n    }\n    description\n    descriptionTextAttributes {\n      textStyle\n      textColor\n    }\n    custom {\n      key\n      value\n    }\n  }\n"]);return A=function(){return a},a}function B(){var a=(0,h.Z)(["\n  fragment FacetV2ImageFragment on FacetV2Image {\n    uri\n    placeholder\n    local\n    style\n    logging\n    events {\n      click {\n        name\n        data\n      }\n    }\n  }\n"]);return B=function(){return a},a}function C(){var a=(0,h.Z)(["\n  fragment FacetV2LayoutGridFragment on FacetV2LayoutGrid {\n    interRowSpacing\n    interColumnSpacing\n    minDimensionCount\n  }\n"]);return C=function(){return a},a}function D(){var a=(0,h.Z)(["\n  fragment FacetV2BaseFragment on FacetV2 {\n    id\n    childrenCount\n    component {\n      ...FacetV2ComponentFragment\n    }\n    name\n    text {\n      ...FacetV2TextFragment\n    }\n    images {\n      main {\n        ...FacetV2ImageFragment\n      }\n      icon {\n        ...FacetV2ImageFragment\n      }\n      background {\n        ...FacetV2ImageFragment\n      }\n      accessory {\n        ...FacetV2ImageFragment\n      }\n      custom {\n        key\n        value {\n          ...FacetV2ImageFragment\n        }\n      }\n    }\n    events {\n      click {\n        name\n        data\n      }\n    }\n    style {\n      spacing\n      background_color\n      border {\n        color\n        width\n        style\n      }\n      sizeClass\n    }\n    layout {\n      omitFooter\n      gridSpecs {\n        Mobile {\n          ...FacetV2LayoutGridFragment\n        }\n        Phablet {\n          ...FacetV2LayoutGridFragment\n        }\n        Tablet {\n          ...FacetV2LayoutGridFragment\n        }\n        Desktop {\n          ...FacetV2LayoutGridFragment\n        }\n        WideScreen {\n          ...FacetV2LayoutGridFragment\n        }\n        UltraWideScreen {\n          ...FacetV2LayoutGridFragment\n        }\n      }\n      dlsPadding {\n        top\n        right\n        bottom\n        left\n      }\n    }\n    custom\n    logging\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return D=function(){return a},a}function E(){var a=(0,h.Z)(["\n  fragment FacetV2Fragment on FacetV2 {\n    ...FacetV2BaseFragment\n    childrenMap {\n      ...FacetV2BaseFragment\n    }\n  }\n  ","\n"]);return E=function(){return a},a}function F(){var a=(0,h.Z)(["\n  fragment FacetV2PageFragment on FacetV2Page {\n    next {\n      name\n      data\n    }\n    onLoad {\n      name\n      data\n    }\n  }\n"]);return F=function(){return a},a}function G(){var a=(0,h.Z)(["\n  fragment FacetFeedV2ResultFragment on FacetFeedV2Result {\n    body {\n      id\n      header {\n        ...FacetV2Fragment\n      }\n      body {\n        ...FacetV2Fragment\n      }\n      layout {\n        omitFooter\n      }\n    }\n    page {\n      ...FacetV2PageFragment\n    }\n    header {\n      ...FacetV2Fragment\n    }\n    custom\n    logging\n  }\n  ","\n  ","\n"]);return G=function(){return a},a}function H(){var a=(0,h.Z)(["\n  query homePageFacetFeed(\n    $cursor: String\n    $filterQuery: String\n    $displayHeader: Boolean\n    $isDebug: Boolean\n    $cuisineFilterVerticalIds: String\n  ) {\n    homePageFacetFeed(\n      cursor: $cursor\n      filterQuery: $filterQuery\n      displayHeader: $displayHeader\n      isDebug: $isDebug\n      cuisineFilterVerticalIds: $cuisineFilterVerticalIds\n    ) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return H=function(){return a},a}function I(){var a=(0,h.Z)(["\n  query searchWithFilterFacetFeed(\n    $cursor: String\n    $filterQuery: String\n    $query: String!\n    $isDebug: Boolean\n    $fromFilterChange: Boolean\n    $serializedBundleGlobalSearchContext: String\n  ) {\n    searchWithFilterFacetFeed(\n      cursor: $cursor\n      filterQuery: $filterQuery\n      query: $query\n      isDebug: $isDebug\n      fromFilterChange: $fromFilterChange\n      serializedBundleGlobalSearchContext: $serializedBundleGlobalSearchContext\n    ) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return I=function(){return a},a}function J(){var a=(0,h.Z)(["\n  query multiLocationStoresFacetFeed($query: String!, $cursor: String!) {\n    multiLocationStoresFacetFeed(query: $query, cursor: $cursor) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return J=function(){return a},a}function K(){var a=(0,h.Z)(["\n  query autocompleteFacetFeed(\n    $query: String!\n    $serializedBundleGlobalSearchContext: String\n  ) {\n    autocompleteFacetFeed(\n      query: $query\n      serializedBundleGlobalSearchContext: $serializedBundleGlobalSearchContext\n    ) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return K=function(){return a},a}function L(){var a=(0,h.Z)(["\n  query openStoresCarousel($query: String!) {\n    openStoresCarousel(query: $query) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return L=function(){return a},a}function M(){var a=(0,h.Z)(["\n  query storeInfoPageFacetFeed($storeId: ID!) {\n    storeInfoPageFacetFeed(storeId: $storeId) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return M=function(){return a},a}function N(){var a=(0,h.Z)(["\n  query verticalPageFacetFeed(\n    $cursor: String!\n    $filterQuery: String\n    $urlQueryParams: String\n  ) {\n    verticalPageFacetFeed(\n      cursor: $cursor\n      filterQuery: $filterQuery\n      urlQueryParams: $urlQueryParams\n    ) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return N=function(){return a},a}function O(){var a=(0,h.Z)(["\n  query offersVerticalPageFacetFeed($cursor: String, $filterQuery: String) {\n    offersVerticalPageFacetFeed(cursor: $cursor, filterQuery: $filterQuery) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return O=function(){return a},a}function P(){var a=(0,h.Z)(["\n  query offersCarouselPageFacetFeed($cursor: String!, $filterQuery: String) {\n    offersCarouselPageFacetFeed(cursor: $cursor, filterQuery: $filterQuery) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return P=function(){return a},a}function Q(){var a=(0,h.Z)(["\n  query itemCarouselPageFacetFeed($cursor: String!) {\n    itemCarouselPageFacetFeed(cursor: $cursor) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return Q=function(){return a},a}function R(){var a=(0,h.Z)(["\n  query savedStoresFacetFeed($cursor: String) {\n    savedStoresFacetFeed(cursor: $cursor) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return R=function(){return a},a}function S(){var a=(0,h.Z)(["\n  query facetFeed($cursor: String!) {\n    facetFeed(cursor: $cursor) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return S=function(){return a},a}function T(){var a=(0,h.Z)(["\n  query getNotifications($lastEventId: Int, $cursor: String) {\n    getNotifications(lastEventId: $lastEventId, cursor: $cursor) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return T=function(){return a},a}function U(){var a=(0,h.Z)(["\n  query browsePageFacetFeed($cursor: String, $filterQuery: String) {\n    browsePageFacetFeed(cursor: $cursor, filterQuery: $filterQuery) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return U=function(){return a},a}function V(){var a=(0,h.Z)(["\n  query cuisineSeeAllPageFacetFeed(\n    $cursor: String\n    $filterQuery: String!\n    $cuisineFriendlyName: String\n  ) {\n    cuisineSeeAllPageFacetFeed(\n      cursor: $cursor\n      filterQuery: $filterQuery\n      cuisineFriendlyName: $cuisineFriendlyName\n    ) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return V=function(){return a},a}function W(){var a=(0,h.Z)(["\n  query preferenceModalFacetFeed(\n    $experienceType: PreferenceModalExperienceType\n  ) {\n    preferenceModalFacetFeed(experienceType: $experienceType) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return W=function(){return a},a}function X(){var a=(0,h.Z)(["\n  query collectionLandingPageFacetFeed(\n    $cursor: String!\n    $filterQuery: String!\n  ) {\n    collectionLandingPageFacetFeed(cursor: $cursor, filterQuery: $filterQuery) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return X=function(){return a},a}function Y(){var a=(0,h.Z)(["\n  query retailVerticalPageFeed(\n    $cursor: String!\n    $filterQuery: String!\n    $verticalPageType: VerticalPageType!\n    $utmMetadata: String\n  ) {\n    retailVerticalPageFeed(\n      cursor: $cursor\n      filterQuery: $filterQuery\n      verticalPageType: $verticalPageType\n      utmMetadata: $utmMetadata\n    ) {\n      ...FacetFeedV2ResultFragment\n    }\n  }\n  ","\n"]);return Y=function(){return a},a}var Z,$,_="X-Facets-Version",aa="X-Facets-Entry",ab=(0,l.Ps)(z()),ac=(0,l.Ps)(A()),ad=(0,l.Ps)(B()),ae=(0,l.Ps)(C()),af=(0,l.Ps)(D(),ab,ac,ad,ae),ag=(0,l.Ps)(E(),af),ah=(0,l.Ps)(F()),ai=(0,l.Ps)(G(),ag,ah),aj=(0,l.Ps)(H(),ai),ak=(0,l.Ps)(I(),ai),al=(0,l.Ps)(J(),ai),am=(0,l.Ps)(K(),ai),an=(0,l.Ps)(L(),ai),ao=(0,l.Ps)(M(),ai),ap=(0,l.Ps)(N(),ai),aq=(0,l.Ps)(O(),ai),ar=(0,l.Ps)(P(),ai),as=(0,l.Ps)(Q(),ai),at=(0,l.Ps)(R(),ai),au=(0,l.Ps)(S(),ai),av=(0,l.Ps)(T(),ai),aw=(0,l.Ps)(U(),ai),ax=(0,l.Ps)(V(),ai),ay=(0,l.Ps)(W(),ai),az=(0,l.Ps)(X(),ai),aA=(0,l.Ps)(Y(),ai),aB=["homePageFacetFeed","verticalPageFacetFeed","searchWithFilterFacetFeed","facetFeed",],aC=function(a){switch(a){case x.Dw.FACET:return"facetFeed";case x.Dw.AUTOCOMPLETE:return"autocompleteFacetFeed";case x.Dw.VERTICAL_PAGE:case x.Dw.MARKETING_LANDING_PAGE:return"verticalPageFacetFeed";case x.Dw.SEARCH_PAGE:case x.Dw.SEO_LANDING:case x.Dw.SEO_FOOD_DELIVERY_CUISINE:return"searchWithFilterFacetFeed";case x.Dw.OFFERS_VERTICAL_PAGE:return"offersVerticalPageFacetFeed";case x.Dw.OFFERS_CAROUSEL_LIST_PAGE:return"offersCarouselPageFacetFeed";case x.Dw.ITEM_CAROUSEL_LIST_PAGE:return"itemCarouselPageFacetFeed";case x.Dw.SAVED_STORES_PAGE:return"savedStoresFacetFeed";case x.Dw.BROWSE:return"browsePageFacetFeed";case x.Dw.CUISINE_SEE_ALL_PAGE:return"cuisineSeeAllPageFacetFeed";case x.Dw.MULTI_LOCATION_STORES:return"multiLocationStoresFacetFeed";case x.Dw.PREFERENCE_MODAL:return"preferenceModalFacetFeed";case x.Dw.COLLECTION:case x.Dw.SEO_FOOD_DELIVERY:return"collectionLandingPageFacetFeed";case x.Dw.RETAIL_VERTICAL_TAB_PAGE:return"retailVerticalPageFeed";case x.Dw.HOME_PAGE:default:return"homePageFacetFeed"}},aD=function(a){switch(a){case x.Dw.FACET:return au;case x.Dw.AUTOCOMPLETE:return am;case x.Dw.VERTICAL_PAGE:case x.Dw.MARKETING_LANDING_PAGE:return ap;case x.Dw.SEARCH_PAGE:case x.Dw.SEO_LANDING:case x.Dw.SEO_FOOD_DELIVERY_CUISINE:case x.Dw.SEO_NEAR_ME_CAROUSEL:return ak;case x.Dw.OFFERS_VERTICAL_PAGE:return aq;case x.Dw.OFFERS_CAROUSEL_LIST_PAGE:return ar;case x.Dw.ITEM_CAROUSEL_LIST_PAGE:return as;case x.Dw.SAVED_STORES_PAGE:return at;case x.Dw.BROWSE:return aw;case x.Dw.CUISINE_SEE_ALL_PAGE:return ax;case x.Dw.MULTI_LOCATION_STORES:return al;case x.Dw.PREFERENCE_MODAL:return ay;case x.Dw.COLLECTION:case x.Dw.SEO_FOOD_DELIVERY:return az;case x.Dw.RETAIL_VERTICAL_TAB_PAGE:return aA;case x.Dw.HOME_PAGE:default:return aj}},aE=["searchWithFilterFacetFeed"],aF=function(a){var b=a.isSSR,c=a.legoResponse,d=a.query,e=a.queryName;return!n()(c)||!b&&(!!aE.includes(e)&&""===d||Boolean(c))},aG=function(a){var b=a.entry,c=a.cursor,d=a.filterQuery,e=a.searchQuery,g=a.displayHeader,h=a.isDebug,i=a.additionalQueryVariables,j=aD(b),k=aC(b),l=(0,f.Z)({cursor:c,filterQuery:d,query:e,displayHeader:void 0===g||g,isDebug:void 0!==h&&h},i);return{query:j,queryName:k,variables:l}},aH=function(a){var b,c=a.entry,d=a.cursor,h=a.filterQuery,i=a.searchQuery,j=a.legoResponse,l=a.queryOptions,m=a.additionalQueryVariables,n=a.numberOfFacetsAboveFoldSSR,o=(0,r.bp)().isSSR,q=(0,v.Z)(),s=q.dispatch,t=q.enabled,x=(0,p.Z)(i),z=aG({entry:c,cursor:d,searchQuery:x,filterQuery:h,displayHeader:!0,isDebug:t,additionalQueryVariables:m}),A=z.query,B=z.queryName,C=z.variables,D=aF({isSSR:o,legoResponse:j,query:x,queryName:B}),E=(0,f.Z)({notifyOnNetworkStatusChange:!0,skip:D,fetchPolicy:o?"cache-first":"network-only",context:{headers:(0,g.Z)((0,f.Z)((0,e.Z)({},_,w.R0),w.ln),(0,e.Z)({},aa,c))},variables:C},l),F=(0,k.a)(A,E),G=F.data,H=F.loading,I=F.error,J=F.fetchMore,K="object"==typeof j?j:(0,y.Iv)((0,y.bP)(G),{entry:c,numberOfFacetsAboveFoldSSR:n}),L=null==K?void 0:null===(b=K.custom)||void 0===b?void 0:b.debug_info;if(t&&L){var M,N=JSON.parse((M=L).replace(/\r?\n|\r/g,""));s((0,u.MW)("".concat(B," Debug Info"),N))}var O=function(a){var b=a.newCursor,c=a.filter,d=a.update,e=a.cuisineFilterVerticalIds;J({variables:(0,g.Z)((0,f.Z)({},null==E?void 0:E.variables),{cursor:b,filterQuery:c,displayHeader:!1,cuisineFilterVerticalIds:e}),updateQuery:function(a,b){return d(a,b.fetchMoreResult)}})},P=function(a){var b=a.filter,c=a.update,d=a.fromFilterChange,e=a.cuisineFilterVerticalIds;return J({variables:(0,g.Z)((0,f.Z)({},null==E?void 0:E.variables),{filterQuery:b,displayHeader:!1,fromFilterChange:d,cuisineFilterVerticalIds:e}),updateQuery:function(a,b){return c(a,b.fetchMoreResult)}})};return{error:I,loading:H,fetchFiltered:P,fetchNewCursor:O,data:K}};(0,d.Z)(j().mark(function a(b){var c,d,h,i,k,l,m,n,p,r,u,v,x,z,A,B;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.entry,d=b.cursor,h=b.legoQuery,i=b.filterQuery,k=b.client,l=b.productComponent,m=b.additionalQueryVariables,a.prev=1,p=(n=aG({entry:c,cursor:d,searchQuery:h,filterQuery:i,displayHeader:!0,isDebug:!1,additionalQueryVariables:m})).query,r=n.queryName,u=n.variables,a.next=5,k.query({query:p,context:{headers:(0,g.Z)((0,f.Z)((0,e.Z)({},_,w.R0),w.ln),(0,e.Z)({},aa,c))},variables:u});case 5:if(x=(v=a.sent).data,z=v.errors,A=(0,y.Iv)((0,y.bP)(x),{entry:c}),!Boolean(null==z?void 0:z.length)){a.next=14;break}return console.error(z),B={client_error_id:s.N.Query,correlation_id:(0,o.xu)(z),component:null!=l?l:t.F.Home_Explore,error_code:"SSR_APOLLO_ERROR",error_title:"GraphQLError",error_message:(0,o.sU)(z),error_type:s.N.Query,internal_error_message:s.D.UncategorizedLegoError,origin:"resolveHomePageFacetFeedQuery",task_name:r},(0,q.hd)(B),a.abrupt("return",null);case 14:return a.abrupt("return",A);case 17:return a.prev=17,a.t0=a.catch(1),console.error(a.t0),a.abrupt("return",null);case 21:case"end":return a.stop()}},a,null,[[1,17]])}));var aI,aJ=($=(0,d.Z)(j().mark(function a(b,c){var d,e,f,g,h;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,d=ao,a.next=4,c.query({query:d,variables:{storeId:b}});case 4:if(f=(e=a.sent).data,g=e.errors,h=(0,y.Iv)((0,y.bP)(f)),!Boolean(null==g?void 0:g.length)){a.next=11;break}return console.error(g),a.abrupt("return",null);case 11:return a.abrupt("return",h);case 14:return a.prev=14,a.t0=a.catch(0),console.error(a.t0),a.abrupt("return",null);case 18:case"end":return a.stop()}},a,null,[[0,14]])})),function(a,b){return $.apply(this,arguments)}),aK=(aI=(0,d.Z)(j().mark(function a(b,c){var d,e,f,g;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.query({query:an,variables:{query:b}});case 3:if(e=(d=a.sent).data,f=d.errors,g=(0,y.Iv)((0,y.bP)(e)),!Boolean(null==f?void 0:f.length)){a.next=10;break}return console.error(f),a.abrupt("return",null);case 10:return a.abrupt("return",g);case 13:return a.prev=13,a.t0=a.catch(0),console.error(a.t0),a.abrupt("return",null);case 17:case"end":return a.stop()}},a,null,[[0,13]])})),function(a,b){return aI.apply(this,arguments)})},97405:function(a,b,c){c.d(b,{bP:function(){return C},pP:function(){return D},Iv:function(){return x},HZ:function(){return y}});var d=c(14924),e=c(26042),f=c(69396),g=c(29815),h=c(23397),i=c(10253),j=c(47741),k=function(a){var b;return null===a?a:(0,f.Z)((0,e.Z)({},a),{body:null===(b=a.body)||void 0===b?void 0:b.map(function(a){if((null===(b=a.header)||void 0===b?void 0:b.length)!==1||(null===(c=a.body)||void 0===c?void 0:c.length)!==1)return a;var b,c,g=(0,i.Z)(a.body,1)[0];return(0,j.Rn)(g)?(0,f.Z)((0,e.Z)({},a),{custom:(0,f.Z)((0,e.Z)({},a.custom),(0,d.Z)({},h.i1.CAROUSEL_BUTTONS,!0))}):a})})},l=function(a){if(null===a)return a;var b,c=null===(b=a.body)||void 0===b?void 0:b.map(function(a){var b,c,i,j,k;return(null===(b=a.body)||void 0===b?void 0:null===(c=b[0])||void 0===c?void 0:null===(i=c.component)||void 0===i?void 0:i.id)!==h.kF.CAROUSEL_VERTICALS?a:(0,f.Z)((0,e.Z)({},a),{header:(0,g.Z)(null!==(k=a.header)&&void 0!==k?k:[]).concat([null===(j=a.body)||void 0===j?void 0:j[0]]),body:a.body.slice(1),custom:(0,f.Z)((0,e.Z)({},a.custom),(0,d.Z)({},h.i1.STYLED_HEADER,!0))})});return(0,f.Z)((0,e.Z)({},a),{body:c})},m=function(a){if(null===a)return a;var b,c,k,l,m,n=function(a){var b,c,d,e=(0,i.Z)(null!==(d=null==a?void 0:a.body)&&void 0!==d?d:[],1)[0];return!!e&&((null===(b=e.component)||void 0===b?void 0:b.id)===h.kF.FILTER_CAROUSEL_CUISINE||(null===(c=e.component)||void 0===c?void 0:c.id)===h.kF.FILTER_CAROUSEL_CUISINE_GENERIC)},o=function(a){var b,c,d=(0,i.Z)(null!==(c=null==a?void 0:a.body)&&void 0!==c?c:[],1)[0];return!!d&&(null===(b=d.component)||void 0===b?void 0:b.id)===h.kF.ROW_HERO},p=null!==(l=a.body)&&void 0!==l?l:[],q=o(p[0]),r=q?[p[0]]:[],s=q?p.slice(3):p.slice(2),t=(0,i.Z)(q?p.slice(1):p,3),u=t[0],v=t[1],w=t[2],x=null,y=null;if(n(v)?(x=v,y=w):n(u)&&(x=u,y=v),!x||!y||!x.body||!y.header)return a;var z=(0,i.Z)(x.body,1)[0],A=(0,i.Z)(y.header,1)[0];if(!A||(null===(b=A.component)||void 0===b?void 0:b.id)!==h.kF.CAROUSEL_FILTER)return a;var B=function(){var a;return null===(a=z.children)||void 0===a?void 0:a.filter(function(a){var b,c;return(null===(b=a.events)||void 0===b?void 0:null===(c=b.click)||void 0===c?void 0:c.name)==h.dW.CUISINE_FILTER}).map(function(a){var b,c,d,e,f,g,h;return a.custom?{animated_cover_image_url:null===(b=a.custom)||void 0===b?void 0:b.animated_cover_image_url,cover_image_url:"",friendly_name:null!==(f=null===(c=a.custom)||void 0===c?void 0:c.friendly_name)&&void 0!==f?f:"",id:null!==(g=null===(d=a.custom)||void 0===d?void 0:d.cuisine_filter_id)&&void 0!==g?g:"",localized_friendly_name:null!==(h=null===(e=a.text)||void 0===e?void 0:e.title)&&void 0!==h?h:"",name:""}:[]})};return(0,f.Z)((0,e.Z)({},a),{body:(0,g.Z)(r).concat([x,(0,f.Z)((0,e.Z)({},y),{header:[(0,f.Z)((0,e.Z)({},A),{children:[(0,f.Z)((0,e.Z)({},z),{component:(0,f.Z)((0,e.Z)({},z.component),{id:h.kF.FILTER_COLLECTION_CUISINE}),children:[],text:{title:(0,j.Iu)("lego_cuisines")},custom:(0,f.Z)((0,e.Z)({},z.custom),(0,d.Z)({Cuisines:(null===(c=z.custom)||void 0===c?void 0:c.Cuisines)||B(),filter_id:(null===(k=z.custom)||void 0===k?void 0:k.filter_id)||h.Sm.CUISINE},h.i1.DISPLAY_WHEN_STICKS,!0))})].concat((0,g.Z)((null!==(m=A.children)&&void 0!==m?m:[]).filter(function(a){var b;return(null===(b=a.component)||void 0===b?void 0:b.id)!=h.kF.FILTER_COLLECTION_CUISINE})))}),]}),],(0,g.Z)(s))})},n=function(a,b){var c;return null===a||(null==b?void 0:b.entry)!==h.Dw.SAVED_STORES_PAGE?a:(0,f.Z)((0,e.Z)({},a),{body:null===(c=a.body)||void 0===c?void 0:c.map(function(a){var b;return(null===(b=a.body)||void 0===b?void 0:b.length)!==0?a:(0,f.Z)((0,e.Z)({},a),{body:[{children:[],component:{category:h.KU.ROW,id:h.kF.SAVED_STORES_EMPTY},id:"".concat(a.id,":").concat(h.kF.SAVED_STORES_EMPTY)},]})})})},o=function(a){var b;return null===a?a:(0,f.Z)((0,e.Z)({},a),{body:null===(b=a.body)||void 0===b?void 0:b.map(function(a){var b,c=[],d=[],g=function(){return d.length&&c.push({component:{category:h.KU.ROW,id:h.kF.ROW_ITEM_CONTAINER},children:d.splice(0,d.length)})};return null===(b=a.body)||void 0===b||b.forEach(function(a){var b,e;if((null===(b=a.component)||void 0===b?void 0:b.id)===h.kF.ROW_CARD_CONTAINER){d.push(a);return}if((null===(e=a.component)||void 0===e?void 0:e.id)===h.kF.DIVIDER_STANDARD&&d.length){d.push(a),g();return}c.push(a)}),g(),(0,f.Z)((0,e.Z)({},a),{body:c})})})},p=function(a){var b;return null===a?a:(0,f.Z)((0,e.Z)({},a),{body:null===(b=a.body)||void 0===b?void 0:b.map(function(a){var b,c=[],d=null,g=function(){d&&(c.push(d),d=null)};return null===(b=a.body)||void 0===b||b.forEach(function(a){var b;if((0,j.Rn)(a)&&d){c.push({component:{category:h.KU.ROW,id:h.kF.ROW_MINI_SECTION},children:[d,a]}),d=null;return}if(g(),(null===(b=a.component)||void 0===b?void 0:b.category)===h.KU.HEADER){d=a;return}c.push(a)}),g(),(0,f.Z)((0,e.Z)({},a),{body:c})})})},q=function(a){var b;return null===a?a:(0,f.Z)((0,e.Z)({},a),{body:null===(b=a.body)||void 0===b?void 0:b.map(function(a){var b,c=[],d=[],g=function(){return d.length&&c.push({component:{category:h.KU.ROW,id:h.kF.ROW_STORE_CONTAINER},children:d.splice(0,d.length)})};return null===(b=a.body)||void 0===b||b.forEach(function(a){var b,e,f,i,j,k,l,m,n="row.action:upsell"!==a.id&&(null===(b=a.component)||void 0===b?void 0:b.id)===h.kF.ROW_ACTION;if(null==a||null===(e=a.custom)||void 0===e||!e.is_grid_item){if((null===(f=a.component)||void 0===f?void 0:f.id)===h.kF.ROW_STORE||(null===(i=a.component)||void 0===i?void 0:i.id)===h.kF.ROW_STORE_DETAIL||(null===(j=a.component)||void 0===j?void 0:j.id)===h.kF.ROW_STORE_COMPACT||(null===(k=a.component)||void 0===k?void 0:k.id)===h.kF.ROW_ITEM_CONTAINER||(null===(l=a.component)||void 0===l?void 0:l.id)===h.kF.ROW_REORDER||(null===(m=a.component)||void 0===m?void 0:m.id)===h.kF.ROW_EXTERNAL_STORE||n){d.push(a);return}g(),c.push(a)}}),g(),(0,f.Z)((0,e.Z)({},a),{body:c})})})},r=function(a){var b;return null===a?a:(0,f.Z)((0,e.Z)({},a),{body:null===(b=a.body)||void 0===b?void 0:b.map(function(a){if(!a.header)return a;var b=(0,i.Z)(a.header,1)[0].component;return(null==b?void 0:b.id)===h.kF.CAROUSEL_FILTER||(null==b?void 0:b.id)===h.kF.CAROUSEL_TABS||(null==b?void 0:b.id)===h.kF.FILTER_CAROUSEL_CUISINE_GENERIC&&"collection-landing-page"==a.id?(0,f.Z)((0,e.Z)({},a),{custom:(0,f.Z)((0,e.Z)({},a.custom),(0,d.Z)({},h.i1.STICKY_HEADER,!0))}):a})})},s="empty-categories-landing-page-section-id",t=function(a,b){var c;return null===a||(null==b?void 0:b.entry)!==h.Dw.FACET?a:(null===(c=a.body)||void 0===c?void 0:c.length)===0?(0,f.Z)((0,e.Z)({},a),{body:[{id:"".concat(s),body:[{children:[],component:{category:h.KU.ROW,id:h.kF.ROW_EMPTY_PAGE_DEFAULT},custom:a.custom,id:"".concat(s,":").concat(h.kF.ROW_EMPTY_PAGE_DEFAULT)},]},]}):a},u=5,v=20,w=[h.kF.CARD_FLEXIBLE_ITEM_SQUARE,],x=function(a,b){if(null===a)return null;var c,d,g,h,i,j,s,u={numberOfTopLevelFacets:0,numberOfFacetsAboveFoldSSR:null==b?void 0:b.numberOfFacetsAboveFoldSSR};return[r,k,p,o,q,l,m,n,t,].reduce(function(a,c){return c(a,b)},(0,f.Z)((0,e.Z)({},a),{page:(0,f.Z)((0,e.Z)({},a.page),{next:(0,f.Z)((0,e.Z)({},null===(c=a.page)||void 0===c?void 0:c.next),{data:A(null===(d=a.page)||void 0===d?void 0:null===(g=d.next)||void 0===g?void 0:g.data)}),onLoad:(null===(h=a.page)||void 0===h?void 0:null===(i=h.onLoad)||void 0===i?void 0:i.map(function(a){return(0,f.Z)((0,e.Z)({},a),{data:A(a.data)})}))||[]}),custom:A(a.custom),logging:A(a.logging),header:y(a.header,0,u),body:(null===(j=a.body)||void 0===j?void 0:j.map(function(a){return(0,f.Z)((0,e.Z)({},a),{header:y(a.header,0,u),body:y(a.body,0,u)})}))||[]}))};function y(a,b,c){return null===a?null:(0,z(a,a.length,a.length,null!=b?b:0,c).unpacked)}function z(a,b,c,g,i){for(var j=[],k=0,l=c;l>0&&k!==b;){var m,n,o,p,q,r,s,t,x=a[l-=1],y=z(a,x.childrenCount||0,l,g+1,i),C=y.unpacked,D=y.newIndex;j.push((0,f.Z)((0,e.Z)({},x),{component:{id:"string"==typeof(null===(m=x.component)||void 0===m?void 0:m.id)&&(0,h.lM)(null===(n=x.component)||void 0===n?void 0:n.id)?x.component.id:null,category:"string"==typeof(null===(o=x.component)||void 0===o?void 0:o.category)&&(0,h.ah)(null===(p=x.component)||void 0===p?void 0:p.category)?x.component.category:null},custom:(0,f.Z)((0,e.Z)({},null!==(s=A(x.custom))&&void 0!==s?s:{}),{depth:g}),logging:A(x.logging),text:(0,f.Z)((0,e.Z)({},x.text),{custom:B(null===(q=x.text)||void 0===q?void 0:q.custom)}),images:(0,f.Z)((0,e.Z)({},x.images),{custom:B(null===(r=x.images)||void 0===r?void 0:r.custom)}),children:(null!=C?C:[]).map(function(a){return(0,f.Z)((0,e.Z)({},a),{custom:(0,f.Z)((0,e.Z)({},null!==(t=a.custom)&&void 0!==t?t:{}),{depth:g+1})})}),childrenMap:((null==x?void 0:x.childrenMap)||[]).reduce(function(a,b){return(0,f.Z)((0,e.Z)({},a),(0,d.Z)({},b.name,(0,f.Z)((0,e.Z)({},b),{logging:A(b.logging)})))},{})})),k+=1,l=D}var E={newIndex:l,unpacked:j.length?j.reverse():null};if(!i)return E;if(E.unpacked){var F=!0,G=!1,H=void 0;try{for(var I,J=function(){var a=I.value;if((null===(d=a.custom)||void 0===d?void 0:d.depth)===0){if((null===(g=a.component)||void 0===g?void 0:g.category)!==h.KU.DIVIDER&&(i.numberOfTopLevelFacets+=1),i.numberOfTopLevelFacets<=(null!==(j=null==i?void 0:i.numberOfFacetsAboveFoldSSR)&&void 0!==j?j:u)&&(a.custom=(0,f.Z)((0,e.Z)({},null!==(k=a.custom)&&void 0!==k?k:{}),{shouldRenderAboveFold:!0}),a.children&&a.children.length>0))for(var b=a.children.some(function(a){var b;return(null===(b=a.component)||void 0===b?void 0:b.id)&&!w.includes(a.component.id)})?a.children.length:Math.min(v,a.children.length),c=0;c<b;c++){var d,g,j,k,l,m=a.children[c];m.custom=(0,f.Z)((0,e.Z)({},null!==(l=m.custom)&&void 0!==l?l:{}),{shouldRenderAboveFold:!0})}}else if((null===(q=a.custom)||void 0===q?void 0:q.shouldRenderAboveFold)===!0&&a.children&&a.children.length>0){var n=!0,o=!1,p=void 0;try{for(var q,r,s=a.children[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var t,x=r.value;x.custom=(0,f.Z)((0,e.Z)({},null!==(t=x.custom)&&void 0!==t?t:{}),{shouldRenderAboveFold:!0})}}catch(y){o=!0,p=y}finally{try{n||null==s.return||s.return()}finally{if(o)throw p}}}},K=E.unpacked[Symbol.iterator]();!(F=(I=K.next()).done);F=!0)J()}catch(L){G=!0,H=L}finally{try{F||null==K.return||K.return()}finally{if(G)throw H}}}return E}function A(a){if(null==a)return null;try{return JSON.parse(a)}catch(b){return null}}function B(a){var b={};return null==a?null:(a.map(function(a){var c=a.key,d=a.value;b[c]=d}),b)}var C=function(a){return null==a?null:(0,h.W8)(a)?a.storeInfoPageFacetFeed:(0,h.p)(a)?a.openStoresCarousel:(0,h.DR)(a)?a.homePageFacetFeed:(0,h.SD)(a)?a.searchWithFilterFacetFeed:(0,h.gr)(a)?a.autocompleteFacetFeed:(0,h.mV)(a)?a.verticalPageFacetFeed:(0,h.mQ)(a)?a.facetFeed:(0,h.dG)(a)?a.offersVerticalPageFacetFeed:(0,h.Lj)(a)?a.offersCarouselPageFacetFeed:(0,h.bX)(a)?a.itemCarouselPageFacetFeed:(0,h.lm)(a)?a.savedStoresFacetFeed:(0,h.nN)(a)?a.browsePageFacetFeed:(0,h.vJ)(a)?a.cuisineSeeAllPageFacetFeed:(0,h.z6)(a)?a.getNotifications:(0,h.H8)(a)?a.multiLocationStoresFacetFeed:(0,h.Xy)(a)?a.preferenceModalFacetFeed:(0,h.fI)(a)?a.collectionLandingPageFacetFeed:(0,h.YV)(a)?a.retailVerticalPageFeed:null},D=function(a){var b,c=a.prev,d=a.next,i=a.append,j=void 0===i||i,k=a.skip,l=a.updates,m=C(c),n=null!==d?C(d):null;if(null===m||null===n)return c;var o=(0,f.Z)((0,e.Z)({},m,n.custom?{custom:n.custom}:{},n.logging?{logging:n.logging}:{},(null===(b=n.header)||void 0===b?void 0:b.length)?{header:n.header}:{}),{page:null!==n.page?(0,e.Z)({},n.page):{__typename:"FacetV2Page",next:null,onLoad:null},body:(0,g.Z)((m.body||[]).map(function(a){return(null==l?void 0:l.length)?F(a,n,l):E(a,n,j,k)}))});return(0,h.SD)(c)?{searchWithFilterFacetFeed:o}:(0,h.gr)(c)?{autocompleteFacetFeed:o}:(0,h.mV)(c)?{verticalPageFacetFeed:o}:(0,h.mQ)(c)?{facetFeed:o}:(0,h.dG)(c)?{offersVerticalPageFacetFeed:o}:(0,h.lm)(c)?{savedStoresFacetFeed:o}:(0,h.nN)(c)?{browsePageFacetFeed:o}:(0,h.vJ)(c)?{cuisineSeeAllPageFacetFeed:o}:(0,h.H8)(c)?{multiLocationStoresFacetFeed:o}:(0,h.fI)(c)?{collectionLandingPageFacetFeed:o}:(0,h.YV)(c)?{retailVerticalPageFeed:o}:{homePageFacetFeed:o}},E=function(a,b,c,d){var h,i=null===(h=b.body)||void 0===h?void 0:h.find(function(b){var c;return b.id===a.id&&!(null==d?void 0:null===(c=d.section)||void 0===c?void 0:c.some(function(a){return a===b.id}))});return c?(0,f.Z)((0,e.Z)({},a),{body:(0,g.Z)(a.body||[]).concat((0,g.Z)((null==i?void 0:i.body)||[]))}):i||a},F=function(a,b,c){var d=c.filter(function(b){return b.section_id===a.id}),f=(0,e.Z)({},a);return d.forEach(function(c){var d,e,h,i,j,k,l=(b.body||[]).find(function(a){return a.id===c.section_id});if(!l)return f;var m=G(a,c),n=null===(d=a[c.type])||void 0===d?void 0:d[m],o=null===(e=l[c.type])||void 0===e?void 0:e[G(l,c)];-1!==m&&n&&o?(o.childrenCount=o.childrenCount||0,o.childrenCount+=n.childrenCount||0,null===(i=f[c.type])||void 0===i||(h=i).splice.apply(h,[m,1].concat((0,g.Z)(l[c.type]||[])))):null===(k=f[c.type])||void 0===k||(j=k).push.apply(j,(0,g.Z)(l[c.type]||[]))}),f},G=function(a,b){switch(b.type){case h.Vx.HEADER:return(a.header||[]).findIndex(function(a){return a.id===b.facet_id});case h.Vx.BODY:return(a.body||[]).findIndex(function(a){return a.id===b.facet_id});default:return-1}}}}])