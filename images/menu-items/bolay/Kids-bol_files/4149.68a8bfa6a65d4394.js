"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4149],{71406:function(a,b,c){c.d(b,{B7:function(){return m},HC:function(){return p},K1:function(){return j},Lf:function(){return l},iO:function(){return o},pc:function(){return k},sX:function(){return n}});var d=c(7297),e=c(10071),f=c(87379);function g(){var a=(0,d.Z)(["\n  min-width: ",";\n  width: ",";\n  max-width: ",";\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.2);\n  max-height: ",";\n  overflow: auto;\n  @media screen and (max-width: ","px) {\n    max-width: ",";\n    min-width: ",";\n  }\n"]);return g=function(){return a},a}function h(){var a=(0,d.Z)(["\n  width: ",";\n  height: ",";\n"]);return h=function(){return a},a}function i(){var a=(0,d.Z)(["\n  background: ",";\n  cursor: pointer;\n  &:focus,\n  &:hover {\n    background: ",";\n    outline: none;\n  }\n"]);return i=function(){return a},a}var j="40px",k="330px",l="440px",m="330px",n=f.default.div.withConfig({componentId:"sc-2b220d17-0"})(g(),m,l,l,"550px",e.Breakpoints.Mobile,k,k),o=f.default.div.withConfig({componentId:"sc-2b220d17-1"})(h(),j,j),p=f.default.div.withConfig({componentId:"sc-2b220d17-2"})(i(),e.Colors.BackgroundPrimary,e.Colors.BackgroundSecondary)},4149:function(a,b,c){c.d(b,{Z:function(){return U}});var d,e,f=c(10253),g=c(29815),h=c(85893),i=c(67294),j=c(23279),k=c.n(j),l=c(10071),m=c(39838),n=c(63998),o=c(26042),p=c(69396),q=c(31280),r=c(11766),s=c(41875),t=c(846),u=c(68470),v=c(31063),w=c(99699),x=c(22501),y=function(a){var b=a.searchQueryTerm,c=a.searchItem,d=a.isHighlightInverted,e=void 0!==d&&d,f=a.isProduct,g=void 0!==f&&f;if(!c)return null;var i=function(a){return e?a.toLowerCase()===b.toLowerCase()?a:(0,h.jsx)("strong",{children:a}):a.toLowerCase()===b.toLowerCase()?(0,h.jsx)("strong",{children:a}):a},j=function(){var a=c||"";if(g)return a;var d,e=a.split(RegExp("(".concat((d=b).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"ig"));return(0,h.jsx)("span",{children:e.map(function(a,b){return(0,h.jsx)("span",{children:i(a)},b)})})};return(0,h.jsx)("span",{children:(0,h.jsx)(l.Text,{color:l.Text.Colors.TextSecondary,family:l.Text.Families.SansSerif,styles:l.Text.Styles.FieldMediumInput,size:l.Text.Sizes.S16,children:j()})})},z=c(71406),A=c(7297),B=c(23685),C=c(87379);function D(){var a=(0,A.Z)(["\n  background: ",";\n  cursor: pointer;\n  &:focus,\n  &:hover {\n    background: ",";\n    outline: none;\n  }\n"]);return D=function(){return a},a}function E(){var a=(0,A.Z)(["\n  width: ",";\n  height: ","px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]);return E=function(){return a},a}var F,G=function(a){var b=a.idx,c=a.onKeyDown,d=a.onShoppingListEntryClicked;return(0,h.jsx)(H,{tabIndex:-1,onKeyDown:c,"data-anchor-id":t.D.StoreSearch.AutoCompleteListItems.AutoCompleteListItem,onClick:d,"data-accessibility-id":"test-list-cell-".concat(b),"data-testid":"SearchBarEntrypointItem",children:(0,h.jsx)(q.ZP,{"tab-index":-1,accessibilityRole:"listitem",iconAlignment:q.ZP.Alignment.Baseline,titleMaxLines:2,title:(0,h.jsx)(y,{searchQueryTerm:"",searchItem:B.ZP.t("shopping_list_search_bar_suggestion"),isHighlightInverted:!0}),insetSize:l.Inset.Sizes.Small,renderBeforeContent:function(){return(0,h.jsx)(I,{"data-testid":"SearchBarEntrypointIcon",children:(0,h.jsx)(l.Icon,{type:q.ZP.IconTypes.List,size:l.Icon.Sizes.Medium})})},iconEnd:{type:q.ZP.IconTypes.ChevronRight,size:l.Icon.Sizes.Medium,isInteractive:!1},separatorType:q.ZP.SeparatorTypes.FullBorder,size:q.ZP.Sizes.Small})})},H=C.default.div.withConfig({componentId:"sc-37bdda4a-0"})(D(),l.Colors.SystemTeal0,l.Colors.SystemTeal10),I=C.default.div.withConfig({componentId:"sc-37bdda4a-1"})(E(),z.K1,l.Spacing.Medium);(F=d||(d={})).RETAIL_ITEM="retail_item",F.RETAIL_KEYWORD="retail_keyword",F.SEARCH_SUGGESTION="search_suggestion",F.SHOPPING_LIST_ENTRYPOINT="list_entry";var J=function(a){var b=a.itemsList,c=a.isFocused,e=a.query,f=a.onProductClick,g=a.onSuggestionClick,j=a.onNavigateToSearch,k=a.onKeyDown,m=a.loyaltyCode,n=a.storeId,A=a.isLoyaltyPricingEnabled,B=a.onShoppingListEntryClicked,C=(0,s.r)(u.gH.AUTO_COMPLETE).page;if(!b||!c)return null;var D={attr_src:u.xH.Search,is_autocomplete_result:!0,search_term:e};return(0,h.jsx)(z.sX,{"data-anchor-id":t.D.StoreSearch.AutoCompleteListItems.Id,"data-accessibility-id":"in-store-search-list-items",children:b.map(function(a,b){if(!a)return null;var c,s,E,F,H,I,J,K,L,M,N,O,P,Q,R,S={loyaltyCode:m,product:{id:null!==(H=null===(c=a.matchedItem)||void 0===c?void 0:c.id)&&void 0!==H?H:"",menuId:"",name:null!==(I=null===(s=a.matchedItem)||void 0===s?void 0:s.name)&&void 0!==I?I:"",description:null!==(J=null===(E=a.matchedItem)||void 0===E?void 0:E.description)&&void 0!==J?J:"",priceList:null!==(K=null===(F=a.matchedItem)||void 0===F?void 0:F.priceList)&&void 0!==K?K:[]},productIndex:b,storeId:n||"",extendedTrackingDetails:D,uiViewContainer:u.gH.AUTO_COMPLETE,page:C},T=(0,w.Q5)(S),U=function(c){return(0,h.jsx)(z.HC,{tabIndex:-1,onKeyDown:k,"data-accessibility-id":"test-list-cell-".concat(b),"data-anchor-id":t.D.StoreSearch.AutoCompleteListItems.AutoCompleteListItem,onClick:c,children:(0,h.jsx)(q.ZP,{"tab-index":-1,accessibilityRole:"listitem",iconAlignment:q.ZP.Alignment.Baseline,titleMaxLines:1,title:(0,h.jsx)(y,{searchQueryTerm:e,searchItem:(null==a?void 0:a.match)||"",isHighlightInverted:!0}),insetSize:l.Inset.Sizes.Small,iconEnd:{type:q.ZP.IconTypes.Search,size:l.Icon.Sizes.Medium,isInteractive:!1},separatorType:q.ZP.SeparatorTypes.FullBorder,size:q.ZP.Sizes.Small})},b)},V=function(){var b;j({searchQuery:null!==(b=null==a?void 0:a.match)&&void 0!==b?b:"",searchKey:e,disableSpellCheck:!0})};return(null==a?void 0:a.type)===d.RETAIL_ITEM?(0,i.createElement)(w.ZP,(0,p.Z)((0,o.Z)({},S),{key:b}),(0,h.jsx)(z.HC,{tabIndex:-1,onKeyDown:k,"data-accessibility-id":"test-list-cell-".concat(b),"data-anchor-id":t.D.StoreSearch.AutoCompleteListItems.AutoCompleteListItem,onClick:function(){var c,d;f({product:null==a?void 0:a.matchedItem,productId:null!==(d=null==a?void 0:null===(c=a.matchedItem)||void 0===c?void 0:c.id)&&void 0!==d?d:"",position:b}),T()},children:(0,h.jsx)(q.ZP,{"tab-index":-1,accessibilityRole:"listitem",iconAlignment:q.ZP.Alignment.Baseline,titleMaxLines:2,subtextMaxLines:1,title:(0,h.jsx)(y,{searchQueryTerm:e,searchItem:(null==a?void 0:a.match)||"",isHighlightInverted:!0,isProduct:!0}),subtext:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v.e,{priceList:null!==(O=null===(L=a.matchedItem)||void 0===L?void 0:L.priceList)&&void 0!==O?O:null,displayUnit:null!==(P=null===(M=a.matchedItem)||void 0===M?void 0:M.unit)&&void 0!==P?P:"",textSize:v.T.Medium,"data-anchor-id":t.D.StoreSearch.AutoCompleteListItems.PriceLabel,matchedItem:a.matchedItem,loyaltyCode:m}),A&&!m&&(0,h.jsx)(x.f,{priceList:null!==(Q=null===(N=a.matchedItem)||void 0===N?void 0:N.priceList)&&void 0!==Q?Q:null,textSize:l.Text.Sizes.S12,lineHeight:l.Spacing.Small,"data-anchor-id":t.D.StoreSearch.AutoCompleteListItems.LoyaltyPriceLabel})]}),renderBeforeContent:function(){var b;return(0,h.jsx)(z.iO,{children:(0,h.jsx)(r.Z,{url:(null==a?void 0:null===(b=a.matchedItem)||void 0===b?void 0:b.imageUrl)||"",aspectRatio:"1:1",imageHeight:"".concat(z.K1)})})},insetSize:l.Inset.Sizes.Small,iconEnd:{type:q.ZP.IconTypes.ChevronRight,size:l.Icon.Sizes.Medium,isInteractive:!1},separatorType:q.ZP.SeparatorTypes.FullBorder,size:q.ZP.Sizes.Small})})):a.type===d.SEARCH_SUGGESTION?U(function(){return g(null!==(R=a.match)&&void 0!==R?R:"")}):a.type===d.SHOPPING_LIST_ENTRYPOINT?(0,h.jsx)(G,{idx:b,onKeyDown:k,onShoppingListEntryClicked:B},b):U(V)})})},K=c(28006),L=c(80133),M=c(74180),N=c(97251),O=c(56141);function P(){var a=(0,A.Z)(["\n  query convenienceSearchAutoCompleteQueryV2(\n    $input: RetailSearchAutoCompleteInput!\n  ) {\n    retailSearchAutoComplete(input: $input) {\n      query\n      searchResults {\n        match\n        type\n        matchedItem {\n          id\n          name\n          description\n          imageUrl\n          price {\n            displayString\n            currency\n            decimalPlaces\n            unitAmount\n          }\n          priceList {\n            ...PriceFragment\n          }\n          unit\n          quickAddContext {\n            ...QuickAddContextFragment\n          }\n        }\n        structuredFormatting {\n          start\n          end\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return P=function(){return a},a}var Q,R=(0,L.Ps)(P(),N.rG,O.a),S=c(11890);(Q=e||(e={})).RETAIL_ITEM="retail_item",Q.RETAIL_KEYWORD="retail_keyword",Q.SEARCH_SUGGESTION="search_suggestion",Q.SHOPPING_LIST_ENTRYPOINT="list_entry";var T=function(a){var b=a.fixedListItem,c=a.isFocused,d=a.isLoading,f=a.focusIndex,g=a.query,i=a.onProductClick,j=a.onSuggestionClick,k=a.onNavigateToSearch,l=a.onKeyDown,m=a.loyaltyCode,n=a.storeId,o=a.onShoppingListEntryClicked,p=a.data;return(0,h.jsxs)(h.Fragment,{children:[(null==b?void 0:b.type)===e.SHOPPING_LIST_ENTRYPOINT?(0,h.jsx)(J,{itemsList:[b],isFocused:c,isLoading:d,focusIndex:f,query:g,onKeyDown:l,onNavigateToSearch:k,onProductClick:function(a){var b=a.product,c=a.productId,d=a.position;return i({data:p,product:b,productId:c,position:d})},onSuggestionClick:j,loyaltyCode:m,storeId:n,isLoyaltyPricingEnabled:!0,onShoppingListEntryClicked:o}):null,(0,h.jsx)(K.sb,{"data-testid":"AutoCompleteLoader",children:(0,h.jsx)(S.default,{})})]})},U=function(a){var b,c=a.storeId,e=a.storeUrlSlug,j=a.suggestions,o=a.businessName,p=void 0===o?"":o,q=a.loyaltyCode,r=void 0===q?"":q,s=a.isFlippedTheme,u=void 0!==s&&s,v=a.shouldAutomaticallyFlip,w=a.onNavigateToSearch,x=a.onProductClick,y=a.onAutoCompleteCompleted,z=a.showShoppingListEntry,A=void 0!==z&&z,C=a.onShoppingListEntryClicked,D=void 0===C?function(){}:C,E=(0,f.Z)(i.useState(""),2),F=E[0],G=E[1],H=(0,f.Z)(i.useState(""),2),I=H[0],L=H[1],N=(0,f.Z)(i.useState(!1),2),O=N[0],P=N[1],Q=(0,f.Z)(i.useState(-1),2),S=Q[0],U=Q[1],V=i.useRef(null),W=i.useRef(!1),X=(0,f.Z)((b={onCompleted:function(a){return null==y?void 0:y(a)}},(0,M.t)(R,{onCompleted:function(){var a,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Boolean((a=c)&&a.retailSearchAutoComplete&&"RetailSearchAutoComplete"===a.retailSearchAutoComplete.__typename)){var d=b.onCompleted;d&&Boolean(null==c?void 0:c.retailSearchAutoComplete)&&d(c)}},errorPolicy:"all"})),2),Y=X[0],Z=X[1],$=Z.data,_=Z.error,aa=Z.loading,ab=i.useRef(k()(function(a,b){L(a),a.length>0&&Y({variables:{input:{query:a,storeId:b}}})},500));i.useEffect(function(){ab.current(F,null!=e?e:c)},[F,c,e]);var ac=function(){return{match:I,type:d.RETAIL_KEYWORD}},ad=function(){var a;return null!==(a=null==j?void 0:j.map(function(a){return{match:a,type:d.SEARCH_SUGGESTION}}))&&void 0!==a?a:[]},ae=function(){var a,b,c=[],e=null==$?void 0:null===(a=$.retailSearchAutoComplete)||void 0===a?void 0:a.searchResults;return""===I?c=ad():_?c=[ac()]:e&&(c=null!==(b=(0,g.Z)(e).concat([ac()]).filter(function(a){return!!a}))&&void 0!==b?b:[]),A&&c.unshift({match:"",type:d.SHOPPING_LIST_ENTRYPOINT}),c},af=function(){P(!0)},ag=function(){if(U(-1),null==V?void 0:V.current){var a=V.current.querySelector("input");a&&a.focus()}},ah=function(){W.current?W.current=!1:(P(!1),U(-1))},ai=function(){if(S<ae().length-1){var a=document.querySelector('[data-accessibility-id="test-list-cell-'.concat(S+1,'"]'));U(S+1),a&&a.focus()}},aj=function(a){switch(a.key){case"Tab":case"Escape":ah();break;case"Enter":w({searchQuery:F,searchKey:null});break;case"ArrowDown":a.preventDefault(),W.current=!0,ai();break;case"ArrowUp":W.current=!0,a.preventDefault(),ak()}},ak=function(){if(S>0){var a=document.querySelector('[data-accessibility-id="test-list-cell-'.concat(S-1,'"]'));U(S-1),a&&a.focus()}else ag()},al=function(a){switch(a.key){case"Escape":W.current=!1;break;case"Tab":a.preventDefault(),W.current=!1,ah();break;case"Enter":var b,c,e=ae()[S];if((null==e?void 0:e.type)===d.RETAIL_ITEM&&"matchedItem"in e){x({productId:null!==(c=null==e?void 0:null===(b=e.matchedItem)||void 0===b?void 0:b.id)&&void 0!==c?c:""});break}if((null==e?void 0:e.type)===d.SEARCH_SUGGESTION&&"match"in e){am(e.match);break}if((null==e?void 0:e.type)===d.SHOPPING_LIST_ENTRYPOINT&&"match"in e){D();break}w({searchQuery:null==e?void 0:e.match,searchKey:F});break;case"ArrowDown":a.preventDefault(),ai();break;case"ArrowUp":a.preventDefault(),ak()}},am=function(a){ag(),G(a)};return(0,h.jsx)(m.AnchoredLayer,{position:u?m.AnchoredLayer.Positions.BottomRight:m.AnchoredLayer.Positions.BottomLeft,shouldAutomaticallyFlip:void 0!==v&&v,offset:[m.AnchoredLayer.Offset.None,m.AnchoredLayer.Offset.XxxSmall],content:function(){var a=ae();if(O&&(F.length>0||a.length>0)){if(aa)return(0,h.jsx)(T,{fixedListItem:a[0],isFocused:O,isLoading:aa,focusIndex:S,query:F,onKeyDown:al,onNavigateToSearch:w,onProductClick:function(a){var b=a.product,c=a.productId,d=a.position,e=a.data;return x({data:e,product:b,productId:c,position:d})},onSuggestionClick:am,loyaltyCode:r,storeId:c,onShoppingListEntryClicked:D});if(a.length>0&&!aa)return(0,h.jsx)(J,{itemsList:a,isFocused:O,isLoading:aa,focusIndex:S,query:F,onKeyDown:al,onNavigateToSearch:w,onProductClick:function(a){var b=a.product,c=a.productId,d=a.position;return x({data:$,product:b,productId:c,position:d})},onSuggestionClick:am,loyaltyCode:r,storeId:c,isLoyaltyPricingEnabled:!0,onShoppingListEntryClicked:D})}return null}(),boundariesPadding:{top:m.AnchoredLayerSpacing.XxxLarge,bottom:m.AnchoredLayerSpacing.XxxLarge,left:m.AnchoredLayerSpacing.None,right:m.AnchoredLayerSpacing.None},children:(0,h.jsx)(K.kN,{ref:V,children:(0,h.jsx)(l.Theming,{overrides:{Colors:{FieldsInputBackground:u?"BackgroundSecondary":"BackgroundPrimary",TextPrimary:u?"TextSecondary":"TextPrimary",FieldsIconSearch:"TextSecondary"}},children:(0,h.jsx)(n.SearchField,{placeholder:B.ZP.t("convenience_searchResults_input_placeholder",{businessName:p}),"data-anchor-id":t.D.StoreSearch.Id,size:n.SearchField.Sizes.Medium,autoComplete:"off",isRounded:!0,onChange:function(a){return G(a.trimStart())},label:B.ZP.t("convenience_searchResults_input_placeholder",{businessName:p}),isLabelHidden:!0,onKeyDown:aj,onFocus:af,onBlur:ah,value:F})})})})}},28006:function(a,b,c){c.d(b,{kN:function(){return r},p4:function(){return o},sb:function(){return p}});var d=c(7297),e=c(87379),f=c(10071),g=c(68885),h=c(71406);function i(){var a=(0,d.Z)(["\n  min-width: ",";\n"]);return i=function(){return a},a}function j(){var a=(0,d.Z)(["\n  min-width: ",";\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.2);\n  max-height: 300px;\n  overflow: auto;\n"]);return j=function(){return a},a}function k(){var a=(0,d.Z)(["\n  min-height: 80px;\n  min-width: ",";\n  width: ",";\n  max-width: ",";\n  background: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.2);\n  @media screen and (max-width: ","px) {\n    width: ",";\n    max-width: ",";\n  }\n"]);return k=function(){return a},a}function l(){var a=(0,d.Z)(["\n  background: ",";\n  cursor: pointer;\n  &:focus,\n  &:hover {\n    background: ",";\n    outline: none;\n  }\n"]);return l=function(){return a},a}function m(){var a=(0,d.Z)(["\n  padding: ",";\n  margin: ",";\n"]);return m=function(){return a},a}function n(){var a=(0,d.Z)(["\n  margin: 0;\n  padding: 0;\n"]);return n=function(){return a},a}var o=e.default.div.withConfig({componentId:"sc-346eaf0e-0"})(i(),g.y3);e.default.div.withConfig({componentId:"sc-346eaf0e-1"})(j(),h.B7);var p=e.default.div.withConfig({componentId:"sc-346eaf0e-2"})(k(),h.B7,h.Lf,h.Lf,f.Breakpoints.Mobile,h.pc,h.pc),q=e.default.div.withConfig({componentId:"sc-346eaf0e-3"})(l(),f.Colors.BackgroundPrimary,f.Colors.BackgroundSecondary);(0,e.default)(q).withConfig({componentId:"sc-346eaf0e-4"})(m(),f.Spacing.Small,f.Spacing.Large);var r=e.default.div.withConfig({componentId:"sc-346eaf0e-5"})(n())}}])